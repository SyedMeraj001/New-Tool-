"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[192],{5275:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(5043),s=r(3216),i=r(5475),n=r(3005),c=r(3234),l=r(579);const o=e=>{let{onLogout:t}=e;const{isDark:r,toggleTheme:o}=(0,n.D)(),d=(0,s.zy)(),[m,g]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),y="admin@esgenius.com"===localStorage.getItem("currentUser");(0,a.useEffect)(()=>{const e=()=>{if(y){const e=JSON.parse(localStorage.getItem("pendingUsers")||"[]");g(e.filter(e=>"pending"===e.status))}};e();const t=setInterval(e,2e3);return()=>clearInterval(t)},[y]);return(0,l.jsx)("header",{className:`sticky top-0 z-50 transition-all duration-300 ${r?"bg-gradient-to-r from-gray-900/95 via-gray-800/95 to-gray-900/95 border-gray-700":"bg-gradient-to-r from-emerald-600/95 via-teal-600/95 to-cyan-600/95 border-emerald-500/30"} backdrop-blur-xl border-b shadow-lg`,style:{boxShadow:r?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(16, 185, 129, 0.15)"},children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-lg overflow-hidden",children:(0,l.jsx)("img",{src:c,alt:"ESG Platform",className:"w-full h-full object-cover"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold "+(r?"bg-gradient-to-r from-blue-400 to-green-400 bg-clip-text text-transparent":"text-white drop-shadow-sm"),children:"E-S-Genius"}),(0,l.jsx)("p",{className:"text-xs "+(r?"text-gray-400":"text-emerald-100/90"),children:"ESG Platform"})]})]}),(0,l.jsx)("nav",{className:"hidden md:flex items-center space-x-1 flex-1 justify-center max-w-2xl",children:[{path:"/",label:"Dashboard",icon:"\ud83d\udcca"},{path:"/data-entry",label:"Data Entry",icon:"\ud83d\udcdd"},{path:"/reports",label:"Reports",icon:"\ud83d\udccb"},{path:"/analytics",label:"Analytics",icon:"\ud83d\udcc8"},{path:"/compliance",label:"Compliance",icon:"\u2705"},{path:"/regulatory",label:"Regulatory",icon:"\u2696\ufe0f"},{path:"/stakeholders",label:"Stakeholders",icon:"\ud83d\udc65"}].map(e=>{const t=d.pathname===e.path;return(0,l.jsxs)(i.N_,{to:e.path,className:"flex items-center space-x-1.5 px-3 py-2 rounded-lg font-medium text-sm transition-all duration-200 "+(t?r?"bg-blue-600 text-white shadow-lg":"bg-white/20 text-white shadow-lg backdrop-blur-sm":r?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-white/80 hover:text-white hover:bg-white/10 backdrop-blur-sm"),children:[(0,l.jsx)("span",{className:"text-base",children:e.icon}),(0,l.jsx)("span",{className:"hidden lg:block",children:e.label})]},e.path)})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,l.jsx)("button",{onClick:o,className:"p-2 rounded-lg transition-all duration-200 "+(r?"text-yellow-400 hover:bg-gray-700/50":"text-white/80 hover:text-white hover:bg-white/10"),children:(0,l.jsx)("span",{className:"text-lg",children:r?"\u2600\ufe0f":"\ud83c\udf19"})}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{onClick:()=>h(!u),className:"relative p-2 rounded-lg transition-all duration-200 "+(r?"text-gray-300 hover:bg-gray-700/50":"text-white/80 hover:text-white hover:bg-white/10"),children:[(0,l.jsx)("span",{className:"text-lg",children:"\ud83d\udd14"}),y&&m.length>0&&(0,l.jsx)("div",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-xs text-white font-bold",children:m.length})})]}),u&&y&&(0,l.jsxs)("div",{className:"absolute right-0 top-12 w-80 rounded-lg shadow-xl border z-50 "+(r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,l.jsx)("div",{className:"p-3 border-b "+(r?"border-gray-700 text-white":"border-gray-200 text-gray-900"),children:(0,l.jsx)("h3",{className:"font-semibold",children:"Pending User Approvals"})}),(0,l.jsx)("div",{className:"max-h-64 overflow-y-auto",children:0===m.length?(0,l.jsx)("div",{className:"p-4 text-center "+(r?"text-gray-400":"text-gray-500"),children:"No pending requests"}):m.map((e,t)=>(0,l.jsxs)("div",{className:"p-3 border-b last:border-b-0 "+(r?"border-gray-700":"border-gray-100"),children:[(0,l.jsx)("div",{className:"text-sm font-medium "+(r?"text-white":"text-gray-900"),children:e.fullName}),(0,l.jsx)("div",{className:"text-xs "+(r?"text-gray-400":"text-gray-500"),children:e.email}),(0,l.jsx)("div",{className:"text-xs mt-1 "+(r?"text-gray-500":"text-gray-400"),children:new Date(e.requestDate).toLocaleDateString()}),(0,l.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,l.jsx)("button",{onClick:()=>(e=>{const t=JSON.parse(localStorage.getItem("pendingUsers")||"[]"),r=JSON.parse(localStorage.getItem("approvedUsers")||"[]"),a=t.findIndex(t=>t.email===e);if(-1!==a){const e={...t[a]};e.status="approved",e.approvedDate=(new Date).toISOString(),r.push(e),t.splice(a,1),localStorage.setItem("pendingUsers",JSON.stringify(t)),localStorage.setItem("approvedUsers",JSON.stringify(r)),g(t.filter(e=>"pending"===e.status))}})(e.email),className:"px-2 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600",children:"Approve"}),(0,l.jsx)("button",{onClick:()=>(e=>{const t=JSON.parse(localStorage.getItem("pendingUsers")||"[]"),r=t.findIndex(t=>t.email===e);-1!==r&&(t.splice(r,1),localStorage.setItem("pendingUsers",JSON.stringify(t)),g(t.filter(e=>"pending"===e.status)))})(e.email),className:"px-2 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:"Reject"})]})]},t))})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-green-500 flex items-center justify-center text-white text-sm font-bold",children:"U"}),(0,l.jsx)("button",{onClick:()=>{localStorage.removeItem("userRole"),t()},className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200",children:"Logout"})]})]})]})})})}},6110:(e,t,r)=>{r.d(t,{Y:()=>a});const a=e=>({bg:{primary:e?"bg-gray-900":"bg-white",secondary:e?"bg-gray-800":"bg-gray-50",tertiary:e?"bg-gray-700":"bg-gray-100",gradient:e?"bg-gradient-to-br from-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100",card:e?"bg-gray-800":"bg-white",input:e?"bg-gray-700":"bg-white",subtle:e?"bg-gray-700":"bg-gray-50",accent:e?"bg-blue-900/30":"bg-blue-50"},text:{primary:e?"text-white":"text-gray-900",secondary:e?"text-gray-300":"text-gray-700",tertiary:e?"text-gray-400":"text-gray-600",muted:"text-gray-500",accent:"text-blue-500"},border:{primary:e?"border-gray-700":"border-gray-200",secondary:e?"border-gray-600":"border-gray-300",input:e?"border-gray-600":"border-gray-300"},hover:{bg:e?"hover:bg-gray-700":"hover:bg-gray-100",text:e?"hover:text-white":"hover:text-gray-900",border:e?"hover:border-gray-500":"hover:border-gray-400",subtle:e?"hover:bg-gray-600":"hover:bg-gray-200",card:e?"hover:bg-gray-700":"hover:bg-gray-50"},focus:{ring:"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}})},9192:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var a=r(5043),s=r(3005),i=r(6110),n=r(5275);class c{static calculateRealTimeScore(e){if(!e||"object"!==typeof e)throw new Error("Invalid data provided for ESG score calculation");const t={environmental:this.calculateEnvironmentalScore(e.environmental||{}),social:this.calculateSocialScore(e.social||{}),governance:this.calculateGovernanceScore(e.governance||{})};Object.keys(t).forEach(e=>{(isNaN(t[e])||t[e]<0||t[e]>100)&&(t[e]=0)});const r=t.environmental*this.weights.environmental+t.social*this.weights.social+t.governance*this.weights.governance,a=Math.max(0,Math.min(100,Math.round(r)));return{overallScore:a,categoryScores:t,grade:this.getGrade(a),lastUpdated:(new Date).toISOString()}}static calculateEnvironmentalScore(e){const t={carbonIntensity:this.normalizeMetric(e.carbonIntensity,0,100,!0),energyEfficiency:this.normalizeMetric(e.energyEfficiency,0,100),waterUsage:this.normalizeMetric(e.waterUsage,0,1e3,!0),wasteReduction:this.normalizeMetric(e.wasteReduction,0,100)};return Object.values(t).reduce((e,t)=>e+t,0)/Object.keys(t).length}static calculateSocialScore(e){const t={employeeSatisfaction:this.normalizeMetric(e.employeeSatisfaction,0,100),diversityIndex:this.normalizeMetric(e.diversityIndex,0,100),safetyRecord:this.normalizeMetric(e.safetyRecord,0,100),communityImpact:this.normalizeMetric(e.communityImpact,0,100)};return Object.values(t).reduce((e,t)=>e+t,0)/Object.keys(t).length}static calculateGovernanceScore(e){const t={boardIndependence:this.normalizeMetric(e.boardIndependence,0,100),executiveCompensation:this.normalizeMetric(e.executiveCompensation,0,100),transparency:this.normalizeMetric(e.transparency,0,100),ethicsCompliance:this.normalizeMetric(e.ethicsCompliance,0,100)};return Object.values(t).reduce((e,t)=>e+t,0)/Object.keys(t).length}static normalizeMetric(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0===e||null===e||isNaN(e))return 50;if(t>=r)return 50;const s=Number(e),i=Number(t),n=(s-i)/(Number(r)-i)*100,c=Math.max(0,Math.min(100,n));return a?100-c:c}static getGrade(e){return e>=90?"A+":e>=80?"A":e>=70?"B":e>=60?"C":"D"}static calculateTrendScore(e){if(e.length<2)return{trend:0,momentum:"stable"};const t=e.slice(-3),r=(t[t.length-1].score-t[0].score)/t.length;return{trend:Math.round(100*r)/100,momentum:r>2?"improving":r<-2?"declining":"stable"}}}c.weights={environmental:.4,social:.35,governance:.25};class l{static performPeerComparison(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"global";if(!e||"object"!==typeof e)throw new Error("Invalid company data for benchmarking");if(!t||"string"!==typeof t)throw new Error("Valid industry must be specified");const a=this.industryBenchmarks[t]||this.industryBenchmarks.manufacturing,s=e.categoryScores||{};if(!a)throw new Error(`No benchmark data available for industry: ${t}`);return{environmental:this.calculatePerformanceGap(s.environmental||0,a.environmental||70),social:this.calculatePerformanceGap(s.social||0,a.social||70),governance:this.calculatePerformanceGap(s.governance||0,a.governance||70),overall:this.calculateOverallRanking(e.overallScore||0,a),industry:t,region:r}}static calculatePerformanceGap(e,t){const r=Number(e)||0,a=Number(t)||70,s=r-a;return{score:r,benchmark:a,gap:Math.round(100*s)/100,percentile:this.calculatePercentile(r,a),status:s>5?"leader":s>-5?"average":"laggard"}}static calculatePercentile(e,t){const r=(e-t)/15;return Math.round(100*this.normalCDF(r))}static normalCDF(e){return.5*(1+this.erf(e/Math.sqrt(2)))}static erf(e){const t=e>=0?1:-1,r=1/(1+.3275911*(e=Math.abs(e)));return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-e*e))}static calculateOverallRanking(e,t){const r=(t.environmental+t.social+t.governance)/3;return this.calculatePerformanceGap(e,r)}static generateCompetitiveInsights(e){const t=[];return Object.entries(e).forEach(e=>{let[r,a]=e;"industry"!==r&&"region"!==r&&("leader"===a.status?t.push(`Strong performance in ${r} - ${a.gap.toFixed(1)} points above industry average`):"laggard"===a.status&&t.push(`Improvement needed in ${r} - ${Math.abs(a.gap).toFixed(1)} points below industry average`))}),t}static identifyBestPractices(e,t){return{category:t,practices:["Implement comprehensive sustainability reporting","Establish clear ESG governance structure","Set science-based targets for emissions reduction","Enhance stakeholder engagement programs"],leaders:e.slice(0,3),implementationPriority:"high"}}static calculateMarketPosition(e,t){const r=t.sort((e,t)=>t.score-e.score),a=r.findIndex(t=>t.score<=e)+1;return{rank:a,totalCompanies:r.length,percentileRank:Math.round(100*(1-a/r.length)),quartile:a<=.25*r.length?"Q1":a<=.5*r.length?"Q2":a<=.75*r.length?"Q3":"Q4"}}}l.industryBenchmarks={technology:{environmental:75,social:82,governance:88},manufacturing:{environmental:65,social:70,governance:75},finance:{environmental:70,social:85,governance:90},healthcare:{environmental:68,social:88,governance:82},energy:{environmental:55,social:65,governance:70}};class o{static forecastEmissions(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(e.length<2)return this.generateMockForecast(r);const a=this.calculateTrend(e),s=[],i=Math.max(...e.map(e=>e.year)),n=(null===(t=e.find(e=>e.year===i))||void 0===t?void 0:t.value)||0;for(let c=1;c<=r;c++){const e=n*Math.pow(1+a,c);s.push({year:i+c,value:Math.max(0,e),confidence:Math.max(.5,.9-.1*c),scenario:"baseline"})}return s}static calculateTrend(e){const t=e.sort((e,t)=>e.year-t.year);if(t.length<2)return 0;const r=t[0].value,a=t[t.length-1].value,s=t[t.length-1].year-t[0].year;return s>0?(a-r)/(r*s):0}static generateTargetTrajectory(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(new Date).getFullYear();const s=r-a,i=(e-t)/s,n=[];for(let c=0;c<=s;c++)n.push({year:a+c,value:e-i*c,isTarget:c===s,reductionRequired:i});return n}static assessTargetFeasibility(e,t,r,a){const s=(e-t)/e/(r-(new Date).getFullYear()),i={achievable:Math.abs(s)<=.1,difficulty:this.getDifficultyLevel(s),requiredAnnualReduction:100*s,historicalTrend:100*a,recommendations:[]};return i.achievable||(i.recommendations.push("Consider extending target timeline"),i.recommendations.push("Implement aggressive reduction measures")),i}static getDifficultyLevel(e){const t=Math.abs(e);return t<=.03?"easy":t<=.06?"moderate":t<=.1?"challenging":"very_difficult"}static generateMockForecast(e){const t=[];for(let r=1;r<=e;r++)t.push({year:(new Date).getFullYear()+r,value:1e4*Math.pow(.95,r),confidence:.8-.1*r,scenario:"baseline"});return t}static calculateROI(e,t){const r=t*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:5),a=(r-e)/e*100,s=e/t;return{roi:Math.round(100*a)/100,paybackPeriod:Math.round(100*s)/100,totalSavings:r,netBenefit:r-e}}}class d{static analyzeTrends(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;Array.isArray(e)||(console.warn("Invalid historical data provided for trend analysis"),e=[]);const r={environmental:this.calculateCategoryTrend(e,"environmental",t),social:this.calculateCategoryTrend(e,"social",t),governance:this.calculateCategoryTrend(e,"governance",t)};return{trends:r,predictions:this.generatePredictions(r),insights:this.generateInsights(r),riskFactors:this.identifyRiskFactors(r)}}static calculateCategoryTrend(e,t,r){const a=e.filter(e=>e.category===t).sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(-r);if(a.length<2)return this.getDefaultTrend();const s=a.map(e=>e.value),i=this.calculateLinearRegression(s),n=this.calculateVolatility(s),c=this.calculateMomentum(s);return{direction:i>.1?"improving":i<-.1?"declining":"stable",slope:Math.round(1e3*i)/1e3,volatility:Math.round(100*n)/100,momentum:c,confidence:this.calculateConfidence(a.length,n),dataPoints:a.length}}static calculateLinearRegression(e){if(!Array.isArray(e)||e.length<2)return 0;const t=e.length,r=Array.from({length:t},(e,t)=>t),a=r.reduce((e,t)=>e+t,0),s=e.reduce((e,t)=>e+t,0),i=r.reduce((t,r,a)=>t+r*e[a],0),n=t*r.reduce((e,t)=>e+t*t,0)-a*a;return 0===n?0:(t*i-a*s)/n}static calculateVolatility(e){const t=e.reduce((e,t)=>e+t)/e.length,r=e.reduce((e,r)=>e+Math.pow(r-t,2),0)/e.length;return Math.sqrt(r)}static calculateMomentum(e){if(e.length<3)return"neutral";const t=e.slice(-3),r=e.slice(-6,-3);if(0===r.length)return"neutral";const a=t.reduce((e,t)=>e+t)/t.length,s=r.reduce((e,t)=>e+t)/r.length,i=(a-s)/s;return i>.05?"accelerating":i<-.05?"decelerating":"steady"}static calculateConfidence(e,t){const r=.7*Math.min(e/12,1),a=Math.min(t/10,.3);return Math.max(.3,r-a)}static generatePredictions(e){const t={};return Object.entries(e).forEach(e=>{let[r,a]=e;t[r]={nextQuarter:this.predictNextPeriod(a,3),nextYear:this.predictNextPeriod(a,12),targetAchievability:this.assessTargetAchievability(a)}}),t}static predictNextPeriod(e,t){const r=e.slope*t,a=1.96*e.volatility;return{expectedChange:Math.round(100*r)/100,range:{low:Math.round(100*(r-a))/100,high:Math.round(100*(r+a))/100},confidence:e.confidence}}static assessTargetAchievability(e){return"improving"===e.direction&&"accelerating"===e.momentum?{likelihood:"high",recommendation:"Consider more ambitious targets"}:"declining"===e.direction?{likelihood:"low",recommendation:"Implement corrective measures immediately"}:{likelihood:"moderate",recommendation:"Monitor closely and adjust strategy"}}static generateInsights(e){const t=[];return Object.entries(e).forEach(e=>{let[r,a]=e;"improving"===a.direction&&a.confidence>.7?t.push(`${r} performance shows strong positive trend with ${(100*a.confidence).toFixed(0)}% confidence`):"declining"===a.direction&&a.confidence>.6?t.push(`${r} performance declining - immediate attention required`):a.volatility>5&&t.push(`${r} shows high volatility - consider stabilization measures`)}),t}static identifyRiskFactors(e){const t=[];return Object.entries(e).forEach(e=>{let[r,a]=e;"declining"===a.direction&&"accelerating"===a.momentum?t.push({category:r,risk:"Accelerating decline",severity:"high",impact:"Performance deterioration may affect overall ESG rating"}):a.volatility>8&&t.push({category:r,risk:"High volatility",severity:"medium",impact:"Unpredictable performance may indicate systemic issues"})}),t}static getDefaultTrend(){return{direction:"stable",slope:0,volatility:0,momentum:"neutral",confidence:.3,dataPoints:0}}static generateForecast(e){return o.forecastEmissions(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:6)}}class m{static assessESGRisks(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"global";if(!e||"object"!==typeof e)throw new Error("Invalid company data for risk assessment");if(!t||"string"!==typeof t)throw new Error("Valid industry must be specified for risk assessment");try{const a=this.buildRiskMatrix(e,t),s=this.assessMateriality(a,t),i=this.generateMitigationStrategies(a);return{overallRiskScore:this.calculateOverallRisk(a),riskMatrix:a,materialityAssessment:s,mitigationStrategies:i,riskTrends:this.analyzeRiskTrends(e),regulatoryRisks:this.assessRegulatoryRisks(t,r)}}catch(a){return console.error("Risk assessment failed:",a),this.getDefaultRiskAssessment()}}static getDefaultRiskAssessment(){return{overallRiskScore:{score:0,level:"unknown",distribution:{critical:0,high:0,medium:0,low:0}},riskMatrix:{},materialityAssessment:[],mitigationStrategies:{},riskTrends:{emerging:[],declining:[],stable:[]},regulatoryRisks:{applicableRegulations:[],complianceGaps:[],upcomingRequirements:[]}}}static buildRiskMatrix(e,t){const r={};return Object.entries(this.riskCategories).forEach(a=>{let[s,i]=a;r[s]={},i.forEach(a=>{const i=this.calculateRiskProbability(e,s,a,t),n=this.calculateRiskImpact(a,t);r[s][a]={probability:i,impact:n,riskScore:i*n,riskLevel:this.getRiskLevel(i*n),mitigationStatus:this.assessMitigationStatus(e,a)}})}),r}static calculateRiskProbability(e,t,r,a){const s=e[t]||{},i=this.getIndustryRiskMultiplier(a,r);let n=.3;return s.score<50?n=.8:s.score<70?n=.5:s.score>85&&(n=.2),Math.min(.95,n*i)}static calculateRiskImpact(e,t){var r;return(null===(r={climate_change:{technology:.7,manufacturing:.9,energy:.95,finance:.6},resource_scarcity:{manufacturing:.9,technology:.6,energy:.8},labor_practices:{manufacturing:.8,technology:.7,healthcare:.9},board_oversight:{finance:.9,technology:.8,manufacturing:.7}}[e])||void 0===r?void 0:r[t])||.6}static getIndustryRiskMultiplier(e,t){var r;return(null===(r={energy:{climate_change:1.5,pollution:1.4},manufacturing:{resource_scarcity:1.3,labor_practices:1.2},technology:{human_rights:1.2,transparency:.8},finance:{corruption:1.3,board_oversight:1.1}}[e])||void 0===r?void 0:r[t])||1}static getRiskLevel(e){return e>=.7?"critical":e>=.5?"high":e>=.3?"medium":"low"}static assessMitigationStatus(e,t){return(e.controls||{})[t]?"active":"planned"}static calculateOverallRisk(e){let t=0,r=0;if(!e||"object"!==typeof e)return{score:0,level:"unknown",distribution:{critical:0,high:0,medium:0,low:0}};if(Object.values(e).forEach(e=>{e&&"object"===typeof e&&Object.values(e).forEach(e=>{e&&"number"===typeof e.riskScore&&(t+=e.riskScore,r++)})}),0===r)return{score:0,level:"unknown",distribution:{critical:0,high:0,medium:0,low:0}};const a=t/r;return{score:Math.round(100*a),level:this.getRiskLevel(a),distribution:this.getRiskDistribution(e)}}static getRiskDistribution(e){const t={critical:0,high:0,medium:0,low:0};return Object.values(e).forEach(e=>{Object.values(e).forEach(e=>{t[e.riskLevel]++})}),t}static assessMateriality(e,t){const r=[];return Object.entries(e).forEach(e=>{let[a,s]=e;Object.entries(s).forEach(e=>{let[s,i]=e;i.riskScore>=.5&&r.push({category:a,risk:s,score:i.riskScore,stakeholderImpact:this.assessStakeholderImpact(s,t),businessImpact:this.assessBusinessImpact(s,i.riskScore)})})}),r.sort((e,t)=>t.score-e.score)}static assessStakeholderImpact(e,t){return{climate_change:["investors","regulators","customers"],labor_practices:["employees","unions","communities"],board_oversight:["shareholders","regulators","rating_agencies"]}[e]||["stakeholders"]}static assessBusinessImpact(e,t){const r=[];return t>=.7?(r.push("Potential regulatory penalties"),r.push("Reputation damage"),r.push("Investor confidence loss")):t>=.5&&(r.push("Operational disruptions"),r.push("Increased compliance costs")),r}static generateMitigationStrategies(e){const t={};return Object.entries(e).forEach(e=>{let[r,a]=e;t[r]=[],Object.entries(a).forEach(e=>{let[a,s]=e;"critical"!==s.riskLevel&&"high"!==s.riskLevel||t[r].push({risk:a,priority:"critical"===s.riskLevel?"immediate":"high",actions:this.getSpecificMitigationActions(a),timeline:"critical"===s.riskLevel?"3 months":"6 months",resources:this.estimateResourceRequirements(a,s.riskScore)})})}),t}static getSpecificMitigationActions(e){return{climate_change:["Set science-based targets","Implement carbon reduction plan","Enhance climate disclosure"],labor_practices:["Conduct labor audits","Implement fair wage policies","Strengthen worker safety programs"],board_oversight:["Enhance board independence","Implement ESG oversight committee","Improve transparency"]}[e]||["Develop comprehensive risk management plan"]}static estimateResourceRequirements(e,t){const r=100*t;return{effort:r>70?"high":r>40?"medium":"low",budget:r>70?"$500K+":r>40?"$100K-500K":"<$100K",timeline:r>70?"12+ months":r>40?"6-12 months":"3-6 months"}}static analyzeRiskTrends(e){return{emerging:["supply_chain_disruption","cyber_security"],declining:["traditional_governance"],stable:["environmental_compliance"]}}static assessRegulatoryRisks(e,t){const r={global:["TCFD","SASB","GRI"],eu:["CSRD","EU_Taxonomy","SFDR"],us:["SEC_Climate_Rules","State_Regulations"]};return{applicableRegulations:r[t]||r.global,complianceGaps:this.identifyComplianceGaps(e),upcomingRequirements:this.getUpcomingRequirements(t)}}static identifyComplianceGaps(e){return["Climate risk disclosure gaps","Supply chain transparency requirements","Board diversity reporting"]}static getUpcomingRequirements(e){return[{regulation:"Enhanced climate disclosure",deadline:"2025-01-01",impact:"high"},{regulation:"Supply chain due diligence",deadline:"2024-07-01",impact:"medium"}]}}m.riskCategories={environmental:["climate_change","resource_scarcity","pollution","biodiversity_loss"],social:["labor_practices","human_rights","community_relations","product_safety"],governance:["board_oversight","executive_compensation","transparency","corruption"]};class g{static async generateComprehensiveAnalytics(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"global";if(!e||"object"!==typeof e)throw new Error("Invalid company data provided");if(!t||"string"!==typeof t)throw new Error("Valid industry must be specified");try{const a=this.safeCalculateScore(e),s=this.safeBenchmarking(a,t,r),i=this.safeTrendAnalysis(e.historicalData||[]),n=this.safeRiskAssessment(e,t,r);return{timestamp:(new Date).toISOString(),esgScore:a,benchmarking:s,trendAnalysis:i,riskAssessment:n,summary:this.generateExecutiveSummary(a,s,i,n),recommendations:this.generateRecommendations(a,s,n)}}catch(a){return console.error("Analytics generation failed:",a),this.getDefaultAnalytics()}}static safeCalculateScore(e){try{return c.calculateRealTimeScore(e)}catch(t){return console.warn("ESG score calculation failed:",t),{overallScore:0,grade:"N/A",categoryScores:{environmental:0,social:0,governance:0}}}}static safeBenchmarking(e,t,r){try{return l.performPeerComparison(e,t,r)}catch(a){return console.warn("Benchmarking failed:",a),{overall:{percentile:0},environmental:{status:"unknown"},social:{status:"unknown"},governance:{status:"unknown"}}}}static safeTrendAnalysis(e){try{return d.analyzeTrends(e)}catch(t){return console.warn("Trend analysis failed:",t),{trends:{},insights:[],predictions:{},riskFactors:[]}}}static safeRiskAssessment(e,t,r){try{return m.assessESGRisks(e,t,r)}catch(a){return console.warn("Risk assessment failed:",a),{overallRiskScore:{level:"unknown",score:0},materialityAssessment:[],riskMatrix:{}}}}static generateExecutiveSummary(e,t,r,a){var s;const i=(null===e||void 0===e?void 0:e.overallScore)||0,n=(null===e||void 0===e?void 0:e.grade)||"N/A",c=(null===t||void 0===t||null===(s=t.overall)||void 0===s?void 0:s.percentile)||0,l=(null===a||void 0===a?void 0:a.materialityAssessment)||[];return{overallPerformance:`ESG Score: ${i}/100 (${n})`,marketPosition:`${c}th percentile in industry`,keyTrends:this.summarizeKeyTrends(r),topRisks:l.slice(0,3).map(e=>(null===e||void 0===e?void 0:e.risk)||"Unknown"),urgentActions:this.identifyUrgentActions(a,r)}}static summarizeKeyTrends(e){const t=[];return null!==e&&void 0!==e&&e.trends&&"object"===typeof e.trends?(Object.entries(e.trends).forEach(e=>{let[r,a]=e;if(null!==a&&void 0!==a&&a.direction&&"stable"!==a.direction){const e=(a.confidence||0)>.7?"high":"moderate";t.push(`${r}: ${a.direction} (${e} confidence)`)}}),t):t}static identifyUrgentActions(e,t){const r=[];return null!==e&&void 0!==e&&e.riskMatrix&&"object"===typeof e.riskMatrix&&Object.values(e.riskMatrix).forEach(e=>{e&&"object"===typeof e&&Object.entries(e).forEach(e=>{let[t,a]=e;"critical"===(null===a||void 0===a?void 0:a.riskLevel)&&r.push(`Address ${t.replace("_"," ")} immediately`)})}),null!==t&&void 0!==t&&t.trends&&"object"===typeof t.trends&&Object.entries(t.trends).forEach(e=>{let[t,a]=e;"declining"===(null===a||void 0===a?void 0:a.direction)&&(a.confidence||0)>.6&&r.push(`Reverse declining ${t} performance`)}),r.slice(0,5)}static generateRecommendations(e,t,r){const a=[];return null!==e&&void 0!==e&&e.categoryScores&&"object"===typeof e.categoryScores&&Object.entries(e.categoryScores).forEach(e=>{let[t,r]=e;(Number(r)||0)<60&&a.push({category:t,priority:"high",action:`Implement comprehensive ${t} improvement program`,expectedImpact:"Significant score improvement"})}),t&&"object"===typeof t&&Object.entries(t).forEach(e=>{let[t,r]=e;"laggard"===(null===r||void 0===r?void 0:r.status)&&"industry"!==t&&"region"!==t&&"number"===typeof r.gap&&a.push({category:t,priority:"medium",action:`Close ${Math.abs(r.gap).toFixed(1)} point gap in ${t}`,expectedImpact:"Improved industry positioning"})}),null!==r&&void 0!==r&&r.materialityAssessment&&Array.isArray(r.materialityAssessment)&&r.materialityAssessment.slice(0,3).forEach(e=>{null!==e&&void 0!==e&&e.category&&null!==e&&void 0!==e&&e.risk&&a.push({category:e.category,priority:"high",action:`Mitigate ${e.risk.replace("_"," ")} exposure`,expectedImpact:"Reduced ESG risk profile"})}),a.sort((e,t)=>{const r={high:3,medium:2,low:1};return(r[t.priority]||0)-(r[e.priority]||0)})}static getDefaultAnalytics(){return{timestamp:(new Date).toISOString(),esgScore:{overallScore:0,grade:"N/A",categoryScores:{}},benchmarking:{overall:{percentile:0}},trendAnalysis:{trends:{},insights:[]},riskAssessment:{overallRiskScore:{level:"unknown"},materialityAssessment:[]},summary:{overallPerformance:"Data unavailable"},recommendations:[]}}static formatAnalyticsForDisplay(e){var t;return{scoreCard:{score:e.esgScore.overallScore,grade:e.esgScore.grade,trend:(null===(t=e.trendAnalysis.trends.overall)||void 0===t?void 0:t.direction)||"stable"},benchmarkChart:{environmental:e.benchmarking.environmental,social:e.benchmarking.social,governance:e.benchmarking.governance},riskMatrix:e.riskAssessment.riskMatrix,keyInsights:[...e.trendAnalysis.insights,...e.summary.urgentActions.map(e=>`Action needed: ${e}`)]}}}var u=r(6169),h=r(3216),y=r(579);const p=()=>{const e=(0,h.Zp)(),{isDark:t}=(0,s.D)(),r=(0,i.Y)(t),[c,l]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[m,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{x()},[]);const x=async()=>{try{d(!0);const e=await(0,u.YF)();if(!e||0===e.length)return p("No ESG data found. Please add some data first."),void d(!1);const t=b(e),r=await g.generateComprehensiveAnalytics(t,"technology","global");l(r),p(null)}catch(e){p("Failed to generate analytics: "+e.message)}finally{d(!1)}},b=e=>{const t={},r={},a={},s=[];return e.forEach(e=>{"environmental"===e.category?(t[e.metric]=e.value,s.push({category:"environmental",value:e.value,date:e.createdAt||e.date||(new Date).toISOString()})):"social"===e.category?(r[e.metric]=e.value,s.push({category:"social",value:e.value,date:e.createdAt||e.date||(new Date).toISOString()})):"governance"===e.category&&(a[e.metric]=e.value,s.push({category:"governance",value:e.value,date:e.createdAt||e.date||(new Date).toISOString()}))}),{environmental:t,social:r,governance:a,historicalData:s}},v=()=>{localStorage.removeItem("currentUser"),e("/login")};return o?(0,y.jsxs)("div",{className:"min-h-screen "+(t?"bg-gray-900":"bg-gray-50"),children:[(0,y.jsx)(n.A,{onLogout:v,currentUser:localStorage.getItem("currentUser")}),(0,y.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,y.jsx)("p",{className:r.text.secondary,children:"Generating advanced analytics..."})]})})]}):m?(0,y.jsxs)("div",{className:"min-h-screen "+(t?"bg-gray-900":"bg-gray-50"),children:[(0,y.jsx)(n.A,{onLogout:v,currentUser:localStorage.getItem("currentUser")}),(0,y.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,y.jsxs)("div",{className:"rounded-lg p-6 border "+(t?"bg-red-900/20 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700"),children:[(0,y.jsx)("h3",{className:"font-semibold mb-2",children:"Analytics Error"}),(0,y.jsx)("p",{children:m}),(0,y.jsx)("button",{onClick:()=>e("/data-entry"),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add ESG Data"})]})})]}):(0,y.jsxs)("div",{className:"min-h-screen "+(t?"bg-gray-900":"bg-gray-50"),children:[(0,y.jsx)(n.A,{onLogout:v,currentUser:localStorage.getItem("currentUser")}),(0,y.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,y.jsxs)("div",{className:"mb-8",children:[(0,y.jsx)("h1",{className:`text-3xl font-bold ${r.text.primary} mb-2`,children:"Advanced ESG Analytics"}),(0,y.jsx)("p",{className:r.text.secondary,children:"Comprehensive analysis with real-time scoring, benchmarking, and risk assessment"})]}),(0,y.jsxs)("div",{className:`rounded-xl p-6 mb-6 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[(0,y.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,y.jsx)("h2",{className:`text-xl font-semibold ${r.text.primary}`,children:"ESG Score Overview"}),(0,y.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-medium "+("A+"===c.esgScore.grade||"A"===c.esgScore.grade?"bg-green-100 text-green-800":"B"===c.esgScore.grade?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["Grade ",c.esgScore.grade]})]}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsx)("div",{className:`text-4xl font-bold ${r.text.primary} mb-2`,children:c.esgScore.overallScore}),(0,y.jsx)("div",{className:`text-sm ${r.text.secondary}`,children:"Overall Score"})]}),Object.entries(c.esgScore.categoryScores).map(e=>{let[a,s]=e;return(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsx)("div",{className:`text-2xl font-semibold ${r.text.primary} mb-2`,children:Math.round(s)}),(0,y.jsx)("div",{className:`text-sm ${r.text.secondary} capitalize`,children:a}),(0,y.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2 "+(t?"bg-gray-700":""),children:(0,y.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${s}%`}})})]},a)})]})]}),(0,y.jsxs)("div",{className:`rounded-xl p-6 mb-6 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[(0,y.jsx)("h2",{className:`text-xl font-semibold ${r.text.primary} mb-4`,children:"Industry Benchmarking"}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,y.jsxs)("div",{className:"text-center p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[(0,y.jsxs)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[c.benchmarking.overall.percentile,"th"]}),(0,y.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Industry Percentile"})]}),Object.entries(c.benchmarking).filter(e=>{let[t]=e;return"overall"!==t&&"industry"!==t&&"region"!==t}).map(e=>{let[t,r]=e;return(0,y.jsxs)("div",{className:"text-center p-4 rounded-lg bg-gray-50 dark:bg-gray-800",children:[(0,y.jsxs)("div",{className:"text-lg font-semibold mb-1 "+("leader"===r.status?"text-green-600":"laggard"===r.status?"text-red-600":"text-yellow-600"),children:[r.gap>0?"+":"",r.gap.toFixed(1)]}),(0,y.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:t}),(0,y.jsx)("div",{className:"text-xs font-medium "+("leader"===r.status?"text-green-600":"laggard"===r.status?"text-red-600":"text-yellow-600"),children:r.status})]},t)})]})]}),(0,y.jsxs)("div",{className:`rounded-xl p-6 mb-6 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[(0,y.jsx)("h2",{className:`text-xl font-semibold ${r.text.primary} mb-4`,children:"Risk Assessment"}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,y.jsx)("div",{className:"text-3xl font-bold "+("low"===c.riskAssessment.overallRiskScore.level?"text-green-600":"medium"===c.riskAssessment.overallRiskScore.level?"text-yellow-600":"text-red-600"),children:c.riskAssessment.overallRiskScore.score}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:`font-semibold ${r.text.primary}`,children:"Overall Risk Score"}),(0,y.jsxs)("div",{className:"text-sm capitalize "+("low"===c.riskAssessment.overallRiskScore.level?"text-green-600":"medium"===c.riskAssessment.overallRiskScore.level?"text-yellow-600":"text-red-600"),children:[c.riskAssessment.overallRiskScore.level," Risk Level"]})]})]}),(0,y.jsx)("div",{className:"space-y-2",children:Object.entries(c.riskAssessment.overallRiskScore.distribution).map(e=>{let[t,a]=e;return(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsxs)("span",{className:`text-sm capitalize ${r.text.secondary}`,children:[t," Risk:"]}),(0,y.jsx)("span",{className:`font-medium ${r.text.primary}`,children:a})]},t)})})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{className:`font-semibold ${r.text.primary} mb-3`,children:"Material Risks"}),c.riskAssessment.materialityAssessment.length>0?(0,y.jsx)("div",{className:"space-y-2",children:c.riskAssessment.materialityAssessment.slice(0,5).map((e,a)=>(0,y.jsxs)("div",{className:"p-3 rounded-lg "+(t?"bg-gray-700":"bg-gray-50"),children:[(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsx)("span",{className:`font-medium capitalize ${r.text.primary}`,children:e.risk.replace("_"," ")}),(0,y.jsxs)("span",{className:"text-sm px-2 py-1 rounded "+(e.score>=.7?"bg-red-100 text-red-800":e.score>=.5?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[(100*e.score).toFixed(0),"%"]})]}),(0,y.jsx)("div",{className:`text-xs ${r.text.secondary} capitalize`,children:e.category})]},a))}):(0,y.jsx)("p",{className:r.text.secondary,children:"No material risks identified"})]})]})]}),(0,y.jsxs)("div",{className:`rounded-xl p-6 mb-6 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[(0,y.jsx)("h2",{className:`text-xl font-semibold ${r.text.primary} mb-4`,children:"Recommendations"}),(0,y.jsx)("div",{className:"space-y-3",children:c.recommendations.slice(0,8).map((e,t)=>(0,y.jsx)("div",{className:"p-4 rounded-lg border-l-4 "+("high"===e.priority?"border-red-500 bg-red-50 dark:bg-red-900/20":"medium"===e.priority?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-blue-500 bg-blue-50 dark:bg-blue-900/20"),children:(0,y.jsx)("div",{className:"flex items-start justify-between",children:(0,y.jsxs)("div",{className:"flex-1",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,y.jsx)("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase "+("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.priority}),(0,y.jsx)("span",{className:`text-xs ${r.text.secondary} capitalize`,children:e.category})]}),(0,y.jsx)("p",{className:`font-medium ${r.text.primary}`,children:e.action}),(0,y.jsx)("p",{className:`text-sm ${r.text.secondary} mt-1`,children:e.expectedImpact})]})})},t))})]}),(0,y.jsxs)("div",{className:`rounded-xl p-6 ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[(0,y.jsx)("h2",{className:`text-xl font-semibold ${r.text.primary} mb-4`,children:"Executive Summary"}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{className:`font-semibold ${r.text.primary} mb-2`,children:"Performance Overview"}),(0,y.jsx)("p",{className:r.text.secondary,children:c.summary.overallPerformance}),(0,y.jsx)("p",{className:`${r.text.secondary} mt-2`,children:c.summary.marketPosition})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{className:`font-semibold ${r.text.primary} mb-2`,children:"Urgent Actions Required"}),c.summary.urgentActions&&c.summary.urgentActions.length>0?(0,y.jsx)("ul",{className:"space-y-1",children:c.summary.urgentActions.map((e,t)=>(0,y.jsxs)("li",{className:`text-sm ${r.text.secondary} flex items-start gap-2`,children:[(0,y.jsx)("span",{className:"text-red-500 mt-1",children:"\u2022"}),e]},t))}):(0,y.jsx)("p",{className:`text-sm ${r.text.secondary}`,children:"No urgent actions required"})]})]})]})]})]})}}}]);
//# sourceMappingURL=192.6b274d63.chunk.js.map