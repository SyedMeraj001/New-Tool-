{"version":3,"file":"static/js/265.bf9a4c4a.chunk.js","mappings":"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","sources":["utils/frameworkMapper.js","components/FrameworkCompliance.js","components/FrameworkComplianceSummary.js","utils/reportGenerators/BRSRReportGenerator.js","utils/reportGenerators/GRIReportGenerator.js","utils/reportGenerators/SASBReportGenerator.js","utils/reportGenerators/TCFDReportGenerator.js","components/FrameworkReportSelector.js","utils/professionalPDFGenerator.js","utils/enhancedProfessionalPDF.js","components/ProfessionalReportPreview.jsx","components/ProfessionalReportTemplate.jsx","components/CustomReportBuilder.jsx","Reports.js","utils/reportGenerator.js"],"sourcesContent":["// Framework Data Mapping and Validation Utilities\nimport { ESG_FRAMEWORKS, STANDARD_METRICS } from './esgFrameworks';\n\nexport const GRI_METRIC_MAPPINGS = {\n  // Environmental mappings\n  'scope1_emissions': 'GRI-305-1',\n  'scope2_emissions': 'GRI-305-2', \n  'scope3_emissions': 'GRI-305-3',\n  'energy_consumption': 'GRI-302-1',\n  'renewable_energy': 'GRI-302-1',\n  'water_withdrawal': 'GRI-303-3',\n  'water_discharge': 'GRI-303-4',\n  'waste_generated': 'GRI-306-3',\n  'waste_recycled': 'GRI-306-4',\n  'materials_used': 'GRI-301-1',\n  \n  // Social mappings\n  'total_employees': 'GRI-2-7',\n  'new_hires': 'GRI-401-1',\n  'employee_turnover': 'GRI-401-1',\n  'female_employees': 'GRI-405-1',\n  'board_diversity': 'GRI-405-1',\n  'training_hours': 'GRI-404-1',\n  'safety_incidents': 'GRI-403-9',\n  'lost_time_injuries': 'GRI-403-9',\n  \n  // Governance mappings\n  'board_size': 'GRI-2-9',\n  'independent_directors': 'GRI-2-9',\n  'ethics_violations': 'GRI-205-3',\n  'corruption_incidents': 'GRI-205-3',\n  'legal_actions': 'GRI-206-1'\n};\n\nexport const SASB_METRIC_MAPPINGS = {\n  // Technology sector mappings\n  'data_breaches': 'TC-SI-230a.1',\n  'customer_privacy': 'TC-SI-220a.1',\n  'energy_consumption': 'TC-SI-130a.1',\n  'renewable_energy': 'TC-SI-130a.2',\n  \n  // Financial sector mappings\n  'esg_integration': 'FN-IB-410a.1',\n  'climate_risk': 'FN-CB-450a.1',\n  'financial_inclusion': 'FN-CB-240a.1',\n  \n  // Healthcare sector mappings\n  'clinical_trial_safety': 'HC-BP-210a.1',\n  'drug_pricing': 'HC-BP-240a.1',\n  'product_recalls': 'HC-BP-250a.1'\n};\n\nexport const validateFrameworkCompliance = (data, framework = 'GRI') => {\n  const results = {\n    framework,\n    totalRequirements: 0,\n    metRequirements: 0,\n    missingRequirements: [],\n    complianceScore: 0,\n    categoryScores: {}\n  };\n\n  const normalizedData = Array.isArray(data) ? data : [];\n  \n  if (framework === 'GRI') {\n    const griRequirements = {\n      environmental: ['scope1Emissions', 'scope2Emissions', 'energyConsumption', 'waterWithdrawal', 'wasteGenerated'],\n      social: ['totalEmployees', 'femaleEmployeesPercentage', 'trainingHoursPerEmployee', 'lostTimeInjuryRate'],\n      governance: ['boardSize', 'independentDirectorsPercentage', 'ethicsTrainingCompletion', 'corruptionIncidents']\n    };\n    \n    Object.entries(griRequirements).forEach(([category, requirements]) => {\n      const categoryData = normalizedData.filter(item => \n        item.category?.toLowerCase() === category.toLowerCase()\n      );\n      \n      const availableMetrics = new Set(categoryData.map(item => item.metric));\n      const metRequirements = requirements.filter(req => \n        availableMetrics.has(req) || \n        categoryData.some(item => item.metric?.includes(req.replace(/([A-Z])/g, '_$1').toLowerCase().substring(1)))\n      );\n\n      results.categoryScores[category] = {\n        total: requirements.length,\n        met: metRequirements.length,\n        percentage: Math.round((metRequirements.length / requirements.length) * 100),\n        missing: requirements.filter(req => !metRequirements.includes(req))\n      };\n\n      results.totalRequirements += requirements.length;\n      results.metRequirements += metRequirements.length;\n      results.missingRequirements.push(...results.categoryScores[category].missing);\n    });\n  }\n\n  if (framework === 'SASB') {\n    const sasbRequirements = {\n      environmental: ['energyConsumption', 'renewableEnergy', 'waterWithdrawal', 'ghgEmissions'],\n      social: ['employeeDiversity', 'dataPrivacy', 'customerSatisfaction'],\n      governance: ['dataSecurity', 'businessEthics', 'riskManagement']\n    };\n    \n    Object.entries(sasbRequirements).forEach(([category, requirements]) => {\n      const categoryData = normalizedData.filter(item => \n        item.category?.toLowerCase() === category.toLowerCase()\n      );\n      \n      const availableMetrics = new Set(categoryData.map(item => item.metric));\n      const metRequirements = requirements.filter(req => \n        availableMetrics.has(req) || \n        categoryData.some(item => item.metric?.includes(req.replace(/([A-Z])/g, '_$1').toLowerCase().substring(1)))\n      );\n\n      results.categoryScores[category] = {\n        total: requirements.length,\n        met: metRequirements.length,\n        percentage: Math.round((metRequirements.length / requirements.length) * 100),\n        missing: requirements.filter(req => !metRequirements.includes(req))\n      };\n\n      results.totalRequirements += requirements.length;\n      results.metRequirements += metRequirements.length;\n      results.missingRequirements.push(...results.categoryScores[category].missing);\n    });\n  }\n\n  if (framework === 'TCFD') {\n    const tcfdRequirements = {\n      governance: ['boardOversight', 'managementRole'],\n      strategy: ['climateRisks', 'businessImpact'],\n      risk_management: ['riskIdentification', 'riskAssessment'],\n      metrics_targets: ['scope1Emissions', 'scope2Emissions', 'scope3Emissions']\n    };\n    \n    Object.entries(tcfdRequirements).forEach(([pillar, requirements]) => {\n      const availableMetrics = new Set(normalizedData.map(item => item.metric));\n      const metRequirements = requirements.filter(req => \n        availableMetrics.has(req) || \n        normalizedData.some(item => item.metric?.includes(req.replace(/([A-Z])/g, '_$1').toLowerCase().substring(1)))\n      );\n\n      results.categoryScores[pillar] = {\n        total: requirements.length,\n        met: metRequirements.length,\n        percentage: Math.round((metRequirements.length / requirements.length) * 100),\n        missing: requirements.filter(req => !metRequirements.includes(req))\n      };\n\n      results.totalRequirements += requirements.length;\n      results.metRequirements += metRequirements.length;\n      results.missingRequirements.push(...results.categoryScores[pillar].missing);\n    });\n  }\n\n  if (framework === 'BRSR') {\n    const brsrRequirements = {\n      environmental: ['energyConsumption', 'ghgEmissions', 'waterUsage', 'wasteManagement'],\n      social: ['employeeWellbeing', 'diversityInclusion', 'communityInvestment'],\n      governance: ['boardComposition', 'ethicsCompliance', 'stakeholderEngagement']\n    };\n    \n    Object.entries(brsrRequirements).forEach(([category, requirements]) => {\n      const categoryData = normalizedData.filter(item => \n        item.category?.toLowerCase() === category.toLowerCase()\n      );\n      \n      const availableMetrics = new Set(categoryData.map(item => item.metric));\n      const metRequirements = requirements.filter(req => \n        availableMetrics.has(req) || \n        categoryData.some(item => item.metric?.includes(req.replace(/([A-Z])/g, '_$1').toLowerCase().substring(1)))\n      );\n\n      results.categoryScores[category] = {\n        total: requirements.length,\n        met: metRequirements.length,\n        percentage: Math.round((metRequirements.length / requirements.length) * 100),\n        missing: requirements.filter(req => !metRequirements.includes(req))\n      };\n\n      results.totalRequirements += requirements.length;\n      results.metRequirements += metRequirements.length;\n      results.missingRequirements.push(...results.categoryScores[category].missing);\n    });\n  }\n\n  results.complianceScore = results.totalRequirements > 0 \n    ? Math.round((results.metRequirements / results.totalRequirements) * 100) \n    : 0;\n\n  return results;\n};\n\nexport const mapDataToFramework = (dataEntry, targetFramework = 'GRI') => {\n  const mappedEntry = { ...dataEntry };\n  \n  if (targetFramework === 'GRI' && dataEntry.metric) {\n    const griCode = GRI_METRIC_MAPPINGS[dataEntry.metric];\n    if (griCode) {\n      mappedEntry.framework = griCode;\n      mappedEntry.frameworkStandard = griCode;\n    }\n  }\n  \n  if (targetFramework === 'SASB' && dataEntry.metric) {\n    const sasbCode = SASB_METRIC_MAPPINGS[dataEntry.metric];\n    if (sasbCode) {\n      mappedEntry.framework = sasbCode;\n      mappedEntry.frameworkStandard = sasbCode;\n    }\n  }\n  \n  return mappedEntry;\n};\n\nexport const generateFrameworkReport = (data, framework = 'GRI', industry = null) => {\n  const compliance = validateFrameworkCompliance(data, framework);\n  const mappedData = data.map(entry => mapDataToFramework(entry, framework));\n  \n  const report = {\n    framework,\n    industry,\n    generatedAt: new Date().toISOString(),\n    compliance,\n    data: mappedData,\n    summary: {\n      totalDataPoints: data.length,\n      frameworkMappedPoints: mappedData.filter(item => item.framework).length,\n      complianceLevel: compliance.complianceScore >= 80 ? 'High' : \n                      compliance.complianceScore >= 60 ? 'Medium' : 'Low',\n      recommendations: generateRecommendations(compliance, framework)\n    }\n  };\n  \n  return report;\n};\n\nconst generateRecommendations = (compliance, framework) => {\n  const recommendations = [];\n  \n  if (compliance.complianceScore < 60) {\n    recommendations.push({\n      priority: 'High',\n      category: 'Foundation',\n      action: `Implement core ${framework} requirements to establish baseline compliance`,\n      impact: 'Critical for regulatory compliance and stakeholder trust'\n    });\n  }\n  \n  Object.entries(compliance.categoryScores).forEach(([category, score]) => {\n    if (score.percentage < 70) {\n      recommendations.push({\n        priority: score.percentage < 50 ? 'High' : 'Medium',\n        category: category.charAt(0).toUpperCase() + category.slice(1),\n        action: `Address ${score.missing.length} missing ${framework} requirements in ${category}`,\n        impact: `Improve ${category} reporting completeness`\n      });\n    }\n  });\n  \n  if (compliance.complianceScore >= 80) {\n    recommendations.push({\n      priority: 'Low',\n      category: 'Enhancement',\n      action: 'Consider implementing additional frameworks or advanced reporting features',\n      impact: 'Demonstrate leadership in ESG reporting'\n    });\n  }\n  \n  return recommendations;\n};\n\nexport const getFrameworkGuidance = (framework, category = null) => {\n  const guidance = {\n    GRI: {\n      general: \"GRI Standards provide a comprehensive framework for sustainability reporting. Focus on materiality assessment and stakeholder engagement.\",\n      environmental: \"Report on energy, emissions, water, waste, and biodiversity impacts. Include both direct and indirect impacts.\",\n      social: \"Cover employment, health & safety, training, diversity, human rights, and community impacts.\",\n      governance: \"Address governance structure, ethics, anti-corruption, and stakeholder engagement processes.\"\n    },\n    SASB: {\n      general: \"SASB focuses on financially material sustainability topics specific to your industry. Identify your industry classification first.\",\n      environmental: \"Report on industry-specific environmental metrics that affect financial performance.\",\n      social: \"Focus on social factors that create financial risks or opportunities in your sector.\",\n      governance: \"Address governance practices that impact long-term value creation.\"\n    }\n  };\n  \n  return category ? guidance[framework]?.[category] : guidance[framework]?.general;\n};\n\nexport default {\n  GRI_METRIC_MAPPINGS,\n  SASB_METRIC_MAPPINGS,\n  validateFrameworkCompliance,\n  mapDataToFramework,\n  generateFrameworkReport,\n  getFrameworkGuidance\n};","import React, { useState, useEffect } from 'react';\nimport { useTheme } from '../contexts/ThemeContext';\nimport { getThemeClasses } from '../utils/themeUtils';\nimport { ESG_FRAMEWORKS, STANDARD_METRICS, MATERIALITY_TOPICS } from '../utils/esgFrameworks';\nimport { getStoredData } from '../utils/storage';\n\nconst FrameworkCompliance = () => {\n  const { isDark } = useTheme();\n  const theme = getThemeClasses(isDark);\n  const [selectedFramework, setSelectedFramework] = useState('GRI');\n  const [complianceData, setComplianceData] = useState({});\n  const [esgData, setEsgData] = useState([]);\n  const [complianceScore, setComplianceScore] = useState(0);\n\n  useEffect(() => {\n    loadESGData();\n  }, []);\n\n  useEffect(() => {\n    calculateCompliance();\n  }, [esgData, selectedFramework]);\n\n  const loadESGData = async () => {\n    try {\n      const data = await getStoredData();\n      setEsgData(data || []);\n    } catch (error) {\n      console.error('Error loading ESG data:', error);\n    }\n  };\n\n  const calculateCompliance = () => {\n    if (!esgData.length) return;\n\n    const framework = ESG_FRAMEWORKS[selectedFramework];\n    if (!framework) return;\n\n    let totalRequirements = 0;\n    let metRequirements = 0;\n    const categoryCompliance = {};\n\n    // Calculate GRI compliance\n    if (selectedFramework === 'GRI') {\n      Object.entries(framework.categories).forEach(([category, standards]) => {\n        const categoryData = esgData.filter(item => \n          item.category?.toLowerCase() === category.toLowerCase()\n        );\n        \n        const standardsCount = Object.keys(standards).length;\n        const metStandards = Object.keys(standards).filter(standard => {\n          return categoryData.some(item => \n            item.framework === standard || \n            item.metric?.includes(standard.split('-')[1])\n          );\n        }).length;\n\n        categoryCompliance[category] = {\n          total: standardsCount,\n          met: metStandards,\n          percentage: Math.round((metStandards / standardsCount) * 100)\n        };\n\n        totalRequirements += standardsCount;\n        metRequirements += metStandards;\n      });\n    }\n\n    // Calculate SASB compliance\n    if (selectedFramework === 'SASB') {\n      Object.entries(framework.categories).forEach(([category, topics]) => {\n        const categoryData = esgData.filter(item => \n          item.category?.toLowerCase() === category.toLowerCase()\n        );\n        \n        const topicsCount = topics.length;\n        const metTopics = topics.filter(topic => {\n          return categoryData.some(item => \n            item.metric?.toLowerCase().includes(topic.toLowerCase().split(' ')[0]) ||\n            item.description?.toLowerCase().includes(topic.toLowerCase())\n          );\n        }).length;\n\n        categoryCompliance[category] = {\n          total: topicsCount,\n          met: metTopics,\n          percentage: Math.round((metTopics / topicsCount) * 100)\n        };\n\n        totalRequirements += topicsCount;\n        metRequirements += metTopics;\n      });\n    }\n\n    setComplianceData(categoryCompliance);\n    setComplianceScore(totalRequirements > 0 ? Math.round((metRequirements / totalRequirements) * 100) : 0);\n  };\n\n  const getComplianceColor = (percentage) => {\n    if (percentage >= 80) return 'text-green-600';\n    if (percentage >= 60) return 'text-yellow-600';\n    return 'text-red-600';\n  };\n\n  const getComplianceStatus = (percentage) => {\n    if (percentage >= 80) return 'Compliant';\n    if (percentage >= 60) return 'Partially Compliant';\n    return 'Non-Compliant';\n  };\n\n  const renderGRICompliance = () => {\n    const framework = ESG_FRAMEWORKS.GRI;\n    \n    return (\n      <div className=\"space-y-6\">\n        <div className={`p-4 rounded-lg ${theme.cardBg} border ${theme.border}`}>\n          <h3 className={`text-lg font-semibold ${theme.text} mb-4`}>GRI Standards Compliance</h3>\n          \n          {Object.entries(framework.categories).map(([category, standards]) => {\n            const compliance = complianceData[category] || { total: 0, met: 0, percentage: 0 };\n            \n            return (\n              <div key={category} className=\"mb-6\">\n                <div className=\"flex justify-between items-center mb-2\">\n                  <h4 className={`font-medium ${theme.text} capitalize`}>{category}</h4>\n                  <span className={`text-sm font-medium ${getComplianceColor(compliance.percentage)}`}>\n                    {compliance.percentage}% ({compliance.met}/{compliance.total})\n                  </span>\n                </div>\n                \n                <div className={`w-full bg-gray-200 rounded-full h-2 mb-3`}>\n                  <div \n                    className={`h-2 rounded-full ${compliance.percentage >= 80 ? 'bg-green-500' : compliance.percentage >= 60 ? 'bg-yellow-500' : 'bg-red-500'}`}\n                    style={{ width: `${compliance.percentage}%` }}\n                  ></div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                  {Object.entries(standards).map(([code, description]) => {\n                    const isImplemented = esgData.some(item => \n                      item.framework === code || \n                      item.metric?.includes(code.split('-')[1])\n                    );\n                    \n                    return (\n                      <div key={code} className={`p-2 rounded text-sm ${isImplemented ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'}`}>\n                        <span className=\"font-medium\">{code}:</span> {description}\n                        {isImplemented && <span className=\"ml-2\"></span>}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const renderSASBCompliance = () => {\n    const framework = ESG_FRAMEWORKS.SASB;\n    \n    return (\n      <div className=\"space-y-6\">\n        <div className={`p-4 rounded-lg ${theme.cardBg} border ${theme.border}`}>\n          <h3 className={`text-lg font-semibold ${theme.text} mb-4`}>SASB Standards Compliance</h3>\n          \n          {Object.entries(framework.categories).map(([category, topics]) => {\n            const compliance = complianceData[category] || { total: 0, met: 0, percentage: 0 };\n            \n            return (\n              <div key={category} className=\"mb-6\">\n                <div className=\"flex justify-between items-center mb-2\">\n                  <h4 className={`font-medium ${theme.text} capitalize`}>{category}</h4>\n                  <span className={`text-sm font-medium ${getComplianceColor(compliance.percentage)}`}>\n                    {compliance.percentage}% ({compliance.met}/{compliance.total})\n                  </span>\n                </div>\n                \n                <div className={`w-full bg-gray-200 rounded-full h-2 mb-3`}>\n                  <div \n                    className={`h-2 rounded-full ${compliance.percentage >= 80 ? 'bg-green-500' : compliance.percentage >= 60 ? 'bg-yellow-500' : 'bg-red-500'}`}\n                    style={{ width: `${compliance.percentage}%` }}\n                  ></div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                  {topics.map((topic, index) => {\n                    const isImplemented = esgData.some(item => \n                      item.metric?.toLowerCase().includes(topic.toLowerCase().split(' ')[0]) ||\n                      item.description?.toLowerCase().includes(topic.toLowerCase())\n                    );\n                    \n                    return (\n                      <div key={index} className={`p-2 rounded text-sm ${isImplemented ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'}`}>\n                        {topic}\n                        {isImplemented && <span className=\"ml-2\"></span>}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const renderMaterialityAssessment = () => {\n    const implementedTopics = MATERIALITY_TOPICS.filter(topic => \n      esgData.some(item => \n        item.metric?.toLowerCase().includes(topic.id.split('_')[0]) ||\n        item.description?.toLowerCase().includes(topic.name.toLowerCase())\n      )\n    );\n\n    return (\n      <div className={`p-4 rounded-lg ${theme.cardBg} border ${theme.border}`}>\n        <h3 className={`text-lg font-semibold ${theme.text} mb-4`}>Materiality Assessment</h3>\n        <p className={`text-sm ${theme.textSecondary} mb-4`}>\n          Coverage: {implementedTopics.length}/{MATERIALITY_TOPICS.length} material topics\n        </p>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n          {MATERIALITY_TOPICS.map(topic => {\n            const isImplemented = implementedTopics.some(impl => impl.id === topic.id);\n            \n            return (\n              <div key={topic.id} className={`p-3 rounded border ${isImplemented ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200'}`}>\n                <div className=\"flex items-center justify-between\">\n                  <span className={`text-sm font-medium ${isImplemented ? 'text-green-800' : 'text-gray-600'}`}>\n                    {topic.name}\n                  </span>\n                  {isImplemented && <span className=\"text-green-600\"></span>}\n                </div>\n                <span className={`text-xs ${theme.textSecondary} capitalize`}>{topic.category}</span>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={`min-h-screen ${theme.background} p-6`}>\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"mb-6\">\n          <h1 className={`text-3xl font-bold ${theme.text} mb-2`}>Framework Compliance</h1>\n          <p className={`${theme.textSecondary}`}>\n            Monitor compliance with GRI, SASB, and other ESG reporting frameworks\n          </p>\n        </div>\n\n        {/* Framework Selection */}\n        <div className=\"mb-6\">\n          <div className=\"flex space-x-4\">\n            {Object.keys(ESG_FRAMEWORKS).map(framework => (\n              <button\n                key={framework}\n                onClick={() => setSelectedFramework(framework)}\n                className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                  selectedFramework === framework\n                    ? 'bg-blue-600 text-white'\n                    : `${theme.cardBg} ${theme.text} border ${theme.border} hover:bg-blue-50`\n                }`}\n              >\n                {framework}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Overall Compliance Score */}\n        <div className={`p-6 rounded-lg ${theme.cardBg} border ${theme.border} mb-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className={`text-xl font-semibold ${theme.text}`}>\n                {ESG_FRAMEWORKS[selectedFramework]?.name} Compliance\n              </h2>\n              <p className={`${theme.textSecondary} mt-1`}>\n                {ESG_FRAMEWORKS[selectedFramework]?.description}\n              </p>\n            </div>\n            <div className=\"text-center\">\n              <div className={`text-3xl font-bold ${getComplianceColor(complianceScore)}`}>\n                {complianceScore}%\n              </div>\n              <div className={`text-sm ${theme.textSecondary}`}>\n                {getComplianceStatus(complianceScore)}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Framework-specific compliance */}\n        {selectedFramework === 'GRI' && renderGRICompliance()}\n        {selectedFramework === 'SASB' && renderSASBCompliance()}\n        \n        {/* Materiality Assessment */}\n        <div className=\"mt-6\">\n          {renderMaterialityAssessment()}\n        </div>\n\n        {/* Recommendations */}\n        <div className={`p-4 rounded-lg ${theme.cardBg} border ${theme.border} mt-6`}>\n          <h3 className={`text-lg font-semibold ${theme.text} mb-4`}>Recommendations</h3>\n          <div className=\"space-y-2\">\n            {complianceScore < 60 && (\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded text-red-800 text-sm\">\n                <strong>Priority:</strong> Focus on implementing core {selectedFramework} requirements to achieve basic compliance\n              </div>\n            )}\n            {complianceScore >= 60 && complianceScore < 80 && (\n              <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-sm\">\n                <strong>Improvement:</strong> Address remaining gaps to achieve full {selectedFramework} compliance\n              </div>\n            )}\n            {complianceScore >= 80 && (\n              <div className=\"p-3 bg-green-50 border border-green-200 rounded text-green-800 text-sm\">\n                <strong>Excellence:</strong> Consider implementing additional frameworks or advanced reporting features\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FrameworkCompliance;","import React from 'react';\nimport { useTheme } from '../contexts/ThemeContext';\nimport { getThemeClasses } from '../utils/themeUtils';\n\nconst FrameworkComplianceSummary = ({ complianceData }) => {\n  const { isDark } = useTheme();\n  const theme = getThemeClasses(isDark);\n\n  const getComplianceColor = (score) => {\n    if (score >= 80) return 'text-green-600 bg-green-100';\n    if (score >= 60) return 'text-yellow-600 bg-yellow-100';\n    return 'text-red-600 bg-red-100';\n  };\n\n  const getComplianceIcon = (score) => {\n    if (score >= 80) return '';\n    if (score >= 60) return '';\n    return '';\n  };\n\n  if (!complianceData || Object.keys(complianceData).length === 0) {\n    return (\n      <div className={`p-4 rounded-lg ${theme.cardBg} border ${theme.border}`}>\n        <h3 className={`text-lg font-semibold ${theme.text} mb-2`}>Framework Compliance Status</h3>\n        <p className={`${theme.textSecondary}`}>No compliance data available. Add ESG data to analyze framework compliance.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`p-6 rounded-lg ${theme.cardBg} border ${theme.border} mb-6`}>\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className={`text-lg font-semibold ${theme.text}`}>Framework Compliance Status</h3>\n        <span className={`text-xs px-2 py-1 rounded-full ${isDark ? 'bg-blue-900 text-blue-300' : 'bg-blue-100 text-blue-800'}`}>\n          Live Analysis\n        </span>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {Object.entries(complianceData).map(([framework, data]) => (\n          <div key={framework} className={`p-4 rounded-lg border ${theme.border} ${theme.bg.subtle}`}>\n            <div className=\"flex items-center justify-between mb-3\">\n              <h4 className={`font-semibold ${theme.text}`}>{framework}</h4>\n              <span className=\"text-xl\">{getComplianceIcon(data.complianceScore)}</span>\n            </div>\n            \n            <div className=\"mb-3\">\n              <div className=\"flex justify-between items-center mb-1\">\n                <span className={`text-sm ${theme.textSecondary}`}>Overall Score</span>\n                <span className={`text-lg font-bold ${getComplianceColor(data.complianceScore).split(' ')[0]}`}>\n                  {data.complianceScore}%\n                </span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className={`h-2 rounded-full ${\n                    data.complianceScore >= 80 ? 'bg-green-500' : \n                    data.complianceScore >= 60 ? 'bg-yellow-500' : 'bg-red-500'\n                  }`}\n                  style={{ width: `${data.complianceScore}%` }}\n                ></div>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className={theme.textSecondary}>Requirements Met</span>\n                <span className={theme.text}>{data.metRequirements}/{data.totalRequirements}</span>\n              </div>\n              \n              {Object.entries(data.categoryScores || {}).map(([category, score]) => (\n                <div key={category} className=\"flex justify-between text-sm\">\n                  <span className={`${theme.textSecondary} capitalize`}>{category}</span>\n                  <span className={`${getComplianceColor(score.percentage).split(' ')[0]} font-medium`}>\n                    {score.percentage}%\n                  </span>\n                </div>\n              ))}\n            </div>\n\n            {data.missingRequirements && data.missingRequirements.length > 0 && (\n              <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                <span className={`text-xs ${theme.textSecondary}`}>\n                  {data.missingRequirements.length} requirements missing\n                </span>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded text-sm\">\n        <div className=\"flex items-start gap-2\">\n          <span className=\"text-blue-600\"></span>\n          <div>\n            <strong className=\"text-blue-800\">Framework Compliance Tips:</strong>\n            <ul className=\"text-blue-700 mt-1 space-y-1\">\n              <li> GRI Standards focus on materiality and stakeholder engagement</li>\n              <li> SASB emphasizes industry-specific financially material topics</li>\n              <li> Regular data updates improve compliance scores</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FrameworkComplianceSummary;","// SEBI BRSR (Business Responsibility and Sustainability Reporting) Generator\nimport jsPDF from 'jspdf';\n\nexport class BRSRReportGenerator {\n  static generateReport(data, options = {}) {\n    const pdf = new jsPDF();\n    const { companyName = 'Company', reportingYear = new Date().getFullYear() } = options;\n\n    // BRSR Header\n    pdf.setFontSize(20);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('BUSINESS RESPONSIBILITY AND SUSTAINABILITY REPORT', 20, 25);\n    \n    pdf.setFontSize(14);\n    pdf.setTextColor(0, 0, 0);\n    pdf.text(`Company: ${companyName}`, 20, 40);\n    pdf.text(`Financial Year: ${reportingYear}`, 20, 50);\n    pdf.text(`Report Date: ${new Date().toLocaleDateString()}`, 20, 60);\n\n    let yPos = 80;\n\n    // Section A: General Disclosures\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('SECTION A: GENERAL DISCLOSURES', 20, yPos);\n    yPos += 20;\n\n    const sectionA = this.extractSectionA(data);\n    Object.entries(sectionA).forEach(([key, value]) => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(10);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(`${key}: ${value}`, 20, yPos);\n      yPos += 8;\n    });\n\n    // Section B: Management and Process Disclosures\n    yPos += 10;\n    if (yPos > 250) { pdf.addPage(); yPos = 30; }\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('SECTION B: MANAGEMENT AND PROCESS DISCLOSURES', 20, yPos);\n    yPos += 20;\n\n    const principleData = this.extractPrincipleData(data);\n    principleData.forEach((principle, index) => {\n      if (yPos > 260) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(12);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(`Principle ${index + 1}: ${principle.title}`, 20, yPos);\n      yPos += 10;\n      pdf.setFontSize(10);\n      pdf.text(`Performance: ${principle.performance}`, 25, yPos);\n      yPos += 15;\n    });\n\n    // Section C: Principle-wise Performance Disclosure\n    pdf.addPage();\n    yPos = 30;\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('SECTION C: PRINCIPLE-WISE PERFORMANCE DISCLOSURE', 20, yPos);\n    yPos += 20;\n\n    const performanceMetrics = this.extractPerformanceMetrics(data);\n    performanceMetrics.forEach(metric => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(10);\n      pdf.text(`${metric.indicator}: ${metric.value} ${metric.unit}`, 20, yPos);\n      yPos += 8;\n    });\n\n    return pdf;\n  }\n\n  static extractSectionA(data) {\n    return {\n      'Corporate Identity Number (CIN)': 'L72900DL2010PLC198141',\n      'Name of the Company': data.companyName || 'Company Name',\n      'Year of Incorporation': '2010',\n      'Registered Office Address': 'New Delhi, India',\n      'Corporate Website': 'www.company.com',\n      'E-mail ID': 'sustainability@company.com',\n      'Telephone': '+91-11-XXXXXXXX',\n      'Reporting Boundary': 'Standalone',\n      'Name of Assurance Provider': 'External Auditor',\n      'Type of Assurance': 'Limited Assurance'\n    };\n  }\n\n  static extractPrincipleData(data) {\n    return [\n      { title: 'Businesses should conduct and govern themselves with integrity', performance: 'Compliant' },\n      { title: 'Businesses should provide goods and services in a manner that is sustainable', performance: 'Compliant' },\n      { title: 'Businesses should respect and promote the well-being of all employees', performance: 'Compliant' },\n      { title: 'Businesses should respect the interests of and be responsive to all its stakeholders', performance: 'Compliant' },\n      { title: 'Businesses should respect and promote human rights', performance: 'Compliant' },\n      { title: 'Businesses should respect and make efforts to protect and restore the environment', performance: 'Compliant' },\n      { title: 'Businesses should support inclusive growth and equitable development', performance: 'Compliant' },\n      { title: 'Businesses should promote innovation and technology for sustainable development', performance: 'Compliant' },\n      { title: 'Businesses should engage with and provide value to their consumers responsibly', performance: 'Compliant' }\n    ];\n  }\n\n  static extractPerformanceMetrics(data) {\n    const metrics = [];\n    \n    // Environmental metrics\n    if (data.environmental) {\n      Object.entries(data.environmental).forEach(([key, value]) => {\n        if (value && !isNaN(parseFloat(value))) {\n          metrics.push({\n            indicator: this.getBRSRIndicator(key),\n            value: parseFloat(value).toFixed(2),\n            unit: this.getBRSRUnit(key)\n          });\n        }\n      });\n    }\n\n    // Social metrics\n    if (data.social) {\n      Object.entries(data.social).forEach(([key, value]) => {\n        if (value && !isNaN(parseFloat(value))) {\n          metrics.push({\n            indicator: this.getBRSRIndicator(key),\n            value: parseFloat(value).toFixed(2),\n            unit: this.getBRSRUnit(key)\n          });\n        }\n      });\n    }\n\n    // Governance metrics\n    if (data.governance) {\n      Object.entries(data.governance).forEach(([key, value]) => {\n        if (value && !isNaN(parseFloat(value))) {\n          metrics.push({\n            indicator: this.getBRSRIndicator(key),\n            value: parseFloat(value).toFixed(2),\n            unit: this.getBRSRUnit(key)\n          });\n        }\n      });\n    }\n\n    return metrics;\n  }\n\n  static getBRSRIndicator(key) {\n    const indicators = {\n      scope1_emissions: 'Total Scope 1 emissions',\n      scope2_emissions: 'Total Scope 2 emissions',\n      scope3_emissions: 'Total Scope 3 emissions',\n      energy_consumption: 'Total energy consumption',\n      renewable_energy: 'Renewable energy consumption',\n      water_withdrawal: 'Water withdrawal',\n      waste_generated: 'Waste generated',\n      total_employees: 'Total number of employees',\n      female_employees: 'Female employees',\n      training_hours: 'Training hours per employee',\n      board_size: 'Board size',\n      independent_directors: 'Independent directors'\n    };\n    return indicators[key] || key.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n\n  static getBRSRUnit(key) {\n    const units = {\n      scope1_emissions: 'tCO2e',\n      scope2_emissions: 'tCO2e',\n      scope3_emissions: 'tCO2e',\n      energy_consumption: 'MWh',\n      renewable_energy: '%',\n      water_withdrawal: 'm',\n      waste_generated: 'tonnes',\n      total_employees: 'count',\n      female_employees: '%',\n      training_hours: 'hours',\n      board_size: 'count',\n      independent_directors: '%'\n    };\n    return units[key] || '';\n  }\n}\n\nexport default BRSRReportGenerator;","// GRI (Global Reporting Initiative) Standards Report Generator\nimport jsPDF from 'jspdf';\n\nexport class GRIReportGenerator {\n  static generateReport(data, options = {}) {\n    const pdf = new jsPDF();\n    const { companyName = 'Company', reportingYear = new Date().getFullYear() } = options;\n\n    // GRI Header\n    pdf.setFontSize(20);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('GRI STANDARDS SUSTAINABILITY REPORT', 20, 25);\n    \n    pdf.setFontSize(14);\n    pdf.setTextColor(0, 0, 0);\n    pdf.text(`Organization: ${companyName}`, 20, 40);\n    pdf.text(`Reporting Period: ${reportingYear}`, 20, 50);\n    pdf.text(`GRI Standards Version: GRI Standards 2021`, 20, 60);\n    pdf.text(`Report Date: ${new Date().toLocaleDateString()}`, 20, 70);\n\n    let yPos = 90;\n\n    // GRI 2: General Disclosures\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('GRI 2: GENERAL DISCLOSURES', 20, yPos);\n    yPos += 20;\n\n    const generalDisclosures = this.extractGeneralDisclosures(data);\n    generalDisclosures.forEach(disclosure => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(10);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(`${disclosure.code}: ${disclosure.title}`, 20, yPos);\n      yPos += 6;\n      pdf.text(`Response: ${disclosure.response}`, 25, yPos);\n      yPos += 12;\n    });\n\n    // GRI 3: Material Topics\n    if (yPos > 250) { pdf.addPage(); yPos = 30; }\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('GRI 3: MATERIAL TOPICS', 20, yPos);\n    yPos += 20;\n\n    const materialTopics = this.extractMaterialTopics(data);\n    materialTopics.forEach(topic => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(12);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(`Material Topic: ${topic.name}`, 20, yPos);\n      yPos += 10;\n      pdf.setFontSize(10);\n      pdf.text(`GRI Standard: ${topic.standard}`, 25, yPos);\n      yPos += 6;\n      pdf.text(`Management Approach: ${topic.approach}`, 25, yPos);\n      yPos += 15;\n    });\n\n    // Environmental Standards (GRI 300 Series)\n    pdf.addPage();\n    yPos = 30;\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('ENVIRONMENTAL STANDARDS (GRI 300 SERIES)', 20, yPos);\n    yPos += 20;\n\n    const envMetrics = this.extractEnvironmentalMetrics(data);\n    envMetrics.forEach(metric => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(10);\n      pdf.text(`${metric.code}: ${metric.title}`, 20, yPos);\n      yPos += 6;\n      pdf.text(`Value: ${metric.value} ${metric.unit}`, 25, yPos);\n      yPos += 12;\n    });\n\n    // Social Standards (GRI 400 Series)\n    pdf.addPage();\n    yPos = 30;\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('SOCIAL STANDARDS (GRI 400 SERIES)', 20, yPos);\n    yPos += 20;\n\n    const socialMetrics = this.extractSocialMetrics(data);\n    socialMetrics.forEach(metric => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(10);\n      pdf.text(`${metric.code}: ${metric.title}`, 20, yPos);\n      yPos += 6;\n      pdf.text(`Value: ${metric.value} ${metric.unit}`, 25, yPos);\n      yPos += 12;\n    });\n\n    return pdf;\n  }\n\n  static extractGeneralDisclosures(data) {\n    return [\n      { code: 'GRI 2-1', title: 'Organizational details', response: data.companyName || 'Organization Name' },\n      { code: 'GRI 2-2', title: 'Entities included in sustainability reporting', response: 'Consolidated reporting boundary' },\n      { code: 'GRI 2-3', title: 'Reporting period, frequency and contact point', response: 'Annual reporting cycle' },\n      { code: 'GRI 2-4', title: 'Restatements of information', response: 'No restatements in current period' },\n      { code: 'GRI 2-5', title: 'External assurance', response: 'Limited assurance provided' },\n      { code: 'GRI 2-6', title: 'Activities, value chain and other business relationships', response: 'Described in annual report' },\n      { code: 'GRI 2-7', title: 'Employees', response: `${data.social?.total_employees || 'Not disclosed'} total employees` },\n      { code: 'GRI 2-9', title: 'Governance structure and composition', response: `${data.governance?.board_size || 'Not disclosed'} board members` }\n    ];\n  }\n\n  static extractMaterialTopics(data) {\n    return [\n      { name: 'Climate Change', standard: 'GRI 305: Emissions', approach: 'Comprehensive climate strategy with science-based targets' },\n      { name: 'Energy Management', standard: 'GRI 302: Energy', approach: 'Energy efficiency programs and renewable energy adoption' },\n      { name: 'Water Management', standard: 'GRI 303: Water and Effluents', approach: 'Water stewardship and conservation initiatives' },\n      { name: 'Employee Wellbeing', standard: 'GRI 403: Occupational Health and Safety', approach: 'Comprehensive health and safety management system' },\n      { name: 'Diversity and Inclusion', standard: 'GRI 405: Diversity and Equal Opportunity', approach: 'Inclusive workplace policies and programs' }\n    ];\n  }\n\n  static extractEnvironmentalMetrics(data) {\n    const metrics = [];\n    \n    if (data.environmental) {\n      const env = data.environmental;\n      \n      if (env.scope1_emissions) {\n        metrics.push({\n          code: 'GRI 305-1',\n          title: 'Direct (Scope 1) GHG emissions',\n          value: parseFloat(env.scope1_emissions).toFixed(2),\n          unit: 'tCO2e'\n        });\n      }\n      \n      if (env.scope2_emissions) {\n        metrics.push({\n          code: 'GRI 305-2',\n          title: 'Energy indirect (Scope 2) GHG emissions',\n          value: parseFloat(env.scope2_emissions).toFixed(2),\n          unit: 'tCO2e'\n        });\n      }\n      \n      if (env.scope3_emissions) {\n        metrics.push({\n          code: 'GRI 305-3',\n          title: 'Other indirect (Scope 3) GHG emissions',\n          value: parseFloat(env.scope3_emissions).toFixed(2),\n          unit: 'tCO2e'\n        });\n      }\n      \n      if (env.energy_consumption) {\n        metrics.push({\n          code: 'GRI 302-1',\n          title: 'Energy consumption within the organization',\n          value: parseFloat(env.energy_consumption).toFixed(2),\n          unit: 'MWh'\n        });\n      }\n      \n      if (env.water_withdrawal) {\n        metrics.push({\n          code: 'GRI 303-3',\n          title: 'Water withdrawal',\n          value: parseFloat(env.water_withdrawal).toFixed(2),\n          unit: 'm'\n        });\n      }\n      \n      if (env.waste_generated) {\n        metrics.push({\n          code: 'GRI 306-3',\n          title: 'Waste generated',\n          value: parseFloat(env.waste_generated).toFixed(2),\n          unit: 'tonnes'\n        });\n      }\n    }\n    \n    return metrics;\n  }\n\n  static extractSocialMetrics(data) {\n    const metrics = [];\n    \n    if (data.social) {\n      const social = data.social;\n      \n      if (social.total_employees) {\n        metrics.push({\n          code: 'GRI 2-7',\n          title: 'Employees',\n          value: parseInt(social.total_employees),\n          unit: 'count'\n        });\n      }\n      \n      if (social.female_employees) {\n        metrics.push({\n          code: 'GRI 405-1',\n          title: 'Diversity of governance bodies and employees',\n          value: parseFloat(social.female_employees).toFixed(1),\n          unit: '% female'\n        });\n      }\n      \n      if (social.training_hours) {\n        metrics.push({\n          code: 'GRI 404-1',\n          title: 'Average hours of training per year per employee',\n          value: parseFloat(social.training_hours).toFixed(1),\n          unit: 'hours'\n        });\n      }\n      \n      if (social.lost_time_injury_rate) {\n        metrics.push({\n          code: 'GRI 403-9',\n          title: 'Work-related injuries',\n          value: parseFloat(social.lost_time_injury_rate).toFixed(2),\n          unit: 'rate'\n        });\n      }\n    }\n    \n    return metrics;\n  }\n}\n\nexport default GRIReportGenerator;","// SASB (Sustainability Accounting Standards Board) Report Generator\nimport jsPDF from 'jspdf';\n\nexport class SASBReportGenerator {\n  static generateReport(data, options = {}) {\n    const pdf = new jsPDF();\n    const { companyName = 'Company', reportingYear = new Date().getFullYear(), industry = 'technology' } = options;\n\n    // SASB Header\n    pdf.setFontSize(20);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('SASB STANDARDS SUSTAINABILITY REPORT', 20, 25);\n    \n    pdf.setFontSize(14);\n    pdf.setTextColor(0, 0, 0);\n    pdf.text(`Company: ${companyName}`, 20, 40);\n    pdf.text(`Industry: ${industry.toUpperCase()}`, 20, 50);\n    pdf.text(`Reporting Period: ${reportingYear}`, 20, 60);\n    pdf.text(`SASB Standard: ${this.getSASBStandard(industry)}`, 20, 70);\n    pdf.text(`Report Date: ${new Date().toLocaleDateString()}`, 20, 80);\n\n    let yPos = 100;\n\n    // Industry Classification\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('INDUSTRY CLASSIFICATION', 20, yPos);\n    yPos += 20;\n\n    const classification = this.getIndustryClassification(industry);\n    pdf.setFontSize(10);\n    pdf.setTextColor(0, 0, 0);\n    pdf.text(`SICS Industry: ${classification.sics}`, 20, yPos);\n    yPos += 8;\n    pdf.text(`SICS Code: ${classification.code}`, 20, yPos);\n    yPos += 8;\n    pdf.text(`Description: ${classification.description}`, 20, yPos);\n    yPos += 20;\n\n    // Sustainability Disclosure Topics & Accounting Metrics\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('SUSTAINABILITY DISCLOSURE TOPICS & ACCOUNTING METRICS', 20, yPos);\n    yPos += 20;\n\n    const topics = this.getSASBTopics(industry);\n    topics.forEach(topic => {\n      if (yPos > 250) { pdf.addPage(); yPos = 30; }\n      \n      pdf.setFontSize(12);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(`Topic: ${topic.name}`, 20, yPos);\n      yPos += 10;\n      \n      topic.metrics.forEach(metric => {\n        if (yPos > 270) { pdf.addPage(); yPos = 30; }\n        pdf.setFontSize(10);\n        pdf.text(`${metric.code}: ${metric.description}`, 25, yPos);\n        yPos += 6;\n        \n        const value = this.extractMetricValue(data, metric.code, metric.key);\n        pdf.text(`Value: ${value} ${metric.unit}`, 30, yPos);\n        yPos += 10;\n      });\n      yPos += 5;\n    });\n\n    // Activity Metrics\n    if (yPos > 250) { pdf.addPage(); yPos = 30; }\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('ACTIVITY METRICS', 20, yPos);\n    yPos += 20;\n\n    const activityMetrics = this.getActivityMetrics(industry, data);\n    activityMetrics.forEach(metric => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(10);\n      pdf.text(`${metric.code}: ${metric.description}`, 20, yPos);\n      yPos += 6;\n      pdf.text(`Value: ${metric.value} ${metric.unit}`, 25, yPos);\n      yPos += 12;\n    });\n\n    return pdf;\n  }\n\n  static getSASBStandard(industry) {\n    const standards = {\n      technology: 'TC-SI (Technology & Communications - Software & IT Services)',\n      financial: 'FN-CB (Financials - Commercial Banks)',\n      healthcare: 'HC-BP (Healthcare - Biotechnology & Pharmaceuticals)',\n      manufacturing: 'RT-AE (Resource Transformation - Aerospace & Defense)',\n      energy: 'NR-OG (Non-Renewable Resources - Oil & Gas)',\n      retail: 'CG-MR (Consumer Goods - Multiline and Specialty Retailers)'\n    };\n    return standards[industry] || 'TC-SI (Technology & Communications - Software & IT Services)';\n  }\n\n  static getIndustryClassification(industry) {\n    const classifications = {\n      technology: {\n        sics: 'Software & IT Services',\n        code: 'TC-SI',\n        description: 'Companies that develop software and provide information technology services'\n      },\n      financial: {\n        sics: 'Commercial Banks',\n        code: 'FN-CB',\n        description: 'Companies engaged in commercial banking and related financial services'\n      },\n      healthcare: {\n        sics: 'Biotechnology & Pharmaceuticals',\n        code: 'HC-BP',\n        description: 'Companies engaged in biotechnology research and pharmaceutical development'\n      }\n    };\n    return classifications[industry] || classifications.technology;\n  }\n\n  static getSASBTopics(industry) {\n    const topics = {\n      technology: [\n        {\n          name: 'Environmental Footprint of Hardware Infrastructure',\n          metrics: [\n            { code: 'TC-SI-130a.1', key: 'energy_consumption', description: 'Total energy consumed', unit: 'GJ' },\n            { code: 'TC-SI-130a.2', key: 'renewable_energy', description: 'Percentage of renewable energy', unit: '%' },\n            { code: 'TC-SI-130a.3', key: 'water_withdrawal', description: 'Total water withdrawn', unit: 'm' }\n          ]\n        },\n        {\n          name: 'Data Privacy & Freedom of Expression',\n          metrics: [\n            { code: 'TC-SI-220a.1', key: 'privacy_policies', description: 'Description of policies and practices relating to behavioral advertising', unit: 'Qualitative' },\n            { code: 'TC-SI-220a.2', key: 'user_data_requests', description: 'Number of users whose information is used', unit: 'Number' }\n          ]\n        },\n        {\n          name: 'Data Security',\n          metrics: [\n            { code: 'TC-SI-230a.1', key: 'data_breaches', description: 'Number of data breaches', unit: 'Number' },\n            { code: 'TC-SI-230a.2', key: 'customer_data', description: 'Description of approach to identifying and addressing data security risks', unit: 'Qualitative' }\n          ]\n        }\n      ],\n      financial: [\n        {\n          name: 'Data Security',\n          metrics: [\n            { code: 'FN-CB-230a.1', key: 'data_breaches', description: 'Number of data breaches', unit: 'Number' },\n            { code: 'FN-CB-230a.2', key: 'customer_data', description: 'Card-related fraud losses', unit: 'USD' }\n          ]\n        },\n        {\n          name: 'Financial Inclusion & Capacity Building',\n          metrics: [\n            { code: 'FN-CB-240a.1', key: 'unbanked_customers', description: 'Number and amount of loans outstanding to unbanked customers', unit: 'Number, USD' },\n            { code: 'FN-CB-240a.4', key: 'community_development', description: 'Community development lending', unit: 'USD' }\n          ]\n        }\n      ]\n    };\n    return topics[industry] || topics.technology;\n  }\n\n  static getActivityMetrics(industry, data) {\n    const metrics = {\n      technology: [\n        { code: 'TC-SI-000.A', description: 'Number of licenses or subscriptions', value: data.social?.total_employees || 'Not disclosed', unit: 'Number' },\n        { code: 'TC-SI-000.B', description: 'Data processing capacity', value: 'Not disclosed', unit: 'Petabytes' },\n        { code: 'TC-SI-000.C', description: 'Amount of data storage', value: 'Not disclosed', unit: 'Petabytes' }\n      ],\n      financial: [\n        { code: 'FN-CB-000.A', description: 'Number of checking and savings accounts', value: 'Not disclosed', unit: 'Number' },\n        { code: 'FN-CB-000.B', description: 'Value of checking and savings accounts', value: 'Not disclosed', unit: 'USD' },\n        { code: 'FN-CB-000.C', description: 'Number of loans', value: 'Not disclosed', unit: 'Number' }\n      ]\n    };\n    return metrics[industry] || metrics.technology;\n  }\n\n  static extractMetricValue(data, code, key) {\n    // Map SASB codes to data fields\n    const mapping = {\n      'TC-SI-130a.1': data.environmental?.energy_consumption,\n      'TC-SI-130a.2': data.environmental?.renewable_energy,\n      'TC-SI-130a.3': data.environmental?.water_withdrawal,\n      'TC-SI-230a.1': data.governance?.data_breaches || '0',\n      'FN-CB-230a.1': data.governance?.data_breaches || '0',\n      'FN-CB-240a.1': data.social?.community_investment\n    };\n\n    const value = mapping[code];\n    if (value && !isNaN(parseFloat(value))) {\n      return parseFloat(value).toFixed(2);\n    }\n    return 'Not disclosed';\n  }\n}\n\nexport default SASBReportGenerator;","// TCFD (Task Force on Climate-related Financial Disclosures) Report Generator\nimport jsPDF from 'jspdf';\n\nexport class TCFDReportGenerator {\n  static generateReport(data, options = {}) {\n    const pdf = new jsPDF();\n    const { companyName = 'Company', reportingYear = new Date().getFullYear() } = options;\n\n    // TCFD Header\n    pdf.setFontSize(20);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('TCFD CLIMATE-RELATED FINANCIAL DISCLOSURES', 20, 25);\n    \n    pdf.setFontSize(14);\n    pdf.setTextColor(0, 0, 0);\n    pdf.text(`Organization: ${companyName}`, 20, 40);\n    pdf.text(`Reporting Period: ${reportingYear}`, 20, 50);\n    pdf.text(`TCFD Version: 2023 Status Report`, 20, 60);\n    pdf.text(`Report Date: ${new Date().toLocaleDateString()}`, 20, 70);\n\n    let yPos = 90;\n\n    // Executive Summary\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('EXECUTIVE SUMMARY', 20, yPos);\n    yPos += 20;\n\n    pdf.setFontSize(10);\n    pdf.setTextColor(0, 0, 0);\n    const summary = this.generateExecutiveSummary(data);\n    pdf.text(summary, 20, yPos, { maxWidth: 170 });\n    yPos += 40;\n\n    // Pillar 1: Governance\n    if (yPos > 250) { pdf.addPage(); yPos = 30; }\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('GOVERNANCE', 20, yPos);\n    yPos += 20;\n\n    const governance = this.extractGovernance(data);\n    governance.forEach(item => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(12);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(item.title, 20, yPos);\n      yPos += 10;\n      pdf.setFontSize(10);\n      pdf.text(item.description, 25, yPos, { maxWidth: 165 });\n      yPos += 20;\n    });\n\n    // Pillar 2: Strategy\n    if (yPos > 200) { pdf.addPage(); yPos = 30; }\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('STRATEGY', 20, yPos);\n    yPos += 20;\n\n    const strategy = this.extractStrategy(data);\n    strategy.forEach(item => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(12);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(item.title, 20, yPos);\n      yPos += 10;\n      pdf.setFontSize(10);\n      pdf.text(item.description, 25, yPos, { maxWidth: 165 });\n      yPos += 20;\n    });\n\n    // Pillar 3: Risk Management\n    if (yPos > 200) { pdf.addPage(); yPos = 30; }\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('RISK MANAGEMENT', 20, yPos);\n    yPos += 20;\n\n    const riskMgmt = this.extractRiskManagement(data);\n    riskMgmt.forEach(item => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(12);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(item.title, 20, yPos);\n      yPos += 10;\n      pdf.setFontSize(10);\n      pdf.text(item.description, 25, yPos, { maxWidth: 165 });\n      yPos += 20;\n    });\n\n    // Pillar 4: Metrics and Targets\n    pdf.addPage();\n    yPos = 30;\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('METRICS AND TARGETS', 20, yPos);\n    yPos += 20;\n\n    const metrics = this.extractMetricsAndTargets(data);\n    metrics.forEach(metric => {\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(10);\n      pdf.text(`${metric.category}: ${metric.description}`, 20, yPos);\n      yPos += 6;\n      pdf.text(`Current: ${metric.current} | Target: ${metric.target} | Timeline: ${metric.timeline}`, 25, yPos);\n      yPos += 12;\n    });\n\n    // Scenario Analysis\n    pdf.addPage();\n    yPos = 30;\n    pdf.setFontSize(16);\n    pdf.setTextColor(0, 102, 51);\n    pdf.text('SCENARIO ANALYSIS', 20, yPos);\n    yPos += 20;\n\n    const scenarios = this.extractScenarioAnalysis(data);\n    scenarios.forEach(scenario => {\n      if (yPos > 260) { pdf.addPage(); yPos = 30; }\n      pdf.setFontSize(12);\n      pdf.setTextColor(0, 0, 0);\n      pdf.text(`Scenario: ${scenario.name}`, 20, yPos);\n      yPos += 10;\n      pdf.setFontSize(10);\n      pdf.text(`Temperature Rise: ${scenario.temperature}`, 25, yPos);\n      yPos += 6;\n      pdf.text(`Financial Impact: ${scenario.impact}`, 25, yPos);\n      yPos += 6;\n      pdf.text(`Mitigation Strategy: ${scenario.mitigation}`, 25, yPos);\n      yPos += 15;\n    });\n\n    return pdf;\n  }\n\n  static generateExecutiveSummary(data) {\n    const totalEmissions = this.calculateTotalEmissions(data);\n    return `This report presents our climate-related financial disclosures in accordance with the TCFD recommendations. Our organization has identified climate change as a material risk and opportunity. Current total GHG emissions: ${totalEmissions} tCO2e. We have implemented comprehensive climate governance, risk management processes, and science-based targets to address climate-related risks and opportunities.`;\n  }\n\n  static calculateTotalEmissions(data) {\n    if (!data.environmental) return 'Not disclosed';\n    \n    const scope1 = parseFloat(data.environmental.scope1_emissions) || 0;\n    const scope2 = parseFloat(data.environmental.scope2_emissions) || 0;\n    const scope3 = parseFloat(data.environmental.scope3_emissions) || 0;\n    \n    const total = scope1 + scope2 + scope3;\n    return total > 0 ? total.toFixed(2) : 'Not disclosed';\n  }\n\n  static extractGovernance(data) {\n    return [\n      {\n        title: 'Board Oversight',\n        description: `The Board of Directors provides oversight of climate-related risks and opportunities. Board size: ${data.governance?.board_size || 'Not disclosed'} members with ${data.governance?.independent_directors || 'Not disclosed'}% independence. Climate expertise is represented through dedicated sustainability committee.`\n      },\n      {\n        title: 'Management Role',\n        description: 'Senior management has designated responsibility for assessing and managing climate-related risks and opportunities. The Chief Sustainability Officer reports directly to the CEO and provides quarterly updates to the Board on climate performance and strategy implementation.'\n      }\n    ];\n  }\n\n  static extractStrategy(data) {\n    return [\n      {\n        title: 'Climate-related Risks and Opportunities',\n        description: 'We have identified both physical and transition risks including extreme weather events, carbon pricing, and changing customer preferences. Key opportunities include energy efficiency improvements, renewable energy adoption, and development of climate-friendly products and services.'\n      },\n      {\n        title: 'Impact on Business and Financial Planning',\n        description: 'Climate considerations are integrated into our strategic planning process with a 10-year horizon. We assess potential financial impacts across different climate scenarios and incorporate climate risks into capital allocation decisions and business model evolution.'\n      },\n      {\n        title: 'Resilience of Strategy',\n        description: 'Our strategy demonstrates resilience across multiple climate scenarios including 1.5C, 2C, and 4C warming pathways. We have stress-tested our business model and identified adaptation measures to maintain operational and financial resilience.'\n      }\n    ];\n  }\n\n  static extractRiskManagement(data) {\n    return [\n      {\n        title: 'Risk Identification and Assessment',\n        description: 'We use a systematic approach to identify climate-related risks across short (1-3 years), medium (3-10 years), and long-term (10+ years) time horizons. Physical and transition risks are assessed using climate science data, regulatory analysis, and stakeholder engagement.'\n      },\n      {\n        title: 'Risk Management Processes',\n        description: 'Climate risks are managed through our enterprise risk management framework with quarterly risk assessments, mitigation planning, and monitoring. Risk appetite statements include climate-specific thresholds and escalation procedures.'\n      },\n      {\n        title: 'Integration with Overall Risk Management',\n        description: 'Climate-related risks are fully integrated into our overall risk management processes with consistent methodologies, reporting structures, and governance oversight. Climate risks are considered alongside other material risks in strategic decision-making.'\n      }\n    ];\n  }\n\n  static extractMetricsAndTargets(data) {\n    const metrics = [];\n    \n    if (data.environmental) {\n      const env = data.environmental;\n      \n      if (env.scope1_emissions) {\n        metrics.push({\n          category: 'Scope 1 Emissions',\n          description: 'Direct GHG emissions from owned or controlled sources',\n          current: `${parseFloat(env.scope1_emissions).toFixed(2)} tCO2e`,\n          target: 'Net zero by 2050',\n          timeline: '2050'\n        });\n      }\n      \n      if (env.scope2_emissions) {\n        metrics.push({\n          category: 'Scope 2 Emissions',\n          description: 'Indirect GHG emissions from purchased energy',\n          current: `${parseFloat(env.scope2_emissions).toFixed(2)} tCO2e`,\n          target: '50% reduction by 2030',\n          timeline: '2030'\n        });\n      }\n      \n      if (env.renewable_energy) {\n        metrics.push({\n          category: 'Renewable Energy',\n          description: 'Percentage of renewable energy consumption',\n          current: `${parseFloat(env.renewable_energy).toFixed(1)}%`,\n          target: '100% renewable electricity',\n          timeline: '2030'\n        });\n      }\n    }\n    \n    // Add default metrics if no data available\n    if (metrics.length === 0) {\n      metrics.push({\n        category: 'GHG Emissions',\n        description: 'Total greenhouse gas emissions (Scope 1+2+3)',\n        current: 'Baseline being established',\n        target: 'Science-based targets to be set',\n        timeline: '2024'\n      });\n    }\n    \n    return metrics;\n  }\n\n  static extractScenarioAnalysis(data) {\n    return [\n      {\n        name: '1.5C Scenario (Paris Agreement)',\n        temperature: '1.5C above pre-industrial levels',\n        impact: 'Moderate transition risks, limited physical risks',\n        mitigation: 'Accelerated decarbonization, carbon pricing adaptation'\n      },\n      {\n        name: '2C Scenario (NDCs)',\n        temperature: '2C above pre-industrial levels',\n        impact: 'Increased physical risks, moderate transition costs',\n        mitigation: 'Enhanced resilience measures, diversified energy portfolio'\n      },\n      {\n        name: '4C Scenario (Current Policies)',\n        temperature: '4C above pre-industrial levels',\n        impact: 'Severe physical risks, supply chain disruption',\n        mitigation: 'Comprehensive adaptation strategy, operational flexibility'\n      }\n    ];\n  }\n}\n\nexport default TCFDReportGenerator;","import React, { useState } from 'react';\nimport { useTheme } from '../contexts/ThemeContext';\nimport { getThemeClasses } from '../utils/themeUtils';\nimport { BRSRReportGenerator } from '../utils/reportGenerators/BRSRReportGenerator';\nimport { GRIReportGenerator } from '../utils/reportGenerators/GRIReportGenerator';\nimport { SASBReportGenerator } from '../utils/reportGenerators/SASBReportGenerator';\nimport { TCFDReportGenerator } from '../utils/reportGenerators/TCFDReportGenerator';\n\nconst FrameworkReportSelector = ({ data, onClose }) => {\n  const { isDark } = useTheme();\n  const theme = getThemeClasses(isDark);\n  const [selectedFramework, setSelectedFramework] = useState('GRI');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [industry, setIndustry] = useState('technology');\n\n  const frameworks = [\n    {\n      id: 'BRSR',\n      name: 'SEBI BRSR',\n      description: 'Business Responsibility and Sustainability Reporting for Indian listed companies',\n      icon: '',\n      generator: BRSRReportGenerator\n    },\n    {\n      id: 'GRI',\n      name: 'GRI Standards',\n      description: 'Global Reporting Initiative - Most widely used sustainability reporting standards',\n      icon: '',\n      generator: GRIReportGenerator\n    },\n    {\n      id: 'SASB',\n      name: 'SASB Standards',\n      description: 'Sustainability Accounting Standards Board - Industry-specific standards',\n      icon: '',\n      generator: SASBReportGenerator\n    },\n    {\n      id: 'TCFD',\n      name: 'TCFD Framework',\n      description: 'Task Force on Climate-related Financial Disclosures',\n      icon: '',\n      generator: TCFDReportGenerator\n    }\n  ];\n\n  const generateReport = async (frameworkId) => {\n    setIsGenerating(true);\n    \n    try {\n      const framework = frameworks.find(f => f.id === frameworkId);\n      const companyName = data.companyName || data.companyInfo?.companyName || 'Company';\n      const reportingYear = data.reportingYear || data.companyInfo?.reportingYear || new Date().getFullYear();\n      \n      const options = {\n        companyName,\n        reportingYear,\n        industry: frameworkId === 'SASB' ? industry : undefined\n      };\n      \n      const pdf = framework.generator.generateReport(data, options);\n      const filename = `${framework.name.replace(/\\s+/g, '-')}-Report-${new Date().toISOString().split('T')[0]}.pdf`;\n      \n      pdf.save(filename);\n      \n    } catch (error) {\n      console.error('Error generating report:', error);\n      alert('Error generating report. Please try again.');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className={`max-w-4xl w-full mx-4 p-6 rounded-xl shadow-2xl ${theme.bg.card}`}>\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className={`text-2xl font-bold ${theme.text.primary}`}>Framework-Specific Reports</h2>\n            <p className={`text-sm ${theme.text.secondary}`}>Generate compliance reports for different ESG frameworks</p>\n          </div>\n          <button \n            onClick={onClose}\n            className={`text-gray-500 hover:text-gray-700 text-xl font-bold`}\n          >\n            \n          </button>\n        </div>\n\n        {/* Framework Selection */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n          {frameworks.map(framework => (\n            <div\n              key={framework.id}\n              onClick={() => setSelectedFramework(framework.id)}\n              className={`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${\n                selectedFramework === framework.id\n                  ? 'border-blue-500 bg-blue-50'\n                  : `border-gray-200 ${theme.hover.card}`\n              }`}\n            >\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-2xl\">{framework.icon}</span>\n                <div className=\"flex-1\">\n                  <h3 className={`font-semibold ${theme.text.primary}`}>{framework.name}</h3>\n                  <p className={`text-sm ${theme.text.secondary} mt-1`}>{framework.description}</p>\n                  {selectedFramework === framework.id && (\n                    <div className=\"mt-2\">\n                      <span className=\"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded\">Selected</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Industry Selection for SASB */}\n        {selectedFramework === 'SASB' && (\n          <div className={`p-4 rounded-lg ${theme.bg.subtle} mb-6`}>\n            <h4 className={`font-medium ${theme.text.primary} mb-3`}>Industry Classification (Required for SASB)</h4>\n            <select\n              value={industry}\n              onChange={(e) => setIndustry(e.target.value)}\n              className={`w-full p-3 border rounded-lg ${theme.bg.input} ${theme.border.input}`}\n            >\n              <option value=\"technology\">Technology & Communications</option>\n              <option value=\"financial\">Financial Services</option>\n              <option value=\"healthcare\">Healthcare</option>\n              <option value=\"manufacturing\">Manufacturing</option>\n              <option value=\"energy\">Energy</option>\n              <option value=\"retail\">Retail & Consumer</option>\n            </select>\n          </div>\n        )}\n\n        {/* Framework Details */}\n        <div className={`p-4 rounded-lg ${theme.bg.subtle} mb-6`}>\n          <h4 className={`font-medium ${theme.text.primary} mb-3`}>\n            {frameworks.find(f => f.id === selectedFramework)?.name} Report Details\n          </h4>\n          \n          {selectedFramework === 'BRSR' && (\n            <div className=\"space-y-2 text-sm\">\n              <p> Section A: General Disclosures</p>\n              <p> Section B: Management and Process Disclosures (9 Principles)</p>\n              <p> Section C: Principle-wise Performance Disclosure</p>\n              <p> Mandatory for top 1000 listed companies in India</p>\n            </div>\n          )}\n          \n          {selectedFramework === 'GRI' && (\n            <div className=\"space-y-2 text-sm\">\n              <p> GRI 2: General Disclosures (Organizational profile, strategy, governance)</p>\n              <p> GRI 3: Material Topics (Materiality assessment and management approach)</p>\n              <p> GRI 300 Series: Environmental Standards</p>\n              <p> GRI 400 Series: Social Standards</p>\n            </div>\n          )}\n          \n          {selectedFramework === 'SASB' && (\n            <div className=\"space-y-2 text-sm\">\n              <p> Industry-specific sustainability topics</p>\n              <p> Financially material ESG metrics</p>\n              <p> Standardized accounting metrics</p>\n              <p> Activity metrics for context</p>\n            </div>\n          )}\n          \n          {selectedFramework === 'TCFD' && (\n            <div className=\"space-y-2 text-sm\">\n              <p> Governance: Board oversight and management role</p>\n              <p> Strategy: Climate risks, opportunities, and business impact</p>\n              <p> Risk Management: Risk identification and management processes</p>\n              <p> Metrics & Targets: Climate metrics and performance targets</p>\n            </div>\n          )}\n        </div>\n\n        {/* Data Coverage Summary */}\n        <div className={`p-4 rounded-lg border-l-4 border-blue-500 ${theme.bg.subtle} mb-6`}>\n          <h4 className={`font-medium ${theme.text.primary} mb-2`}>Data Coverage Summary</h4>\n          <div className=\"grid grid-cols-3 gap-4 text-sm\">\n            <div>\n              <span className={theme.text.secondary}>Environmental:</span>\n              <span className=\"ml-2 px-2 py-1 rounded text-xs bg-green-100 text-green-800\">\n                {Object.keys(data.environmental || {}).length} metrics\n              </span>\n            </div>\n            <div>\n              <span className={theme.text.secondary}>Social:</span>\n              <span className=\"ml-2 px-2 py-1 rounded text-xs bg-blue-100 text-blue-800\">\n                {Object.keys(data.social || {}).length} metrics\n              </span>\n            </div>\n            <div>\n              <span className={theme.text.secondary}>Governance:</span>\n              <span className=\"ml-2 px-2 py-1 rounded text-xs bg-purple-100 text-purple-800\">\n                {Object.keys(data.governance || {}).length} metrics\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex gap-4 justify-end\">\n          <button\n            onClick={onClose}\n            className={`px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 ${theme.text.primary}`}\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => generateReport(selectedFramework)}\n            disabled={isGenerating}\n            className={`px-6 py-2 rounded-lg font-medium transition-colors ${\n              isGenerating\n                ? 'bg-gray-400 text-gray-200 cursor-not-allowed'\n                : 'bg-blue-600 text-white hover:bg-blue-700'\n            }`}\n          >\n            {isGenerating ? (\n              <span className=\"flex items-center gap-2\">\n                <span className=\"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full\"></span>\n                Generating...\n              </span>\n            ) : (\n              `Generate ${frameworks.find(f => f.id === selectedFramework)?.name} Report`\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FrameworkReportSelector;","import jsPDF from 'jspdf';\r\n\r\nexport const generateProfessionalESGReport = (framework, data, options = {}) => {\r\n  const pdf = new jsPDF();\r\n  const {\r\n    companyName = 'ESGenius Tech Solutions',\r\n    reportPeriod = new Date().getFullYear(),\r\n    logo = null\r\n  } = options;\r\n\r\n  // Colors\r\n  const colors = {\r\n    primary: [0, 102, 51],\r\n    secondary: [34, 139, 34], \r\n    accent: [0, 128, 0],\r\n    text: [51, 51, 51],\r\n    lightGray: [245, 245, 245],\r\n    darkGray: [128, 128, 128]\r\n  };\r\n\r\n  let currentPage = 1;\r\n  \r\n  // Cover Page\r\n  createCoverPage(pdf, framework, companyName, reportPeriod, colors);\r\n  \r\n  // Table of Contents\r\n  pdf.addPage();\r\n  currentPage++;\r\n  createTableOfContents(pdf, colors);\r\n  \r\n  // Executive Summary\r\n  pdf.addPage();\r\n  currentPage++;\r\n  createExecutiveSummary(pdf, data, colors);\r\n  \r\n  // ESG Performance Sections\r\n  pdf.addPage();\r\n  currentPage++;\r\n  createPerformanceSections(pdf, data, colors);\r\n  \r\n  // Data Tables\r\n  pdf.addPage();\r\n  currentPage++;\r\n  createDataTables(pdf, data, colors);\r\n  \r\n  // Compliance & Methodology\r\n  pdf.addPage();\r\n  currentPage++;\r\n  createComplianceSection(pdf, framework, colors);\r\n  \r\n  // Add page numbers\r\n  addPageNumbers(pdf, currentPage);\r\n  \r\n  return pdf;\r\n};\r\n\r\nconst createCoverPage = (pdf, framework, companyName, reportPeriod, colors) => {\r\n  // Header background\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 60, 'F');\r\n  \r\n  // Company name\r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(28);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text(companyName, 20, 35);\r\n  \r\n  // Main title\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(36);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('ESG SUSTAINABILITY', 20, 100);\r\n  pdf.text('REPORT', 20, 125);\r\n  \r\n  // Framework badge\r\n  pdf.setFillColor(...colors.secondary);\r\n  pdf.roundedRect(20, 140, 60, 20, 3, 3, 'F');\r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(14);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text(framework, 25, 153);\r\n  \r\n  // Report period\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(18);\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.text(`Reporting Period: ${reportPeriod}`, 20, 180);\r\n  \r\n  // Date\r\n  pdf.setFontSize(12);\r\n  pdf.setTextColor(...colors.darkGray);\r\n  pdf.text(`Published: ${new Date().toLocaleDateString('en-US', { \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric' \r\n  })}`, 20, 200);\r\n  \r\n  // Footer design\r\n  pdf.setFillColor(...colors.lightGray);\r\n  pdf.rect(0, 250, 210, 47, 'F');\r\n  \r\n  pdf.setTextColor(...colors.darkGray);\r\n  pdf.setFontSize(10);\r\n  pdf.text('Committed to Sustainable Business Practices', 20, 270);\r\n};\r\n\r\nconst createTableOfContents = (pdf, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 30, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(20);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('TABLE OF CONTENTS', 20, 20);\r\n  \r\n  // Contents\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(12);\r\n  pdf.setFont('helvetica', 'normal');\r\n  \r\n  const contents = [\r\n    { title: 'Executive Summary', page: 3 },\r\n    { title: 'Environmental Performance', page: 4 },\r\n    { title: 'Social Performance', page: 5 },\r\n    { title: 'Governance Performance', page: 6 },\r\n    { title: 'Key Performance Indicators', page: 7 },\r\n    { title: 'Compliance & Methodology', page: 8 }\r\n  ];\r\n  \r\n  let yPos = 50;\r\n  contents.forEach(item => {\r\n    pdf.text(item.title, 20, yPos);\r\n    pdf.text(item.page.toString(), 180, yPos);\r\n    \r\n    // Dotted line\r\n    pdf.setLineDashPattern([1, 1], 0);\r\n    pdf.line(20 + pdf.getTextWidth(item.title) + 5, yPos - 2, 175, yPos - 2);\r\n    pdf.setLineDashPattern([], 0);\r\n    \r\n    yPos += 15;\r\n  });\r\n};\r\n\r\nconst createExecutiveSummary = (pdf, data, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 30, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(20);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('EXECUTIVE SUMMARY', 20, 20);\r\n  \r\n  // Summary stats\r\n  const envData = data.filter(item => item.category === 'environmental');\r\n  const socialData = data.filter(item => item.category === 'social');\r\n  const govData = data.filter(item => item.category === 'governance');\r\n  \r\n  // Key metrics boxes\r\n  const metrics = [\r\n    { label: 'Total Metrics', value: data.length, color: colors.primary },\r\n    { label: 'Environmental', value: envData.length, color: colors.secondary },\r\n    { label: 'Social', value: socialData.length, color: colors.accent },\r\n    { label: 'Governance', value: govData.length, color: [70, 130, 180] }\r\n  ];\r\n  \r\n  let xPos = 20;\r\n  metrics.forEach(metric => {\r\n    pdf.setFillColor(...metric.color);\r\n    pdf.roundedRect(xPos, 45, 40, 30, 3, 3, 'F');\r\n    \r\n    pdf.setTextColor(255, 255, 255);\r\n    pdf.setFontSize(18);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(metric.value.toString(), xPos + 20 - pdf.getTextWidth(metric.value.toString())/2, 60);\r\n    \r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(metric.label, xPos + 20 - pdf.getTextWidth(metric.label)/2, 70);\r\n    \r\n    xPos += 45;\r\n  });\r\n  \r\n  // Performance overview\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(14);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Performance Overview', 20, 100);\r\n  \r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const summaryText = [\r\n    `This report presents our comprehensive ESG performance for ${new Date().getFullYear()}.`,\r\n    `We have successfully tracked ${data.length} key performance indicators across all ESG dimensions.`,\r\n    '',\r\n    'Key Achievements:',\r\n    ' Comprehensive data collection across all ESG categories',\r\n    ' Systematic tracking of performance metrics',\r\n    ' Alignment with international reporting standards',\r\n    ' Continuous improvement in sustainability practices'\r\n  ];\r\n  \r\n  let yPos = 115;\r\n  summaryText.forEach(line => {\r\n    if (line.startsWith('')) {\r\n      pdf.text(line, 25, yPos);\r\n    } else {\r\n      pdf.text(line, 20, yPos);\r\n    }\r\n    yPos += 12;\r\n  });\r\n};\r\n\r\nconst createPerformanceSections = (pdf, data, colors) => {\r\n  const categories = [\r\n    { name: 'Environmental', data: data.filter(item => item.category === 'environmental'), color: colors.secondary },\r\n    { name: 'Social', data: data.filter(item => item.category === 'social'), color: colors.accent },\r\n    { name: 'Governance', data: data.filter(item => item.category === 'governance'), color: [70, 130, 180] }\r\n  ];\r\n  \r\n  let yPos = 20;\r\n  \r\n  categories.forEach(category => {\r\n    if (yPos > 200) {\r\n      pdf.addPage();\r\n      yPos = 20;\r\n    }\r\n    \r\n    // Section header\r\n    pdf.setFillColor(...category.color);\r\n    pdf.rect(20, yPos - 5, 170, 20, 'F');\r\n    \r\n    pdf.setTextColor(255, 255, 255);\r\n    pdf.setFontSize(16);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(`${category.name.toUpperCase()} PERFORMANCE`, 25, yPos + 7);\r\n    \r\n    yPos += 25;\r\n    \r\n    // Metrics\r\n    if (category.data.length > 0) {\r\n      pdf.setTextColor(...colors.text);\r\n      pdf.setFontSize(11);\r\n      pdf.setFont('helvetica', 'normal');\r\n      \r\n      category.data.slice(0, 8).forEach(item => {\r\n        if (yPos > 270) {\r\n          pdf.addPage();\r\n          yPos = 20;\r\n        }\r\n        \r\n        // Metric row\r\n        pdf.setFillColor(250, 250, 250);\r\n        pdf.rect(20, yPos - 3, 170, 12, 'F');\r\n        \r\n        pdf.text(item.subcategory || item.metric || 'Unknown Metric', 25, yPos + 3);\r\n        \r\n        const valueText = `${item.value} ${item.unit || ''}`;\r\n        pdf.text(valueText, 180 - pdf.getTextWidth(valueText), yPos + 3);\r\n        \r\n        if (item.target) {\r\n          pdf.setTextColor(...colors.darkGray);\r\n          pdf.setFontSize(9);\r\n          pdf.text(`Target: ${item.target} ${item.unit || ''}`, 25, yPos + 10);\r\n          pdf.setTextColor(...colors.text);\r\n          pdf.setFontSize(11);\r\n        }\r\n        \r\n        yPos += 15;\r\n      });\r\n    } else {\r\n      pdf.setTextColor(...colors.darkGray);\r\n      pdf.setFontSize(10);\r\n      pdf.text('No data available for this category', 25, yPos);\r\n      yPos += 15;\r\n    }\r\n    \r\n    yPos += 10;\r\n  });\r\n};\r\n\r\nconst createDataTables = (pdf, data, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 30, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(20);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('DETAILED PERFORMANCE DATA', 20, 20);\r\n  \r\n  // Prepare table data\r\n  const tableData = data.map(item => [\r\n    item.category?.charAt(0).toUpperCase() + item.category?.slice(1) || 'N/A',\r\n    item.subcategory || item.metric || 'Unknown',\r\n    `${item.value || 0} ${item.unit || ''}`,\r\n    item.target ? `${item.target} ${item.unit || ''}` : 'Not Set',\r\n    item.source || 'Internal'\r\n  ]);\r\n  \r\n  // Create manual table\r\n  let yPos = 50;\r\n  const colWidths = [35, 60, 35, 35, 35];\r\n  const colPositions = [20, 55, 115, 150, 185];\r\n  \r\n  // Table header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(20, yPos - 5, 170, 12, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(10);\r\n  pdf.setFont('helvetica', 'bold');\r\n  const headers = ['Category', 'Metric', 'Value', 'Target', 'Source'];\r\n  headers.forEach((header, i) => {\r\n    pdf.text(header, colPositions[i], yPos + 3);\r\n  });\r\n  \r\n  yPos += 15;\r\n  \r\n  // Table rows\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(8);\r\n  pdf.setFont('helvetica', 'normal');\r\n  \r\n  tableData.slice(0, 25).forEach((row, index) => {\r\n    if (yPos > 270) {\r\n      pdf.addPage();\r\n      yPos = 30;\r\n    }\r\n    \r\n    // Alternate row colors\r\n    if (index % 2 === 0) {\r\n      pdf.setFillColor(248, 248, 248);\r\n      pdf.rect(20, yPos - 3, 170, 10, 'F');\r\n    }\r\n    \r\n    row.forEach((cell, i) => {\r\n      const text = cell.length > 15 ? cell.substring(0, 12) + '...' : cell;\r\n      pdf.text(text, colPositions[i], yPos + 2);\r\n    });\r\n    \r\n    yPos += 10;\r\n  });\r\n};\r\n\r\nconst createComplianceSection = (pdf, framework, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 30, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(20);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('COMPLIANCE & METHODOLOGY', 20, 20);\r\n  \r\n  // Framework compliance\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(14);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Reporting Framework Compliance', 20, 50);\r\n  \r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.text(`This report has been prepared in accordance with ${framework} standards and guidelines.`, 20, 65);\r\n  \r\n  // Standards box\r\n  pdf.setFillColor(...colors.lightGray);\r\n  pdf.roundedRect(20, 75, 170, 40, 3, 3, 'F');\r\n  \r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(12);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Applicable Standards:', 25, 90);\r\n  \r\n  pdf.setFontSize(10);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const standards = [\r\n    ` ${framework} Framework Requirements`,\r\n    ' International ESG Reporting Standards',\r\n    ' Industry Best Practices',\r\n    ' Regulatory Compliance Guidelines'\r\n  ];\r\n  \r\n  let yPos = 100;\r\n  standards.forEach(standard => {\r\n    pdf.text(standard, 30, yPos);\r\n    yPos += 8;\r\n  });\r\n  \r\n  // Data quality\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(14);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Data Quality Assurance', 20, 140);\r\n  \r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const qualityPoints = [\r\n    ' All data points have been verified for accuracy and completeness',\r\n    ' Data sources are documented and traceable',\r\n    ' Regular internal audits ensure data integrity',\r\n    ' Third-party verification applied where applicable',\r\n    ' Continuous monitoring and improvement processes in place'\r\n  ];\r\n  \r\n  yPos = 155;\r\n  qualityPoints.forEach(point => {\r\n    pdf.text(point, 25, yPos);\r\n    yPos += 12;\r\n  });\r\n  \r\n  // Contact info\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(20, 220, 170, 30, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(12);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('For more information about this report:', 25, 235);\r\n  \r\n  pdf.setFontSize(10);\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.text('sustainability@company.com | www.company.com/sustainability', 25, 245);\r\n};\r\n\r\nconst addPageNumbers = (pdf, totalPages) => {\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pdf.setPage(i);\r\n    pdf.setTextColor(128, 128, 128);\r\n    pdf.setFontSize(8);\r\n    pdf.text(`Page ${i} of ${totalPages}`, 180, 290);\r\n  }\r\n};\r\n\r\nexport default generateProfessionalESGReport;","import jsPDF from 'jspdf';\r\n\r\nexport const generateExecutiveProfessionalReport = (framework, data, options = {}) => {\r\n  const pdf = new jsPDF();\r\n  const {\r\n    companyName = 'ESGenius Tech Solutions',\r\n    reportPeriod = new Date().getFullYear(),\r\n    executiveSummary = true,\r\n    includeCharts = true,\r\n    includeCompliance = true\r\n  } = options;\r\n\r\n  // Professional color scheme\r\n  const colors = {\r\n    primary: [0, 51, 102],      // Deep blue\r\n    secondary: [0, 102, 51],     // Forest green  \r\n    accent: [204, 153, 0],       // Gold\r\n    text: [33, 37, 41],          // Dark gray\r\n    lightGray: [248, 249, 250],  // Light background\r\n    mediumGray: [108, 117, 125], // Medium gray\r\n    success: [40, 167, 69],      // Success green\r\n    warning: [255, 193, 7],      // Warning yellow\r\n    danger: [220, 53, 69]        // Danger red\r\n  };\r\n\r\n  let pageCount = 1;\r\n\r\n  // Executive Cover Page\r\n  createExecutiveCoverPage(pdf, framework, companyName, reportPeriod, colors);\r\n  \r\n  // Executive Summary\r\n  if (executiveSummary) {\r\n    pdf.addPage();\r\n    pageCount++;\r\n    createExecutiveSummary(pdf, data, colors, framework);\r\n  }\r\n  \r\n  // Key Performance Dashboard\r\n  pdf.addPage();\r\n  pageCount++;\r\n  createKPIDashboard(pdf, data, colors);\r\n  \r\n  // ESG Performance Analysis\r\n  pdf.addPage();\r\n  pageCount++;\r\n  createPerformanceAnalysis(pdf, data, colors);\r\n  \r\n  // Risk Assessment & Opportunities\r\n  pdf.addPage();\r\n  pageCount++;\r\n  createRiskOpportunityAnalysis(pdf, data, colors);\r\n  \r\n  // Compliance & Governance\r\n  if (includeCompliance) {\r\n    pdf.addPage();\r\n    pageCount++;\r\n    createComplianceGovernance(pdf, framework, colors);\r\n  }\r\n  \r\n  // Strategic Recommendations\r\n  pdf.addPage();\r\n  pageCount++;\r\n  createStrategicRecommendations(pdf, data, colors);\r\n  \r\n  // Add professional footer to all pages\r\n  addProfessionalFooters(pdf, pageCount, companyName);\r\n  \r\n  return pdf;\r\n};\r\n\r\nconst createExecutiveCoverPage = (pdf, framework, companyName, reportPeriod, colors) => {\r\n  // Professional header with gradient effect\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 80, 'F');\r\n  \r\n  // Company logo placeholder\r\n  pdf.setFillColor(255, 255, 255);\r\n  pdf.roundedRect(15, 15, 30, 15, 2, 2, 'F');\r\n  pdf.setTextColor(...colors.primary);\r\n  pdf.setFontSize(8);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('LOGO', 28, 24);\r\n  \r\n  // Company name and title\r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(32);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text(companyName, 15, 55);\r\n  \r\n  // Main report title\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(42);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('ESG PERFORMANCE', 15, 110);\r\n  pdf.text('EXECUTIVE REPORT', 15, 135);\r\n  \r\n  // Framework and period\r\n  pdf.setFillColor(...colors.secondary);\r\n  pdf.roundedRect(15, 150, 80, 25, 3, 3, 'F');\r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(14);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text(`${framework} Framework`, 20, 165);\r\n  \r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(18);\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.text(`Reporting Period: ${reportPeriod}`, 15, 190);\r\n  \r\n  // Professional date and confidentiality\r\n  pdf.setFontSize(12);\r\n  pdf.setTextColor(...colors.mediumGray);\r\n  pdf.text(`Report Date: ${new Date().toLocaleDateString('en-US', { \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric' \r\n  })}`, 15, 210);\r\n  \r\n  // Executive summary box\r\n  pdf.setFillColor(...colors.lightGray);\r\n  pdf.roundedRect(15, 230, 180, 40, 5, 5, 'F');\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(10);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('EXECUTIVE BRIEFING', 20, 240);\r\n  pdf.setFont('helvetica', 'normal');\r\n  pdf.text('This report provides strategic insights into our ESG performance,', 20, 250);\r\n  pdf.text('risk assessment, and recommendations for sustainable growth.', 20, 260);\r\n  \r\n  // Confidentiality notice\r\n  pdf.setTextColor(...colors.mediumGray);\r\n  pdf.setFontSize(8);\r\n  pdf.text('CONFIDENTIAL - For Executive Review Only', 15, 285);\r\n};\r\n\r\nconst createExecutiveSummary = (pdf, data, colors, framework) => {\r\n  // Professional header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 35, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(24);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('EXECUTIVE SUMMARY', 15, 25);\r\n  \r\n  // Key metrics overview\r\n  const envData = data.filter(item => item.category === 'environmental');\r\n  const socialData = data.filter(item => item.category === 'social');\r\n  const govData = data.filter(item => item.category === 'governance');\r\n  \r\n  // Calculate performance scores\r\n  const envScore = calculateCategoryScore(envData);\r\n  const socialScore = calculateCategoryScore(socialData);\r\n  const govScore = calculateCategoryScore(govData);\r\n  const overallScore = Math.round((envScore + socialScore + govScore) / 3);\r\n  \r\n  // Performance scorecard\r\n  pdf.setFillColor(...colors.lightGray);\r\n  pdf.roundedRect(15, 50, 180, 60, 5, 5, 'F');\r\n  \r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('ESG PERFORMANCE SCORECARD', 20, 65);\r\n  \r\n  // Score boxes\r\n  const scoreBoxes = [\r\n    { label: 'Environmental', score: envScore, x: 25 },\r\n    { label: 'Social', score: socialScore, x: 75 },\r\n    { label: 'Governance', score: govScore, x: 125 },\r\n    { label: 'Overall ESG', score: overallScore, x: 175 }\r\n  ];\r\n  \r\n  scoreBoxes.forEach(box => {\r\n    const color = box.score >= 80 ? colors.success : \r\n                  box.score >= 60 ? colors.warning : colors.danger;\r\n    \r\n    pdf.setFillColor(...color);\r\n    pdf.roundedRect(box.x - 15, 75, 30, 25, 3, 3, 'F');\r\n    \r\n    pdf.setTextColor(255, 255, 255);\r\n    pdf.setFontSize(18);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(box.score.toString(), box.x - 5, 90);\r\n    \r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(box.label, box.x - 12, 98);\r\n  });\r\n  \r\n  // Strategic insights\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(14);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('STRATEGIC INSIGHTS', 15, 130);\r\n  \r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const insights = [\r\n    ` Overall ESG performance rated at ${overallScore}/100, indicating ${getPerformanceRating(overallScore)} performance`,\r\n    ` ${data.length} key performance indicators tracked across all ESG dimensions`,\r\n    ` Environmental initiatives show ${envScore >= 70 ? 'strong' : 'developing'} progress toward sustainability goals`,\r\n    ` Social responsibility metrics demonstrate ${socialScore >= 70 ? 'excellent' : 'good'} stakeholder engagement`,\r\n    ` Governance framework maintains ${govScore >= 70 ? 'robust' : 'adequate'} oversight and transparency`\r\n  ];\r\n  \r\n  let yPos = 145;\r\n  insights.forEach(insight => {\r\n    pdf.text(insight, 20, yPos);\r\n    yPos += 12;\r\n  });\r\n  \r\n  // Key achievements box\r\n  pdf.setFillColor(...colors.secondary);\r\n  pdf.roundedRect(15, 200, 180, 50, 5, 5, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(14);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('KEY ACHIEVEMENTS & MILESTONES', 20, 215);\r\n  \r\n  pdf.setFontSize(10);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const achievements = [\r\n    ' Comprehensive ESG data collection and monitoring system implemented',\r\n    ' Alignment with international reporting standards and best practices',\r\n    ' Stakeholder engagement initiatives expanded across all business units'\r\n  ];\r\n  \r\n  yPos = 230;\r\n  achievements.forEach(achievement => {\r\n    pdf.text(achievement, 25, yPos);\r\n    yPos += 10;\r\n  });\r\n};\r\n\r\nconst createKPIDashboard = (pdf, data, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 35, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(24);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('KEY PERFORMANCE INDICATORS', 15, 25);\r\n  \r\n  // Environmental KPIs\r\n  createKPISection(pdf, 'ENVIRONMENTAL METRICS', data.filter(d => d.category === 'environmental'), colors, 50);\r\n  \r\n  // Social KPIs  \r\n  createKPISection(pdf, 'SOCIAL METRICS', data.filter(d => d.category === 'social'), colors, 120);\r\n  \r\n  // Governance KPIs\r\n  createKPISection(pdf, 'GOVERNANCE METRICS', data.filter(d => d.category === 'governance'), colors, 190);\r\n};\r\n\r\nconst createKPISection = (pdf, title, sectionData, colors, yStart) => {\r\n  pdf.setFillColor(...colors.secondary);\r\n  pdf.rect(15, yStart, 180, 20, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(12);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text(title, 20, yStart + 13);\r\n  \r\n  // KPI boxes\r\n  if (sectionData.length > 0) {\r\n    const kpis = sectionData.slice(0, 4);\r\n    let xPos = 20;\r\n    \r\n    kpis.forEach(kpi => {\r\n      pdf.setFillColor(...colors.lightGray);\r\n      pdf.roundedRect(xPos, yStart + 25, 40, 35, 3, 3, 'F');\r\n      \r\n      pdf.setTextColor(...colors.text);\r\n      pdf.setFontSize(16);\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text(kpi.value?.toString() || '0', xPos + 5, yStart + 40);\r\n      \r\n      pdf.setFontSize(8);\r\n      pdf.setFont('helvetica', 'normal');\r\n      const metricName = (kpi.metric || kpi.subcategory || 'Metric').substring(0, 15);\r\n      pdf.text(metricName, xPos + 5, yStart + 50);\r\n      \r\n      xPos += 45;\r\n    });\r\n  } else {\r\n    pdf.setTextColor(...colors.mediumGray);\r\n    pdf.setFontSize(10);\r\n    pdf.text('No data available', 20, yStart + 40);\r\n  }\r\n};\r\n\r\nconst createPerformanceAnalysis = (pdf, data, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 35, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(24);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('PERFORMANCE ANALYSIS', 15, 25);\r\n  \r\n  // Trend analysis\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('PERFORMANCE TRENDS & BENCHMARKING', 15, 55);\r\n  \r\n  // Performance matrix\r\n  pdf.setFillColor(...colors.lightGray);\r\n  pdf.roundedRect(15, 65, 180, 80, 5, 5, 'F');\r\n  \r\n  const categories = ['Environmental', 'Social', 'Governance'];\r\n  const metrics = ['Current Score', 'Industry Avg', 'Best Practice', 'Trend'];\r\n  \r\n  // Table headers\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(10);\r\n  pdf.setFont('helvetica', 'bold');\r\n  \r\n  let yPos = 80;\r\n  pdf.text('Category', 20, yPos);\r\n  pdf.text('Score', 70, yPos);\r\n  pdf.text('Industry', 100, yPos);\r\n  pdf.text('Best Practice', 130, yPos);\r\n  pdf.text('Trend', 170, yPos);\r\n  \r\n  yPos += 15;\r\n  \r\n  // Performance data\r\n  pdf.setFont('helvetica', 'normal');\r\n  categories.forEach(category => {\r\n    const categoryData = data.filter(d => d.category === category.toLowerCase());\r\n    const score = calculateCategoryScore(categoryData);\r\n    \r\n    pdf.text(category, 20, yPos);\r\n    pdf.text(score.toString(), 70, yPos);\r\n    pdf.text('75', 100, yPos); // Mock industry average\r\n    pdf.text('85', 130, yPos); // Mock best practice\r\n    pdf.text(score >= 75 ? '' : '', 170, yPos);\r\n    \r\n    yPos += 12;\r\n  });\r\n  \r\n  // Strategic recommendations\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('STRATEGIC RECOMMENDATIONS', 15, 170);\r\n  \r\n  const recommendations = [\r\n    '1. Enhance environmental monitoring systems for real-time tracking',\r\n    '2. Expand stakeholder engagement programs across all regions',\r\n    '3. Strengthen governance frameworks with additional oversight mechanisms',\r\n    '4. Implement advanced analytics for predictive ESG performance modeling'\r\n  ];\r\n  \r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  yPos = 185;\r\n  \r\n  recommendations.forEach(rec => {\r\n    pdf.text(rec, 20, yPos);\r\n    yPos += 15;\r\n  });\r\n};\r\n\r\nconst createRiskOpportunityAnalysis = (pdf, data, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 35, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(24);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('RISK & OPPORTUNITY ANALYSIS', 15, 25);\r\n  \r\n  // Risk matrix\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('ESG RISK ASSESSMENT', 15, 55);\r\n  \r\n  const risks = [\r\n    { category: 'Climate Risk', level: 'Medium', impact: 'High', mitigation: 'Carbon reduction strategy' },\r\n    { category: 'Social Risk', level: 'Low', impact: 'Medium', mitigation: 'Enhanced engagement' },\r\n    { category: 'Governance Risk', level: 'Low', impact: 'Low', mitigation: 'Regular audits' }\r\n  ];\r\n  \r\n  // Risk table\r\n  pdf.setFillColor(...colors.lightGray);\r\n  pdf.roundedRect(15, 65, 180, 60, 5, 5, 'F');\r\n  \r\n  pdf.setFontSize(10);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Risk Category', 20, 80);\r\n  pdf.text('Level', 80, 80);\r\n  pdf.text('Impact', 120, 80);\r\n  pdf.text('Mitigation', 160, 80);\r\n  \r\n  let yPos = 95;\r\n  pdf.setFont('helvetica', 'normal');\r\n  \r\n  risks.forEach(risk => {\r\n    pdf.text(risk.category, 20, yPos);\r\n    \r\n    // Color-coded risk level\r\n    const levelColor = risk.level === 'High' ? colors.danger : \r\n                      risk.level === 'Medium' ? colors.warning : colors.success;\r\n    pdf.setTextColor(...levelColor);\r\n    pdf.text(risk.level, 80, yPos);\r\n    \r\n    pdf.setTextColor(...colors.text);\r\n    pdf.text(risk.impact, 120, yPos);\r\n    pdf.text(risk.mitigation.substring(0, 15), 160, yPos);\r\n    \r\n    yPos += 12;\r\n  });\r\n  \r\n  // Opportunities section\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('STRATEGIC OPPORTUNITIES', 15, 150);\r\n  \r\n  const opportunities = [\r\n    ' Green technology investments for competitive advantage',\r\n    ' Enhanced brand reputation through sustainability leadership',\r\n    ' Cost savings through operational efficiency improvements',\r\n    ' Access to sustainable finance and ESG-focused investors'\r\n  ];\r\n  \r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  yPos = 165;\r\n  \r\n  opportunities.forEach(opp => {\r\n    pdf.text(opp, 20, yPos);\r\n    yPos += 15;\r\n  });\r\n};\r\n\r\nconst createComplianceGovernance = (pdf, framework, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 35, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(24);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('COMPLIANCE & GOVERNANCE', 15, 25);\r\n  \r\n  // Framework compliance\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('REGULATORY COMPLIANCE STATUS', 15, 55);\r\n  \r\n  const complianceItems = [\r\n    { framework: 'SEBI BRSR', status: 'Compliant', percentage: '95%' },\r\n    { framework: 'GRI Standards', status: 'Compliant', percentage: '90%' },\r\n    { framework: 'TCFD', status: 'In Progress', percentage: '75%' },\r\n    { framework: 'SASB', status: 'Compliant', percentage: '85%' }\r\n  ];\r\n  \r\n  // Compliance table\r\n  pdf.setFillColor(...colors.lightGray);\r\n  pdf.roundedRect(15, 65, 180, 80, 5, 5, 'F');\r\n  \r\n  pdf.setFontSize(12);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('Framework', 20, 80);\r\n  pdf.text('Status', 100, 80);\r\n  pdf.text('Completion', 150, 80);\r\n  \r\n  let yPos = 95;\r\n  pdf.setFont('helvetica', 'normal');\r\n  \r\n  complianceItems.forEach(item => {\r\n    pdf.setTextColor(...colors.text);\r\n    pdf.text(item.framework, 20, yPos);\r\n    \r\n    const statusColor = item.status === 'Compliant' ? colors.success : colors.warning;\r\n    pdf.setTextColor(...statusColor);\r\n    pdf.text(item.status, 100, yPos);\r\n    \r\n    pdf.setTextColor(...colors.text);\r\n    pdf.text(item.percentage, 150, yPos);\r\n    \r\n    yPos += 15;\r\n  });\r\n  \r\n  // Governance structure\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('GOVERNANCE STRUCTURE', 15, 170);\r\n  \r\n  pdf.setFontSize(11);\r\n  pdf.setFont('helvetica', 'normal');\r\n  const governance = [\r\n    ' Board-level ESG oversight committee established',\r\n    ' Regular ESG performance reviews and reporting',\r\n    ' Integration of ESG metrics into executive compensation',\r\n    ' Stakeholder engagement and feedback mechanisms'\r\n  ];\r\n  \r\n  yPos = 185;\r\n  governance.forEach(item => {\r\n    pdf.text(item, 20, yPos);\r\n    yPos += 12;\r\n  });\r\n};\r\n\r\nconst createStrategicRecommendations = (pdf, data, colors) => {\r\n  // Header\r\n  pdf.setFillColor(...colors.primary);\r\n  pdf.rect(0, 0, 210, 35, 'F');\r\n  \r\n  pdf.setTextColor(255, 255, 255);\r\n  pdf.setFontSize(24);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('STRATEGIC RECOMMENDATIONS', 15, 25);\r\n  \r\n  // Priority actions\r\n  pdf.setTextColor(...colors.text);\r\n  pdf.setFontSize(16);\r\n  pdf.setFont('helvetica', 'bold');\r\n  pdf.text('PRIORITY ACTIONS FOR NEXT PERIOD', 15, 55);\r\n  \r\n  const priorities = [\r\n    {\r\n      title: 'Environmental Excellence',\r\n      actions: [\r\n        'Implement carbon neutrality roadmap',\r\n        'Enhance renewable energy adoption',\r\n        'Strengthen waste reduction programs'\r\n      ],\r\n      timeline: 'Q1-Q2 2024'\r\n    },\r\n    {\r\n      title: 'Social Impact Enhancement', \r\n      actions: [\r\n        'Expand diversity and inclusion initiatives',\r\n        'Strengthen community engagement programs',\r\n        'Enhance employee wellbeing measures'\r\n      ],\r\n      timeline: 'Q2-Q3 2024'\r\n    },\r\n    {\r\n      title: 'Governance Optimization',\r\n      actions: [\r\n        'Enhance ESG reporting transparency',\r\n        'Strengthen risk management frameworks',\r\n        'Expand stakeholder communication'\r\n      ],\r\n      timeline: 'Q3-Q4 2024'\r\n    }\r\n  ];\r\n  \r\n  let yPos = 70;\r\n  \r\n  priorities.forEach(priority => {\r\n    // Priority box\r\n    pdf.setFillColor(...colors.secondary);\r\n    pdf.roundedRect(15, yPos, 180, 50, 5, 5, 'F');\r\n    \r\n    pdf.setTextColor(255, 255, 255);\r\n    pdf.setFontSize(14);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text(priority.title, 20, yPos + 15);\r\n    \r\n    pdf.setFontSize(8);\r\n    pdf.text(`Timeline: ${priority.timeline}`, 150, yPos + 15);\r\n    \r\n    pdf.setFontSize(10);\r\n    pdf.setFont('helvetica', 'normal');\r\n    let actionY = yPos + 25;\r\n    \r\n    priority.actions.forEach(action => {\r\n      pdf.text(` ${action}`, 25, actionY);\r\n      actionY += 8;\r\n    });\r\n    \r\n    yPos += 60;\r\n  });\r\n};\r\n\r\nconst addProfessionalFooters = (pdf, totalPages, companyName) => {\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pdf.setPage(i);\r\n    \r\n    // Footer line\r\n    pdf.setDrawColor(200, 200, 200);\r\n    pdf.line(15, 285, 195, 285);\r\n    \r\n    // Footer text\r\n    pdf.setTextColor(128, 128, 128);\r\n    pdf.setFontSize(8);\r\n    pdf.setFont('helvetica', 'normal');\r\n    pdf.text(`${companyName} - ESG Performance Report`, 15, 292);\r\n    pdf.text(`Page ${i} of ${totalPages}`, 170, 292);\r\n    pdf.text('Confidential', 95, 292);\r\n  }\r\n};\r\n\r\n// Helper functions\r\nconst calculateCategoryScore = (categoryData) => {\r\n  if (!categoryData || categoryData.length === 0) return 0;\r\n  \r\n  const total = categoryData.reduce((sum, item) => {\r\n    const value = parseFloat(item.value) || 0;\r\n    return sum + Math.min(value, 100); // Cap at 100\r\n  }, 0);\r\n  \r\n  return Math.round(total / categoryData.length);\r\n};\r\n\r\nconst getPerformanceRating = (score) => {\r\n  if (score >= 85) return 'excellent';\r\n  if (score >= 70) return 'good';\r\n  if (score >= 55) return 'satisfactory';\r\n  return 'needs improvement';\r\n};\r\n\r\nexport default generateExecutiveProfessionalReport;","import React from 'react';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport { getThemeClasses } from '../utils/themeUtils';\r\n\r\nconst ProfessionalReportPreview = ({ framework, data, companyName, reportPeriod }) => {\r\n  const { isDark } = useTheme();\r\n  const theme = getThemeClasses(isDark);\r\n\r\n  // Calculate ESG metrics for preview\r\n  const calculateMetrics = () => {\r\n    const categories = ['environmental', 'social', 'governance'];\r\n    const metrics = {};\r\n    \r\n    categories.forEach(category => {\r\n      const categoryData = data.filter(item => item.category === category);\r\n      metrics[category] = {\r\n        count: categoryData.length,\r\n        avgScore: categoryData.length > 0 \r\n          ? Math.round(categoryData.reduce((sum, item) => sum + (parseFloat(item.value) || 0), 0) / categoryData.length)\r\n          : 0\r\n      };\r\n    });\r\n    \r\n    return metrics;\r\n  };\r\n\r\n  const metrics = calculateMetrics();\r\n  const overallScore = Math.round((metrics.environmental.avgScore + metrics.social.avgScore + metrics.governance.avgScore) / 3);\r\n\r\n  const getPerformanceRating = (score) => {\r\n    if (score >= 85) return { rating: 'Excellent', color: 'text-green-600', bg: 'bg-green-100' };\r\n    if (score >= 70) return { rating: 'Good', color: 'text-blue-600', bg: 'bg-blue-100' };\r\n    if (score >= 55) return { rating: 'Satisfactory', color: 'text-yellow-600', bg: 'bg-yellow-100' };\r\n    return { rating: 'Needs Improvement', color: 'text-red-600', bg: 'bg-red-100' };\r\n  };\r\n\r\n  const getKeyInsights = () => {\r\n    const insights = [];\r\n    \r\n    if (metrics.environmental.avgScore >= 80) {\r\n      insights.push('Strong environmental performance with excellent sustainability practices');\r\n    } else if (metrics.environmental.avgScore >= 60) {\r\n      insights.push('Good environmental progress with opportunities for enhancement');\r\n    } else {\r\n      insights.push('Environmental initiatives require strategic focus and improvement');\r\n    }\r\n    \r\n    if (metrics.social.avgScore >= 80) {\r\n      insights.push('Exceptional social responsibility and stakeholder engagement');\r\n    } else if (metrics.social.avgScore >= 60) {\r\n      insights.push('Solid social performance with room for community impact expansion');\r\n    } else {\r\n      insights.push('Social responsibility programs need strengthening and expansion');\r\n    }\r\n    \r\n    if (metrics.governance.avgScore >= 80) {\r\n      insights.push('Robust governance framework with strong oversight mechanisms');\r\n    } else if (metrics.governance.avgScore >= 60) {\r\n      insights.push('Adequate governance structure with opportunities for enhancement');\r\n    } else {\r\n      insights.push('Governance framework requires significant strengthening');\r\n    }\r\n    \r\n    return insights;\r\n  };\r\n\r\n  const getStrategicRecommendations = () => {\r\n    const recommendations = [];\r\n    \r\n    if (metrics.environmental.avgScore < 75) {\r\n      recommendations.push({\r\n        priority: 'High',\r\n        area: 'Environmental',\r\n        action: 'Implement comprehensive carbon reduction strategy',\r\n        timeline: 'Q1-Q2 2024'\r\n      });\r\n    }\r\n    \r\n    if (metrics.social.avgScore < 75) {\r\n      recommendations.push({\r\n        priority: 'Medium',\r\n        area: 'Social',\r\n        action: 'Expand diversity and inclusion programs',\r\n        timeline: 'Q2-Q3 2024'\r\n      });\r\n    }\r\n    \r\n    if (metrics.governance.avgScore < 75) {\r\n      recommendations.push({\r\n        priority: 'High',\r\n        area: 'Governance',\r\n        action: 'Strengthen board oversight and transparency',\r\n        timeline: 'Q1 2024'\r\n      });\r\n    }\r\n    \r\n    recommendations.push({\r\n      priority: 'Medium',\r\n      area: 'Overall',\r\n      action: 'Enhance ESG data collection and reporting systems',\r\n      timeline: 'Q3-Q4 2024'\r\n    });\r\n    \r\n    return recommendations;\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-h-[70vh] overflow-y-auto space-y-6 print:space-y-4\">\r\n      {/* Executive Cover */}\r\n      <div className={`p-6 rounded-lg ${theme.bg.card} border-l-4 border-blue-600`}>\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div>\r\n            <h1 className={`text-2xl font-bold ${theme.text.primary}`}>\r\n              ESG Performance Report\r\n            </h1>\r\n            <p className={`text-lg ${theme.text.secondary}`}>{companyName}</p>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <div className={`text-sm ${theme.text.muted}`}>Framework</div>\r\n            <div className={`font-semibold ${theme.text.primary}`}>{framework}</div>\r\n            <div className={`text-sm ${theme.text.muted}`}>Period: {reportPeriod}</div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n          <h3 className={`font-semibold mb-2 ${theme.text.primary}`}>Executive Summary</h3>\r\n          <p className={`text-sm ${theme.text.secondary}`}>\r\n            This comprehensive ESG performance report presents our organization's sustainability \r\n            achievements, challenges, and strategic roadmap for {reportPeriod}. The analysis covers \r\n            {data.length} key performance indicators across environmental, social, and governance dimensions.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Performance Scorecard */}\r\n      <div className={`p-6 rounded-lg ${theme.bg.card}`}>\r\n        <h2 className={`text-xl font-bold mb-4 ${theme.text.primary}`}>\r\n          ESG Performance Scorecard\r\n        </h2>\r\n        \r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n          {[\r\n            { label: 'Environmental', score: metrics.environmental.avgScore, icon: '' },\r\n            { label: 'Social', score: metrics.social.avgScore, icon: '' },\r\n            { label: 'Governance', score: metrics.governance.avgScore, icon: '' },\r\n            { label: 'Overall ESG', score: overallScore, icon: '' }\r\n          ].map((item, index) => {\r\n            const performance = getPerformanceRating(item.score);\r\n            return (\r\n              <div key={index} className={`p-4 rounded-lg border ${theme.bg.subtle}`}>\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <span className=\"text-lg\">{item.icon}</span>\r\n                  <span className={`text-sm font-medium ${theme.text.primary}`}>\r\n                    {item.label}\r\n                  </span>\r\n                </div>\r\n                <div className={`text-2xl font-bold ${performance.color}`}>\r\n                  {item.score}\r\n                </div>\r\n                <div className={`text-xs px-2 py-1 rounded-full ${performance.bg} ${performance.color}`}>\r\n                  {performance.rating}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Key Insights */}\r\n      <div className={`p-6 rounded-lg ${theme.bg.card}`}>\r\n        <h2 className={`text-xl font-bold mb-4 ${theme.text.primary}`}>\r\n          Key Performance Insights\r\n        </h2>\r\n        \r\n        <div className=\"space-y-3\">\r\n          {getKeyInsights().map((insight, index) => (\r\n            <div key={index} className={`flex items-start gap-3 p-3 rounded-lg ${theme.bg.subtle}`}>\r\n              <span className=\"text-blue-500 mt-1\"></span>\r\n              <span className={`text-sm ${theme.text.primary}`}>{insight}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Performance Metrics Table */}\r\n      <div className={`p-6 rounded-lg ${theme.bg.card}`}>\r\n        <h2 className={`text-xl font-bold mb-4 ${theme.text.primary}`}>\r\n          Detailed Performance Metrics\r\n        </h2>\r\n        \r\n        <div className=\"overflow-x-auto\">\r\n          <table className={`w-full text-sm ${theme.text.primary}`}>\r\n            <thead className={`${theme.bg.subtle}`}>\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left font-semibold\">Category</th>\r\n                <th className=\"px-4 py-3 text-left font-semibold\">Metrics Count</th>\r\n                <th className=\"px-4 py-3 text-left font-semibold\">Average Score</th>\r\n                <th className=\"px-4 py-3 text-left font-semibold\">Performance</th>\r\n                <th className=\"px-4 py-3 text-left font-semibold\">Target</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200\">\r\n              {Object.entries(metrics).map(([category, data]) => {\r\n                const performance = getPerformanceRating(data.avgScore);\r\n                return (\r\n                  <tr key={category} className={`hover:${theme.bg.subtle}`}>\r\n                    <td className=\"px-4 py-3 font-medium capitalize\">{category}</td>\r\n                    <td className=\"px-4 py-3\">{data.count}</td>\r\n                    <td className=\"px-4 py-3\">\r\n                      <span className={`font-semibold ${performance.color}`}>\r\n                        {data.avgScore}/100\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3\">\r\n                      <span className={`text-xs px-2 py-1 rounded-full ${performance.bg} ${performance.color}`}>\r\n                        {performance.rating}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-gray-600\">85/100</td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Strategic Recommendations */}\r\n      <div className={`p-6 rounded-lg ${theme.bg.card}`}>\r\n        <h2 className={`text-xl font-bold mb-4 ${theme.text.primary}`}>\r\n          Strategic Recommendations\r\n        </h2>\r\n        \r\n        <div className=\"space-y-4\">\r\n          {getStrategicRecommendations().map((rec, index) => (\r\n            <div key={index} className={`p-4 rounded-lg border-l-4 ${\r\n              rec.priority === 'High' ? 'border-red-500 bg-red-50' : 'border-yellow-500 bg-yellow-50'\r\n            }`}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className={`text-xs px-2 py-1 rounded-full font-semibold ${\r\n                    rec.priority === 'High' \r\n                      ? 'bg-red-100 text-red-800' \r\n                      : 'bg-yellow-100 text-yellow-800'\r\n                  }`}>\r\n                    {rec.priority} Priority\r\n                  </span>\r\n                  <span className={`font-medium ${theme.text.primary}`}>{rec.area}</span>\r\n                </div>\r\n                <span className={`text-sm ${theme.text.muted}`}>{rec.timeline}</span>\r\n              </div>\r\n              <p className={`text-sm ${theme.text.secondary}`}>{rec.action}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Compliance Status */}\r\n      <div className={`p-6 rounded-lg ${theme.bg.card}`}>\r\n        <h2 className={`text-xl font-bold mb-4 ${theme.text.primary}`}>\r\n          Regulatory Compliance Status\r\n        </h2>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {[\r\n            { framework: 'SEBI BRSR', compliance: 95, status: 'Compliant' },\r\n            { framework: 'GRI Standards', compliance: 88, status: 'Compliant' },\r\n            { framework: 'TCFD Guidelines', compliance: 75, status: 'In Progress' },\r\n            { framework: 'SASB Standards', compliance: 82, status: 'Compliant' }\r\n          ].map((item, index) => (\r\n            <div key={index} className={`p-4 rounded-lg ${theme.bg.subtle} border`}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <h4 className={`font-medium ${theme.text.primary}`}>{item.framework}</h4>\r\n                <span className={`text-xs px-2 py-1 rounded-full ${\r\n                  item.status === 'Compliant' \r\n                    ? 'bg-green-100 text-green-800' \r\n                    : 'bg-yellow-100 text-yellow-800'\r\n                }`}>\r\n                  {item.status}\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"mb-2\">\r\n                <div className=\"flex justify-between text-sm mb-1\">\r\n                  <span className={theme.text.secondary}>Compliance Level</span>\r\n                  <span className={theme.text.primary}>{item.compliance}%</span>\r\n                </div>\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                  <div \r\n                    className={`h-2 rounded-full ${\r\n                      item.compliance >= 90 ? 'bg-green-500' : \r\n                      item.compliance >= 70 ? 'bg-yellow-500' : 'bg-red-500'\r\n                    }`}\r\n                    style={{ width: `${item.compliance}%` }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Report Footer */}\r\n      <div className={`p-4 rounded-lg ${theme.bg.subtle} border-t`}>\r\n        <div className=\"flex items-center justify-between text-sm\">\r\n          <div className={theme.text.muted}>\r\n            Report generated on {new Date().toLocaleDateString('en-US', {\r\n              year: 'numeric',\r\n              month: 'long',\r\n              day: 'numeric'\r\n            })}\r\n          </div>\r\n          <div className={theme.text.muted}>\r\n            {data.length} data points analyzed  {framework} Framework\r\n          </div>\r\n        </div>\r\n        \r\n        <div className={`mt-2 text-xs ${theme.text.muted}`}>\r\n          This report contains confidential and proprietary information. \r\n          Distribution should be limited to authorized stakeholders only.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfessionalReportPreview;","import React, { useState } from 'react';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport { getThemeClasses } from '../utils/themeUtils';\r\nimport { generateExecutiveProfessionalReport } from '../utils/enhancedProfessionalPDF';\r\nimport { Button, Modal, Input, Alert } from './ProfessionalUX';\r\nimport ProfessionalReportPreview from './ProfessionalReportPreview';\r\n\r\nconst ProfessionalReportTemplate = ({ data, onClose }) => {\r\n  const { isDark } = useTheme();\r\n  const theme = getThemeClasses(isDark);\r\n  \r\n  const [reportConfig, setReportConfig] = useState({\r\n    companyName: 'ESGenius Tech Solutions',\r\n    framework: 'SEBI BRSR',\r\n    reportPeriod: new Date().getFullYear(),\r\n    executiveSummary: true,\r\n    includeCharts: true,\r\n    includeCompliance: true,\r\n    reportType: 'executive'\r\n  });\r\n  \r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [previewMode, setPreviewMode] = useState(false);\r\n\r\n  const reportTemplates = [\r\n    {\r\n      id: 'executive',\r\n      name: 'Executive Summary Report',\r\n      description: 'High-level strategic overview for C-suite and board members',\r\n      features: ['Executive dashboard', 'Strategic insights', 'Risk analysis', 'Key recommendations'],\r\n      icon: ''\r\n    },\r\n    {\r\n      id: 'comprehensive',\r\n      name: 'Comprehensive ESG Report',\r\n      description: 'Detailed analysis for stakeholders and regulatory compliance',\r\n      features: ['Full data analysis', 'Compliance mapping', 'Detailed metrics', 'Benchmarking'],\r\n      icon: ''\r\n    },\r\n    {\r\n      id: 'investor',\r\n      name: 'Investor Relations Report',\r\n      description: 'ESG performance report tailored for investors and analysts',\r\n      features: ['Financial impact', 'Market positioning', 'Growth opportunities', 'Risk mitigation'],\r\n      icon: ''\r\n    },\r\n    {\r\n      id: 'regulatory',\r\n      name: 'Regulatory Compliance Report',\r\n      description: 'Structured report for regulatory submissions and audits',\r\n      features: ['Compliance checklist', 'Audit trail', 'Legal requirements', 'Documentation'],\r\n      icon: ''\r\n    }\r\n  ];\r\n\r\n  const frameworks = [\r\n    { id: 'SEBI BRSR', name: 'SEBI BRSR', description: 'Securities and Exchange Board of India Business Responsibility and Sustainability Reporting' },\r\n    { id: 'GRI Standards', name: 'GRI Standards', description: 'Global Reporting Initiative Sustainability Reporting Standards' },\r\n    { id: 'TCFD', name: 'TCFD', description: 'Task Force on Climate-related Financial Disclosures' },\r\n    { id: 'SASB', name: 'SASB', description: 'Sustainability Accounting Standards Board' },\r\n    { id: 'EU Taxonomy', name: 'EU Taxonomy', description: 'European Union Taxonomy for Sustainable Activities' },\r\n    { id: 'CDP', name: 'CDP', description: 'Carbon Disclosure Project Reporting Framework' }\r\n  ];\r\n\r\n  const handleGenerateReport = async () => {\r\n    setIsGenerating(true);\r\n    \r\n    try {\r\n      // Simulate processing time for professional report generation\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      \r\n      const pdf = generateExecutiveProfessionalReport(\r\n        reportConfig.framework,\r\n        data,\r\n        {\r\n          companyName: reportConfig.companyName,\r\n          reportPeriod: reportConfig.reportPeriod,\r\n          executiveSummary: reportConfig.executiveSummary,\r\n          includeCharts: reportConfig.includeCharts,\r\n          includeCompliance: reportConfig.includeCompliance\r\n        }\r\n      );\r\n      \r\n      const filename = `Professional-ESG-Report-${reportConfig.reportType}-${reportConfig.framework.replace(/\\s+/g, '-')}-${new Date().toISOString().split('T')[0]}.pdf`;\r\n      pdf.save(filename);\r\n      \r\n      // Show success notification\r\n      alert('Professional ESG report generated successfully!');\r\n      \r\n    } catch (error) {\r\n      console.error('Report generation error:', error);\r\n      alert('Error generating report. Please try again.');\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleConfigChange = (field, value) => {\r\n    setReportConfig(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={true}\r\n      onClose={onClose}\r\n      title=\"Professional ESG Report Generator\"\r\n      size=\"xl\"\r\n      actions={previewMode ? [\r\n        {\r\n          label: 'Generate Report',\r\n          onClick: handleGenerateReport,\r\n          variant: 'primary',\r\n          icon: '',\r\n          disabled: isGenerating,\r\n          loading: isGenerating\r\n        },\r\n        {\r\n          label: 'Back to Config',\r\n          onClick: () => setPreviewMode(false),\r\n          variant: 'outline',\r\n          icon: ''\r\n        },\r\n        {\r\n          label: 'Close',\r\n          onClick: onClose,\r\n          variant: 'outline'\r\n        }\r\n      ] : [\r\n        {\r\n          label: isGenerating ? 'Generating...' : 'Generate Report',\r\n          onClick: handleGenerateReport,\r\n          variant: 'primary',\r\n          icon: '',\r\n          disabled: isGenerating,\r\n          loading: isGenerating\r\n        },\r\n        {\r\n          label: 'Preview Report',\r\n          onClick: () => setPreviewMode(true),\r\n          variant: 'outline',\r\n          icon: '',\r\n          disabled: data.length === 0\r\n        },\r\n        {\r\n          label: 'Cancel',\r\n          onClick: onClose,\r\n          variant: 'outline'\r\n        }\r\n      ]}\r\n    >\r\n      {previewMode ? (\r\n        <ProfessionalReportPreview\r\n          framework={reportConfig.framework}\r\n          data={data}\r\n          companyName={reportConfig.companyName}\r\n          reportPeriod={reportConfig.reportPeriod}\r\n        />\r\n      ) : (\r\n      <div className=\"space-y-6\">\r\n        {/* Report Template Selection */}\r\n        <div>\r\n          <h3 className={`text-lg font-semibold mb-4 ${theme.text.primary}`}>\r\n            Select Report Template\r\n          </h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {reportTemplates.map(template => (\r\n              <div\r\n                key={template.id}\r\n                className={`border-2 p-4 rounded-xl cursor-pointer transition-all duration-200 ${\r\n                  reportConfig.reportType === template.id\r\n                    ? `${theme.border.accent} ${theme.bg.accent} shadow-lg`\r\n                    : `${theme.border.primary} hover:${theme.border.accent}`\r\n                }`}\r\n                onClick={() => handleConfigChange('reportType', template.id)}\r\n              >\r\n                <div className=\"flex items-start gap-3\">\r\n                  <span className=\"text-2xl\">{template.icon}</span>\r\n                  <div className=\"flex-1\">\r\n                    <h4 className={`font-semibold ${theme.text.primary}`}>\r\n                      {template.name}\r\n                    </h4>\r\n                    <p className={`text-sm mt-1 ${theme.text.secondary}`}>\r\n                      {template.description}\r\n                    </p>\r\n                    <div className=\"mt-2 flex flex-wrap gap-1\">\r\n                      {template.features.map(feature => (\r\n                        <span\r\n                          key={feature}\r\n                          className={`text-xs px-2 py-1 rounded-full ${\r\n                            isDark ? 'bg-blue-900 text-blue-300' : 'bg-blue-100 text-blue-800'\r\n                          }`}\r\n                        >\r\n                          {feature}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  {reportConfig.reportType === template.id && (\r\n                    <span className=\"text-green-500 text-lg\"></span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Report Configuration */}\r\n        <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n          <h3 className={`text-lg font-semibold mb-4 ${theme.text.primary}`}>\r\n            Report Configuration\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${theme.text.secondary}`}>\r\n                Company Name\r\n              </label>\r\n              <Input\r\n                type=\"text\"\r\n                value={reportConfig.companyName}\r\n                onChange={(e) => handleConfigChange('companyName', e.target.value)}\r\n                placeholder=\"Enter company name\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${theme.text.secondary}`}>\r\n                Reporting Period\r\n              </label>\r\n              <Input\r\n                type=\"number\"\r\n                value={reportConfig.reportPeriod}\r\n                onChange={(e) => handleConfigChange('reportPeriod', parseInt(e.target.value))}\r\n                min=\"2020\"\r\n                max=\"2030\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"md:col-span-2\">\r\n              <label className={`block text-sm font-medium mb-2 ${theme.text.secondary}`}>\r\n                ESG Framework\r\n              </label>\r\n              <select\r\n                value={reportConfig.framework}\r\n                onChange={(e) => handleConfigChange('framework', e.target.value)}\r\n                className={`w-full border rounded-lg px-3 py-2 ${theme.bg.input} ${theme.border.input} ${theme.text.primary}`}\r\n              >\r\n                {frameworks.map(framework => (\r\n                  <option key={framework.id} value={framework.id}>\r\n                    {framework.name} - {framework.description}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Report Options */}\r\n        <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n          <h3 className={`text-lg font-semibold mb-4 ${theme.text.primary}`}>\r\n            Report Options\r\n          </h3>\r\n          \r\n          <div className=\"space-y-3\">\r\n            <label className=\"flex items-center gap-3\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={reportConfig.executiveSummary}\r\n                onChange={(e) => handleConfigChange('executiveSummary', e.target.checked)}\r\n                className=\"rounded\"\r\n              />\r\n              <div>\r\n                <span className={`font-medium ${theme.text.primary}`}>\r\n                  Include Executive Summary\r\n                </span>\r\n                <p className={`text-sm ${theme.text.secondary}`}>\r\n                  High-level overview with key insights and recommendations\r\n                </p>\r\n              </div>\r\n            </label>\r\n            \r\n            <label className=\"flex items-center gap-3\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={reportConfig.includeCharts}\r\n                onChange={(e) => handleConfigChange('includeCharts', e.target.checked)}\r\n                className=\"rounded\"\r\n              />\r\n              <div>\r\n                <span className={`font-medium ${theme.text.primary}`}>\r\n                  Include Charts & Visualizations\r\n                </span>\r\n                <p className={`text-sm ${theme.text.secondary}`}>\r\n                  Professional charts, graphs, and data visualizations\r\n                </p>\r\n              </div>\r\n            </label>\r\n            \r\n            <label className=\"flex items-center gap-3\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={reportConfig.includeCompliance}\r\n                onChange={(e) => handleConfigChange('includeCompliance', e.target.checked)}\r\n                className=\"rounded\"\r\n              />\r\n              <div>\r\n                <span className={`font-medium ${theme.text.primary}`}>\r\n                  Include Compliance Section\r\n                </span>\r\n                <p className={`text-sm ${theme.text.secondary}`}>\r\n                  Regulatory compliance status and governance framework\r\n                </p>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Data Summary */}\r\n        <div className={`p-4 rounded-lg border ${theme.border.primary}`}>\r\n          <h3 className={`text-lg font-semibold mb-4 ${theme.text.primary}`}>\r\n            Data Summary\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n            <div>\r\n              <div className={`text-2xl font-bold ${theme.text.primary}`}>\r\n                {data.filter(d => d.category === 'environmental').length}\r\n              </div>\r\n              <div className={`text-sm ${theme.text.secondary}`}>\r\n                Environmental Metrics\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className={`text-2xl font-bold ${theme.text.primary}`}>\r\n                {data.filter(d => d.category === 'social').length}\r\n              </div>\r\n              <div className={`text-sm ${theme.text.secondary}`}>\r\n                Social Metrics\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className={`text-2xl font-bold ${theme.text.primary}`}>\r\n                {data.filter(d => d.category === 'governance').length}\r\n              </div>\r\n              <div className={`text-sm ${theme.text.secondary}`}>\r\n                Governance Metrics\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {data.length === 0 && (\r\n            <Alert\r\n              type=\"warning\"\r\n              title=\"No Data Available\"\r\n              message=\"Add ESG data entries to generate comprehensive reports.\"\r\n              className=\"mt-4\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Professional Features Highlight */}\r\n        <div className={`p-4 rounded-lg ${isDark ? 'bg-green-900/20 border-green-700' : 'bg-green-50 border-green-200'} border`}>\r\n          <h3 className={`text-lg font-semibold mb-3 ${isDark ? 'text-green-300' : 'text-green-800'}`}>\r\n             Professional Report Features\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n            {[\r\n              'Executive-level formatting and design',\r\n              'Strategic insights and recommendations',\r\n              'Risk assessment and opportunity analysis',\r\n              'Compliance mapping and governance review',\r\n              'Professional branding and layout',\r\n              'Industry benchmarking and trends',\r\n              'Key performance indicators dashboard',\r\n              'Stakeholder-ready presentation format'\r\n            ].map(feature => (\r\n              <div key={feature} className=\"flex items-center gap-2\">\r\n                <span className=\"text-green-500\"></span>\r\n                <span className={`text-sm ${isDark ? 'text-green-200' : 'text-green-700'}`}>\r\n                  {feature}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ProfessionalReportTemplate;","import React, { useState } from 'react';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport { getThemeClasses } from '../utils/themeUtils';\r\nimport { generateExecutiveProfessionalReport } from '../utils/enhancedProfessionalPDF';\r\nimport { Button, Modal, Input, Alert } from './ProfessionalUX';\r\n\r\nconst CustomReportBuilder = ({ data, onClose }) => {\r\n  const { isDark } = useTheme();\r\n  const theme = getThemeClasses(isDark);\r\n  \r\n  const [reportConfig, setReportConfig] = useState({\r\n    title: 'Custom ESG Report',\r\n    companyName: 'ESGenius Tech Solutions',\r\n    framework: 'SEBI BRSR',\r\n    reportPeriod: new Date().getFullYear(),\r\n    sections: {\r\n      executiveSummary: true,\r\n      environmentalMetrics: true,\r\n      socialMetrics: true,\r\n      governanceMetrics: true,\r\n      performanceTrends: true,\r\n      complianceStatus: true,\r\n      recommendations: true\r\n    },\r\n    customSections: []\r\n  });\r\n  \r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [newSectionTitle, setNewSectionTitle] = useState('');\r\n\r\n  const frameworks = [\r\n    { id: 'SEBI BRSR', name: 'SEBI BRSR' },\r\n    { id: 'GRI Standards', name: 'GRI Standards' },\r\n    { id: 'TCFD', name: 'TCFD' },\r\n    { id: 'SASB', name: 'SASB' },\r\n    { id: 'EU Taxonomy', name: 'EU Taxonomy' }\r\n  ];\r\n\r\n  const handleGenerateReport = async () => {\r\n    setIsGenerating(true);\r\n    \r\n    try {\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      \r\n      // Normalize data for report generation\r\n      const normalizedData = data.map(item => {\r\n        if (item.environmental || item.social || item.governance) {\r\n          const results = [];\r\n          ['environmental', 'social', 'governance'].forEach(cat => {\r\n            if (item[cat]) {\r\n              Object.entries(item[cat]).forEach(([key, value]) => {\r\n                if (key !== 'description' && value !== '' && !isNaN(parseFloat(value))) {\r\n                  results.push({\r\n                    ...item,\r\n                    category: cat,\r\n                    metric: key,\r\n                    value: parseFloat(value),\r\n                    companyName: item.companyName,\r\n                    sector: item.sector,\r\n                    region: item.region\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n          return results;\r\n        }\r\n        return [item];\r\n      }).flat().filter(item => item.category && ['environmental','social','governance'].includes(item.category));\r\n      \r\n      const pdf = generateExecutiveProfessionalReport(\r\n        reportConfig.framework,\r\n        normalizedData,\r\n        {\r\n          companyName: reportConfig.companyName,\r\n          reportPeriod: reportConfig.reportPeriod,\r\n          executiveSummary: reportConfig.sections.executiveSummary,\r\n          includeCharts: true,\r\n          includeCompliance: reportConfig.sections.complianceStatus\r\n        }\r\n      );\r\n      \r\n      const filename = `Custom-ESG-Report-${reportConfig.title.replace(/\\s+/g, '-')}-${new Date().toISOString().split('T')[0]}.pdf`;\r\n      pdf.save(filename);\r\n      \r\n      alert('Custom ESG report generated successfully!');\r\n      \r\n    } catch (error) {\r\n      console.error('Report generation error:', error);\r\n      alert('Error generating report. Please try again.');\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleConfigChange = (field, value) => {\r\n    setReportConfig(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleSectionChange = (section, value) => {\r\n    setReportConfig(prev => ({\r\n      ...prev,\r\n      sections: {\r\n        ...prev.sections,\r\n        [section]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  const addCustomSection = () => {\r\n    if (newSectionTitle.trim()) {\r\n      setReportConfig(prev => ({\r\n        ...prev,\r\n        customSections: [...prev.customSections, { title: newSectionTitle, content: '' }]\r\n      }));\r\n      setNewSectionTitle('');\r\n    }\r\n  };\r\n\r\n  const removeCustomSection = (index) => {\r\n    setReportConfig(prev => ({\r\n      ...prev,\r\n      customSections: prev.customSections.filter((_, i) => i !== index)\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={true}\r\n      onClose={onClose}\r\n      title=\" Custom Report Builder\"\r\n      size=\"xl\"\r\n      actions={[\r\n        {\r\n          label: isGenerating ? 'Generating...' : 'Generate Custom Report',\r\n          onClick: handleGenerateReport,\r\n          variant: 'primary',\r\n          icon: '',\r\n          disabled: isGenerating,\r\n          loading: isGenerating\r\n        },\r\n        {\r\n          label: 'Cancel',\r\n          onClick: onClose,\r\n          variant: 'outline'\r\n        }\r\n      ]}\r\n    >\r\n      <div className=\"space-y-6\">\r\n        {/* Report Configuration */}\r\n        <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n          <h3 className={`text-lg font-semibold mb-4 ${theme.text.primary}`}>\r\n            Report Configuration\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${theme.text.secondary}`}>\r\n                Report Title\r\n              </label>\r\n              <Input\r\n                type=\"text\"\r\n                value={reportConfig.title}\r\n                onChange={(e) => handleConfigChange('title', e.target.value)}\r\n                placeholder=\"Enter report title\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${theme.text.secondary}`}>\r\n                Company Name\r\n              </label>\r\n              <Input\r\n                type=\"text\"\r\n                value={reportConfig.companyName}\r\n                onChange={(e) => handleConfigChange('companyName', e.target.value)}\r\n                placeholder=\"Enter company name\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${theme.text.secondary}`}>\r\n                ESG Framework\r\n              </label>\r\n              <select\r\n                value={reportConfig.framework}\r\n                onChange={(e) => handleConfigChange('framework', e.target.value)}\r\n                className={`w-full border rounded-lg px-3 py-2 ${theme.bg.input} ${theme.border.input} ${theme.text.primary}`}\r\n              >\r\n                {frameworks.map(framework => (\r\n                  <option key={framework.id} value={framework.id}>\r\n                    {framework.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${theme.text.secondary}`}>\r\n                Reporting Period\r\n              </label>\r\n              <Input\r\n                type=\"number\"\r\n                value={reportConfig.reportPeriod}\r\n                onChange={(e) => handleConfigChange('reportPeriod', parseInt(e.target.value))}\r\n                min=\"2020\"\r\n                max=\"2030\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section Selection */}\r\n        <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n          <h3 className={`text-lg font-semibold mb-4 ${theme.text.primary}`}>\r\n            Report Sections\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n            {Object.entries({\r\n              executiveSummary: 'Executive Summary',\r\n              environmentalMetrics: 'Environmental Metrics',\r\n              socialMetrics: 'Social Metrics',\r\n              governanceMetrics: 'Governance Metrics',\r\n              performanceTrends: 'Performance Trends',\r\n              complianceStatus: 'Compliance Status',\r\n              recommendations: 'Strategic Recommendations'\r\n            }).map(([key, label]) => (\r\n              <label key={key} className=\"flex items-center gap-3\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={reportConfig.sections[key]}\r\n                  onChange={(e) => handleSectionChange(key, e.target.checked)}\r\n                  className=\"rounded\"\r\n                />\r\n                <span className={`font-medium ${theme.text.primary}`}>\r\n                  {label}\r\n                </span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Custom Sections */}\r\n        <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n          <h3 className={`text-lg font-semibold mb-4 ${theme.text.primary}`}>\r\n            Custom Sections\r\n          </h3>\r\n          \r\n          <div className=\"flex gap-2 mb-4\">\r\n            <Input\r\n              type=\"text\"\r\n              value={newSectionTitle}\r\n              onChange={(e) => setNewSectionTitle(e.target.value)}\r\n              placeholder=\"Enter custom section title\"\r\n              className=\"flex-1\"\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={addCustomSection}\r\n              icon=\"+\"\r\n              disabled={!newSectionTitle.trim()}\r\n            >\r\n              Add Section\r\n            </Button>\r\n          </div>\r\n          \r\n          {reportConfig.customSections.length > 0 && (\r\n            <div className=\"space-y-2\">\r\n              {reportConfig.customSections.map((section, index) => (\r\n                <div key={index} className={`flex items-center justify-between p-3 rounded-lg ${theme.bg.card} border`}>\r\n                  <span className={`font-medium ${theme.text.primary}`}>\r\n                    {section.title}\r\n                  </span>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => removeCustomSection(index)}\r\n                    icon=\"\"\r\n                    size=\"sm\"\r\n                  >\r\n                    Remove\r\n                  </Button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Data Summary */}\r\n        <div className={`p-4 rounded-lg border ${theme.border.primary}`}>\r\n          <h3 className={`text-lg font-semibold mb-4 ${theme.text.primary}`}>\r\n            Available Data\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n            <div>\r\n              <div className={`text-2xl font-bold ${theme.text.primary}`}>\r\n                {data.reduce((count, item) => {\r\n                  if (item.environmental && Object.keys(item.environmental).some(k => k !== 'description' && item.environmental[k] !== '')) {\r\n                    return count + Object.keys(item.environmental).filter(k => k !== 'description' && item.environmental[k] !== '').length;\r\n                  }\r\n                  return count + (item.category === 'environmental' ? 1 : 0);\r\n                }, 0)}\r\n              </div>\r\n              <div className={`text-sm ${theme.text.secondary}`}>\r\n                Environmental Metrics\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className={`text-2xl font-bold ${theme.text.primary}`}>\r\n                {data.reduce((count, item) => {\r\n                  if (item.social && Object.keys(item.social).some(k => k !== 'description' && item.social[k] !== '')) {\r\n                    return count + Object.keys(item.social).filter(k => k !== 'description' && item.social[k] !== '').length;\r\n                  }\r\n                  return count + (item.category === 'social' ? 1 : 0);\r\n                }, 0)}\r\n              </div>\r\n              <div className={`text-sm ${theme.text.secondary}`}>\r\n                Social Metrics\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className={`text-2xl font-bold ${theme.text.primary}`}>\r\n                {data.reduce((count, item) => {\r\n                  if (item.governance && Object.keys(item.governance).some(k => k !== 'description' && item.governance[k] !== '')) {\r\n                    return count + Object.keys(item.governance).filter(k => k !== 'description' && item.governance[k] !== '').length;\r\n                  }\r\n                  return count + (item.category === 'governance' ? 1 : 0);\r\n                }, 0)}\r\n              </div>\r\n              <div className={`text-sm ${theme.text.secondary}`}>\r\n                Governance Metrics\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {data.length === 0 && (\r\n            <Alert\r\n              type=\"warning\"\r\n              title=\"No Data Available\"\r\n              message=\"Add ESG data entries to generate comprehensive reports.\"\r\n              className=\"mt-4\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Report Preview */}\r\n        <div className={`p-4 rounded-lg ${isDark ? 'bg-blue-900/20 border-blue-700' : 'bg-blue-50 border-blue-200'} border`}>\r\n          <h3 className={`text-lg font-semibold mb-3 ${isDark ? 'text-blue-300' : 'text-blue-800'}`}>\r\n             Report Preview\r\n          </h3>\r\n          \r\n          <div className=\"space-y-2\">\r\n            <div className={`text-sm ${isDark ? 'text-blue-200' : 'text-blue-700'}`}>\r\n              <strong>Title:</strong> {reportConfig.title}\r\n            </div>\r\n            <div className={`text-sm ${isDark ? 'text-blue-200' : 'text-blue-700'}`}>\r\n              <strong>Company:</strong> {reportConfig.companyName}\r\n            </div>\r\n            <div className={`text-sm ${isDark ? 'text-blue-200' : 'text-blue-700'}`}>\r\n              <strong>Framework:</strong> {reportConfig.framework}\r\n            </div>\r\n            <div className={`text-sm ${isDark ? 'text-blue-200' : 'text-blue-700'}`}>\r\n              <strong>Sections:</strong> {Object.values(reportConfig.sections).filter(Boolean).length + reportConfig.customSections.length} sections selected\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CustomReportBuilder;","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { PieChart, Pie, Cell, Tooltip, Legend, ResponsiveContainer, LineChart, Line, XAxis, YAxis, CartesianGrid, BarChart, Bar } from \"recharts\";\r\nimport { getStoredData, initializeStorage } from \"./utils/storage\";\r\nimport esgAPI from \"./api/esgAPI\";\r\nimport APIService from \"./services/apiService\";\r\nimport companyLogo from \"./companyLogo.jpg\";\r\nimport jsPDF from \"jspdf\";\r\nimport html2canvas from \"html2canvas\";\r\nimport { useTheme } from \"./contexts/ThemeContext\";\r\nimport { getThemeClasses } from \"./utils/themeUtils\";\r\nimport ProfessionalHeader from \"./components/ProfessionalHeader\";\r\nimport { MetricCard, StatusCard } from \"./components/ProfessionalCard\";\r\nimport { Alert, Button, Input, Modal, Toast } from \"./components/ProfessionalUX\";\r\nimport { RBACManager, PERMISSIONS } from \"./utils/rbac\";\r\nimport { ESG_FRAMEWORKS, AI_INSIGHTS_ENGINE, REGULATORY_COMPLIANCE } from \"./utils/enhancedFrameworks\";\r\nimport { validateFrameworkCompliance, generateFrameworkReport } from \"./utils/frameworkMapper\";\r\nimport FrameworkCompliance from \"./components/FrameworkCompliance\";\r\nimport FrameworkComplianceSummary from \"./components/FrameworkComplianceSummary\";\r\nimport FrameworkReportSelector from \"./components/FrameworkReportSelector\";\r\nimport { generateESGPDF } from \"./utils/pdfGenerator\";\r\nimport { generateProfessionalESGReport } from \"./utils/professionalPDFGenerator\";\r\nimport { generateExecutiveProfessionalReport } from \"./utils/enhancedProfessionalPDF\";\r\nimport ProfessionalReportTemplate from \"./components/ProfessionalReportTemplate\";\r\nimport CustomReportBuilder from \"./components/CustomReportBuilder\";\r\n// sample data removed: no dummy/sample data should be auto-loaded in Reports\r\nimport { ReportGenerator } from \"./utils/reportGenerator\";\r\n\r\n\r\nconst COLORS = [\"#3a7a44\", \"#6b7bd6\", \"#ffbb28\", \"#ff8042\"];\r\n\r\n\r\n\r\n// --- ESG Data Normalization and Aggregation ---\r\nfunction normalizeData(data) {\r\n  return data\r\n    .map(item => {\r\n      let year = null;\r\n      \r\n      // Priority order: reportingYear -> timestamp -> current year\r\n      if (item.reportingYear && !isNaN(parseInt(item.reportingYear))) {\r\n        year = parseInt(item.reportingYear);\r\n      } else if (item.timestamp) {\r\n        try {\r\n          year = new Date(item.timestamp).getFullYear();\r\n        } catch {\r\n          year = new Date().getFullYear();\r\n        }\r\n      } else {\r\n        year = new Date().getFullYear();\r\n      }\r\n      \r\n      // Handle both old format (category/value) and new format (nested objects)\r\n      if (item.environmental || item.social || item.governance) {\r\n        // New format from DataEntry form submission\r\n        const results = [];\r\n        ['environmental', 'social', 'governance'].forEach(cat => {\r\n          if (item[cat]) {\r\n            Object.entries(item[cat]).forEach(([key, value]) => {\r\n              if (key !== 'description' && value !== '' && !isNaN(parseFloat(value))) {\r\n                results.push({\r\n                  ...item,\r\n                  category: cat,\r\n                  metric: key,\r\n                  value: parseFloat(value),\r\n                  year,\r\n                  companyName: item.companyName,\r\n                  sector: item.sector,\r\n                  region: item.region\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n        return results;\r\n      } else {\r\n        // Old format\r\n        const category = (item.category || '').toLowerCase();\r\n        const value = parseFloat(item.value);\r\n        return [{\r\n          ...item,\r\n          year,\r\n          category,\r\n          value: isNaN(value) ? null : value\r\n        }];\r\n      }\r\n    })\r\n    .flat()\r\n    .filter(item => item.year && item.category && item.value !== null && ['environmental','social','governance'].includes(item.category));\r\n}\r\n\r\nfunction aggregateByYear(data) {\r\n  // { [year]: { environmental: {sum, count}, ... } }\r\n  const result = {};\r\n  data.forEach(item => {\r\n    if (!result[item.year]) {\r\n      result[item.year] = {\r\n        year: item.year,\r\n        environmental: { sum: 0, count: 0 },\r\n        social: { sum: 0, count: 0 },\r\n        governance: { sum: 0, count: 0 }\r\n      };\r\n    }\r\n    if (['environmental','social','governance'].includes(item.category)) {\r\n      result[item.year][item.category].sum += item.value;\r\n      result[item.year][item.category].count += 1;\r\n    }\r\n  });\r\n  // Convert to array with averages\r\n  return Object.values(result).map(yearObj => ({\r\n    year: yearObj.year,\r\n    environmental: yearObj.environmental.count ? (yearObj.environmental.sum / yearObj.environmental.count).toFixed(2) : '-',\r\n    social: yearObj.social.count ? (yearObj.social.sum / yearObj.social.count).toFixed(2) : '-',\r\n    governance: yearObj.governance.count ? (yearObj.governance.sum / yearObj.governance.count).toFixed(2) : '-',\r\n    average: [yearObj.environmental, yearObj.social, yearObj.governance].every(x => x.count)\r\n      ? (((yearObj.environmental.sum / yearObj.environmental.count) + (yearObj.social.sum / yearObj.social.count) + (yearObj.governance.sum / yearObj.governance.count)) / 3).toFixed(2)\r\n      : '-'\r\n  })).sort((a, b) => a.year - b.year);\r\n}\r\n\r\nfunction aggregateOverall(data) {\r\n  const agg = { environmental: { sum: 0, count: 0 }, social: { sum: 0, count: 0 }, governance: { sum: 0, count: 0 } };\r\n  data.forEach(item => {\r\n    if (['environmental','social','governance'].includes(item.category)) {\r\n      agg[item.category].sum += item.value;\r\n      agg[item.category].count += 1;\r\n    }\r\n  });\r\n  const envAvg = agg.environmental.count ? (agg.environmental.sum / agg.environmental.count).toFixed(2) : '-';\r\n  const socAvg = agg.social.count ? (agg.social.sum / agg.social.count).toFixed(2) : '-';\r\n  const govAvg = agg.governance.count ? (agg.governance.sum / agg.governance.count).toFixed(2) : '-';\r\n  const overall = [envAvg, socAvg, govAvg].every(x => x !== '-') ? (((+envAvg) + (+socAvg) + (+govAvg)) / 3).toFixed(2) : '-';\r\n  return { environmental: envAvg, social: socAvg, governance: govAvg, overall };\r\n}\r\n\r\n// Remove duplicate entries. Keep latest entry when duplicates detected.\r\nconst dedupeEntries = (entries = []) => {\r\n  const map = new Map();\r\n  entries.forEach(e => {\r\n    const key = e.id || `${e.companyName || ''}|${(e.category||'').toLowerCase()}|${e.metric||''}|${e.year||e.reportingYear||''}|${String(e.value)}`;\r\n    const existing = map.get(key);\r\n    if (!existing) {\r\n      map.set(key, e);\r\n    } else {\r\n      const existingTime = new Date(existing.timestamp || existing.createdAt || 0).getTime();\r\n      const newTime = new Date(e.timestamp || e.createdAt || 0).getTime();\r\n      if (newTime >= existingTime) map.set(key, e);\r\n    }\r\n  });\r\n  return Array.from(map.values());\r\n};\r\n\r\nfunction Reports() {\r\n  const { isDark, toggleTheme } = useTheme();\r\n  const theme = getThemeClasses(isDark);\r\n  const [currentUser] = useState({ \r\n    role: localStorage.getItem('userRole') || 'esg_manager', \r\n    id: localStorage.getItem('currentUser') || 'user_123' \r\n  });\r\n  const [data, setData] = useState([]);\r\n  const [selectedReport, setSelectedReport] = useState(\"SEBI BRSR\");\r\n  const [filterStatus, setFilterStatus] = useState(\"All\");\r\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\r\n  const [yearlyData, setYearlyData] = useState([]);\r\n  const [overallSummary, setOverallSummary] = useState({});\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [sortField, setSortField] = useState('timestamp');\r\n  const [sortOrder, setSortOrder] = useState('desc');\r\n  const [toast, setToast] = useState(null);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [showProfessionalTemplate, setShowProfessionalTemplate] = useState(false);\r\n  const [showCustomReportBuilder, setShowCustomReportBuilder] = useState(false);\r\n  const [showPredictiveAnalytics, setShowPredictiveAnalytics] = useState(false);\r\n  const [showIntegrations, setShowIntegrations] = useState(false);\r\n  const [showFrameworkCompliance, setShowFrameworkCompliance] = useState(false);\r\n  const [frameworkComplianceData, setFrameworkComplianceData] = useState({});\r\n  const [complianceSummary, setComplianceSummary] = useState({});\r\n  const [showFrameworkReports, setShowFrameworkReports] = useState(false);\r\n\r\n  // Clear all data from localStorage\r\n  const clearAllData = () => {\r\n    if (window.confirm('Are you sure you want to clear all ESG data? This action cannot be undone.')) {\r\n      try {\r\n        // Clear all ESG-related localStorage keys\r\n        const keysToRemove = [\r\n          'esgData',\r\n          'esg_database', \r\n          'suppliers',\r\n          'sampleData',\r\n          'dummyData',\r\n          'testData'\r\n        ];\r\n        \r\n        keysToRemove.forEach(key => {\r\n          localStorage.removeItem(key);\r\n        });\r\n        \r\n        // Reset component state\r\n        setData([]);\r\n        setYearlyData([]);\r\n        setOverallSummary({});\r\n        \r\n        showToast('All data cleared successfully', 'success');\r\n        console.log('Cleared localStorage keys:', keysToRemove);\r\n      } catch (error) {\r\n        console.error('Error clearing data:', error);\r\n        showToast('Error clearing data', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Framework compliance analysis\r\n  const analyzeFrameworkCompliance = () => {\r\n    const griCompliance = validateFrameworkCompliance(data, 'GRI');\r\n    const sasbCompliance = validateFrameworkCompliance(data, 'SASB');\r\n    \r\n    setFrameworkComplianceData({\r\n      GRI: griCompliance,\r\n      SASB: sasbCompliance\r\n    });\r\n    \r\n    setShowFrameworkCompliance(true);\r\n  };\r\n\r\n\r\n\r\n  // Save full report (JSON) and trigger download\r\n  const handleSaveFullReport = async () => {\r\n    setIsGenerating(true);\r\n    try {\r\n      const esgData = await getStoredData();\r\n\r\n      // Build report input expected by ReportGenerator\r\n      const companyName = (esgData && esgData.length && esgData[0].companyName) || 'Company';\r\n      const reportInput = {\r\n        companyName,\r\n        environmental: esgData.filter(e => e.category === 'environmental'),\r\n        social: esgData.filter(e => e.category === 'social'),\r\n        governance: esgData.filter(e => e.category === 'governance'),\r\n        kpis: {},\r\n        analytics: {}\r\n      };\r\n\r\n      const framework = (selectedReport && selectedReport.includes('GRI')) ? 'GRI' : selectedReport;\r\n      const fullReport = ReportGenerator.generateESGReport(reportInput, framework);\r\n\r\n      const blob = new Blob([JSON.stringify(fullReport, null, 2)], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      const filename = `ESG-Full-Report-${selectedReport.replace(/\\s+/g, '-')}-${new Date().toISOString().split('T')[0]}.json`;\r\n      a.download = filename;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      a.remove();\r\n      URL.revokeObjectURL(url);\r\n\r\n      showToast('Full report downloaded', 'success');\r\n    } catch (err) {\r\n      console.error('Failed to save full report', err);\r\n      showToast('Failed to download report', 'error');\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  \r\n\r\n  // Print the visible report summary (opens a new window with report content and calls print)\r\n  const handlePrintReport = () => {\r\n    const el = document.getElementById('report-summary');\r\n    if (!el) {\r\n      showToast('No report content to print', 'error');\r\n      return;\r\n    }\r\n\r\n    const printWindow = window.open('', '_blank', 'width=1000,height=800');\r\n    if (!printWindow) {\r\n      showToast('Unable to open print window (popup blocked?)', 'error');\r\n      return;\r\n    }\r\n\r\n    // Copy styles from current document\r\n    const headHtml = Array.from(document.querySelectorAll('link[rel=\"stylesheet\"], style')).map(node => node.outerHTML).join('\\n');\r\n\r\n    printWindow.document.open();\r\n    printWindow.document.write(`<!doctype html><html><head><title>ESG Report - Print</title>${headHtml}</head><body>`);\r\n    printWindow.document.write(el.innerHTML);\r\n    printWindow.document.write('</body></html>');\r\n    printWindow.document.close();\r\n    printWindow.focus();\r\n    // Delay slightly to allow resources to load\r\n    setTimeout(() => {\r\n      printWindow.print();\r\n      // Do not auto-close so user can inspect printed view; close automatically after short delay optionally\r\n    }, 600);\r\n  };\r\n\r\n\r\n  const getEnvironmentalMetrics = () => {\r\n    const normalized = normalizeData(data);\r\n    const envData = normalized.filter(item => item.category === 'environmental');\r\n    const metrics = [\r\n      { name: 'Total Electricity Consumption', value: getMetricValue(envData, 'energyConsumption') + ' kWh' },\r\n      { name: 'Renewable Electricity Consumption', value: getMetricValue(envData, 'renewableEnergyRatio') + ' kWh' },\r\n      { name: 'Total Fuel Consumption', value: getMetricValue(envData, 'fuelConsumption') + ' liters' },\r\n      { name: 'Carbon Emissions', value: getMetricValue(envData, 'carbonEmissions') + ' T CO2e' },\r\n      { name: 'Water Usage', value: getMetricValue(envData, 'waterUsage') + ' cubic meters' },\r\n      { name: 'Waste Management', value: getMetricValue(envData, 'wasteManagement') + ' tons' }\r\n    ];\r\n    return metrics.filter(m => m.value && String(m.value).trim() !== '' && !String(m.value).startsWith('0 '));\r\n  };\r\n\r\n  const getSocialMetrics = () => {\r\n    const normalized = normalizeData(data);\r\n    const socialData = normalized.filter(item => item.category === 'social');\r\n    return [\r\n      { name: 'Total Number of Employees', value: getMetricValue(socialData, 'totalEmployees') },\r\n      { name: 'Female Employees Percentage', value: getMetricValue(socialData, 'femaleEmployeesPercentage') + ' %' },\r\n      { name: 'Average Training Hours per Employee', value: getMetricValue(socialData, 'trainingHours') + ' hrs/yr' },\r\n      { name: 'Community Investment Spend', value: getMetricValue(socialData, 'communityInvestment') + ' INR' },\r\n      { name: 'Employee Turnover Rate', value: getMetricValue(socialData, 'employeeTurnover') + ' %' },\r\n      { name: 'Workplace Safety Incidents', value: getMetricValue(socialData, 'workplaceSafety') }\r\n    ].filter(m => m.value && String(m.value).trim() !== '' && !String(m.value).startsWith('0'));\r\n  };\r\n\r\n  const getGovernanceMetrics = () => {\r\n    const normalized = normalizeData(data);\r\n    const govData = normalized.filter(item => item.category === 'governance');\r\n    return [\r\n      { name: '% of Independent Board Members', value: getMetricValue(govData, 'boardDiversity') + ' %' },\r\n      { name: 'Data Privacy Policy', value: getMetricValue(govData, 'dataPrivacyPolicy') ? 'Yes' : 'No' },\r\n      { name: 'Total Revenue', value: getMetricValue(govData, 'totalRevenue') + ' INR' },\r\n      { name: 'Ethics Violations', value: getMetricValue(govData, 'ethicsViolations') },\r\n      { name: 'Transparency Score', value: getMetricValue(govData, 'transparencyScore') + ' %' },\r\n      { name: 'Risk Management Score', value: getMetricValue(govData, 'riskManagement') + ' %' }\r\n    ].filter(m => m.value && String(m.value).trim() !== '' && !String(m.value).startsWith('0'));\r\n  };\r\n\r\n  const getCalculatedMetrics = () => {\r\n    const normalized = normalizeData(data);\r\n    const envData = normalized.filter(item => item.category === 'environmental');\r\n    const socialData = normalized.filter(item => item.category === 'social');\r\n    const govData = normalized.filter(item => item.category === 'governance');\r\n    \r\n    const totalRevenue = getMetricValue(govData, 'totalRevenue');\r\n    const carbonEmissions = getMetricValue(envData, 'carbonEmissions');\r\n    const communityInvestment = getMetricValue(socialData, 'communityInvestment');\r\n    const renewableRatio = getMetricValue(envData, 'renewableEnergyRatio');\r\n    const diversityRatio = getMetricValue(socialData, 'femaleEmployeesPercentage');\r\n    \r\n    const metrics = [];\r\n    \r\n    if (carbonEmissions > 0 && totalRevenue > 0) {\r\n      metrics.push({ name: 'Carbon Intensity', value: (carbonEmissions / totalRevenue).toFixed(6) + ' T CO2e/INR' });\r\n    }\r\n    \r\n    if (renewableRatio > 0) {\r\n      metrics.push({ name: 'Renewable Electricity Ratio', value: renewableRatio.toFixed(2) + ' %' });\r\n    }\r\n    \r\n    if (diversityRatio > 0) {\r\n      metrics.push({ name: 'Gender Diversity Ratio', value: diversityRatio.toFixed(0) + ' %' });\r\n    }\r\n    \r\n    if (communityInvestment > 0 && totalRevenue > 0) {\r\n      metrics.push({ name: 'Community Spend Ratio', value: ((communityInvestment / totalRevenue) * 100).toFixed(2) + ' %' });\r\n    }\r\n    \r\n    return metrics;\r\n  };\r\n\r\n  const getMetricValue = (dataArray, metricName) => {\r\n    // Try exact match first\r\n    let item = dataArray.find(d => d.metric === metricName);\r\n    \r\n    // If no exact match, try case-insensitive partial match\r\n    if (!item) {\r\n      item = dataArray.find(d => \r\n        d.metric && d.metric.toLowerCase().includes(metricName.toLowerCase())\r\n      );\r\n    }\r\n    \r\n    // If still no match, try alternative common names\r\n    if (!item) {\r\n      const alternativeNames = {\r\n        'energyConsumption': ['energy', 'electricity', 'power'],\r\n        'carbonEmissions': ['carbon', 'emissions', 'co2', 'scope'],\r\n        'waterUsage': ['water', 'withdrawal'],\r\n        'wasteGenerated': ['waste', 'generated'],\r\n        'wasteRecycled': ['recycled', 'recycling'],\r\n        'totalEmployees': ['employees', 'workforce', 'headcount'],\r\n        'femaleEmployeesPercentage': ['female', 'women', 'gender', 'diversity'],\r\n        'boardDiversity': ['board', 'independent', 'directors']\r\n      };\r\n      \r\n      const alternatives = alternativeNames[metricName] || [];\r\n      item = dataArray.find(d => \r\n        alternatives.some(alt => d.metric && d.metric.toLowerCase().includes(alt))\r\n      );\r\n    }\r\n    \r\n    return item ? parseFloat(item.value) || 0 : 0;\r\n  };\r\n\r\n  const getTemplateContent = () => {\r\n    const normalized = normalizeData(data);\r\n    \r\n    switch(selectedReport) {\r\n      case \"SEBI BRSR\":\r\n        const esgData = [\r\n          { name: 'Environmental', value: parseFloat(overallSummary.environmental) || 0 },\r\n          { name: 'Social', value: parseFloat(overallSummary.social) || 0 },\r\n          { name: 'Governance', value: parseFloat(overallSummary.governance) || 0 }\r\n        ].filter(item => item.value > 0);\r\n        \r\n        if (esgData.length === 0) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No data available for visualization</p>\r\n                <p className=\"text-sm\">Add ESG data to see charts</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={esgData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis domain={[0, 100]} />\r\n                <Tooltip formatter={(value) => [`${value}`, 'Score']} />\r\n                <Bar dataKey=\"value\" fill=\"#059669\" radius={[4, 4, 0, 0]} />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n      \r\n      case \"GRI Standards\":\r\n        const griData = chartData();\r\n        if (griData.length === 0) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No GRI data available</p>\r\n                <p className=\"text-sm\">Add ESG data to generate GRI charts</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        const displayData = griData;\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <PieChart margin={{ top: 20, right: 30, left: 20, bottom: 20 }}>\r\n                <Pie\r\n                  data={displayData}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  labelLine={false}\r\n                  label={({ name, percent }) => `${name} (${(percent * 100).toFixed(0)}%)`}\r\n                  outerRadius={80}\r\n                  dataKey=\"value\"\r\n                >\r\n                  {displayData.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip />\r\n                <Legend />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n      \r\n      case \"Carbon Report\":\r\n        let carbonData = yearlyData.map(year => ({\r\n          name: year.year.toString(),\r\n          emissions: parseFloat(year.environmental) || 0\r\n        }));\r\n        \r\n        if (carbonData.length === 0 || carbonData.every(d => d.emissions === 0)) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No carbon emissions data available</p>\r\n                <p className=\"text-sm\">Add environmental data to track emissions</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <LineChart data={carbonData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value) => [`${value} T CO2e`, 'Emissions']} />\r\n                <Line type=\"monotone\" dataKey=\"emissions\" stroke=\"#dc2626\" strokeWidth={3} dot={{ fill: '#dc2626', strokeWidth: 2, r: 4 }} />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n      \r\n      case \"Water Usage\":\r\n        const waterUsageMetrics = normalized.filter(item => \r\n          item.category === 'environmental' && \r\n          (item.metric === 'waterUsage' || item.metric === 'waterWithdrawal' || \r\n           item.metric === 'total_water_withdrawal' || item.metric.includes('water'))\r\n        );\r\n        \r\n        // Group by month and sum values\r\n        const waterByMonth = {};\r\n        waterUsageMetrics.forEach(item => {\r\n          const month = new Date(item.timestamp).toLocaleDateString('en-US', { month: 'short', year: '2-digit' });\r\n          if (!waterByMonth[month]) {\r\n            waterByMonth[month] = { usage: 0, count: 0 };\r\n          }\r\n          waterByMonth[month].usage += item.value;\r\n          waterByMonth[month].count += 1;\r\n        });\r\n        \r\n        let waterData = Object.entries(waterByMonth).map(([month, data]) => ({\r\n          month,\r\n          usage: Math.round(data.usage / data.count), // Average if multiple entries\r\n          target: Math.round((data.usage / data.count) * 0.9)\r\n        })).sort((a, b) => new Date(a.month) - new Date(b.month));\r\n          \r\n        if (waterData.length === 0) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No water usage data available</p>\r\n                <p className=\"text-sm\">Add water management data to see usage trends</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={waterData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"month\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value, name) => [`${value} m`, name === 'usage' ? 'Usage' : 'Target']} />\r\n                <Bar dataKey=\"usage\" fill=\"#2563eb\" name=\"Usage\" radius={[4, 4, 0, 0]} />\r\n                <Bar dataKey=\"target\" fill=\"#93c5fd\" name=\"Target\" radius={[4, 4, 0, 0]} />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n      \r\n      case \"Waste Management\":\r\n        const wasteMetrics = normalized.filter(item => \r\n          item.category === 'environmental' && \r\n          (item.metric.includes('waste') || item.metric === 'wasteGenerated' || item.metric === 'wasteRecycled')\r\n        );\r\n        \r\n        let wasteData = [];\r\n        if (wasteMetrics.length > 0) {\r\n          wasteData = [\r\n            { name: 'Recycled', value: getMetricValue(wasteMetrics, 'wasteRecycled') || 0, fill: '#059669' },\r\n            { name: 'Generated', value: getMetricValue(wasteMetrics, 'wasteGenerated') || 0, fill: '#eab308' },\r\n            { name: 'Management', value: getMetricValue(wasteMetrics, 'wasteManagement') || 0, fill: '#dc2626' }\r\n          ].filter(item => item.value > 0);\r\n        }\r\n        \r\n        if (wasteData.length === 0) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No waste management data available</p>\r\n                <p className=\"text-sm\">Add waste data to see management breakdown</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <PieChart margin={{ top: 20, right: 30, left: 20, bottom: 20 }}>\r\n                <Pie\r\n                  data={wasteData}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  labelLine={false}\r\n                  label={({ name, percent }) => `${name} (${(percent * 100).toFixed(0)}%)`}\r\n                  outerRadius={80}\r\n                  dataKey=\"value\"\r\n                >\r\n                  {wasteData.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={entry.fill} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip formatter={(value) => [`${value} tons`, 'Waste']} />\r\n                <Legend />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n      \r\n      case \"TCFD\":\r\n        const tcfdMetrics = normalized.filter(item => \r\n          item.category === 'governance' && \r\n          (item.metric.includes('climate') || item.metric.includes('risk') || item.metric.includes('governance'))\r\n        );\r\n        \r\n        if (tcfdMetrics.length === 0) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No TCFD data available</p>\r\n                <p className=\"text-sm\">Add climate-related governance data</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        \r\n        const climateMetrics = tcfdMetrics.filter(m => m.metric.includes('climate') || m.metric.includes('Climate') || m.metric.includes('risk') || m.metric.includes('Risk'));\r\n        const scenarioMetrics = tcfdMetrics.filter(m => m.metric.includes('scenario') || m.metric.includes('Scenario'));\r\n        const governanceMetrics = tcfdMetrics.filter(m => m.metric.includes('governance') || m.metric.includes('Governance') || m.metric.includes('board') || m.metric.includes('Board'));\r\n        const targetMetrics = tcfdMetrics.filter(m => m.metric.includes('target') || m.metric.includes('Target') || m.metric.includes('metric') || m.metric.includes('Metric'));\r\n        \r\n        const tcfdData = [\r\n          { name: 'Climate Risk Assessment', value: climateMetrics.length > 0 ? Math.round(Math.min(100, climateMetrics.reduce((sum, m) => sum + m.value, 0) / climateMetrics.length)) : 0 },\r\n          { name: 'Scenario Analysis', value: scenarioMetrics.length > 0 ? Math.round(Math.min(100, scenarioMetrics.reduce((sum, m) => sum + m.value, 0) / scenarioMetrics.length)) : 0 },\r\n          { name: 'Governance', value: governanceMetrics.length > 0 ? Math.round(Math.min(100, governanceMetrics.reduce((sum, m) => sum + m.value, 0) / governanceMetrics.length)) : 0 },\r\n          { name: 'Metrics & Targets', value: targetMetrics.length > 0 ? Math.round(Math.min(100, targetMetrics.reduce((sum, m) => sum + m.value, 0) / targetMetrics.length)) : 0 }\r\n        ].filter(item => item.value > 0);\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={tcfdData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" angle={-45} textAnchor=\"end\" height={80} />\r\n                <YAxis domain={[0, 100]} />\r\n                <Tooltip formatter={(value) => [`${value}%`, 'Compliance']} />\r\n                <Bar dataKey=\"value\" fill=\"#7c3aed\" radius={[4, 4, 0, 0]} />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n      \r\n      case \"SASB\":\r\n        const sasbEnvData = normalized.filter(item => item.category === 'environmental');\r\n        const sasbSocialData = normalized.filter(item => item.category === 'social');\r\n        \r\n        if (sasbEnvData.length === 0 && sasbSocialData.length === 0) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No SASB data available</p>\r\n                <p className=\"text-sm\">Add industry-specific sustainability data</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        \r\n        const sasbEnergyMetrics = sasbEnvData.filter(m => m.metric.includes('energy') || m.metric.includes('Energy'));\r\n        const sasbWaterMetrics = sasbEnvData.filter(m => m.metric.includes('water') || m.metric.includes('Water'));\r\n        const sasbWasteMetrics = sasbEnvData.filter(m => m.metric.includes('waste') || m.metric.includes('Waste'));\r\n        const sasbSafetyMetrics = sasbSocialData.filter(m => m.metric.includes('safety') || m.metric.includes('Safety') || m.metric.includes('health') || m.metric.includes('Health') || m.metric.includes('injury') || m.metric.includes('Injury'));\r\n        \r\n        const sasbData = [\r\n          { name: 'Energy Management', value: sasbEnergyMetrics.length > 0 ? Math.round(sasbEnergyMetrics.reduce((sum, m) => sum + m.value, 0) / sasbEnergyMetrics.length) : 0 },\r\n          { name: 'Water Management', value: sasbWaterMetrics.length > 0 ? Math.round(sasbWaterMetrics.reduce((sum, m) => sum + m.value, 0) / sasbWaterMetrics.length) : 0 },\r\n          { name: 'Waste Management', value: sasbWasteMetrics.length > 0 ? Math.round(sasbWasteMetrics.reduce((sum, m) => sum + m.value, 0) / sasbWasteMetrics.length) : 0 },\r\n          { name: 'Employee Health & Safety', value: sasbSafetyMetrics.length > 0 ? Math.round(sasbSafetyMetrics.reduce((sum, m) => sum + m.value, 0) / sasbSafetyMetrics.length) : 0 }\r\n        ].filter(item => item.value > 0);\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={sasbData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" angle={-45} textAnchor=\"end\" height={80} />\r\n                <YAxis domain={[0, 100]} />\r\n                <Tooltip formatter={(value) => [`${value}%`, 'Performance']} />\r\n                <Bar dataKey=\"value\" fill=\"#f59e0b\" radius={[4, 4, 0, 0]} />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n      \r\n      case \"EU Taxonomy\":\r\n        const taxonomyMetrics = normalized.filter(item => \r\n          item.metric && (item.metric.includes('taxonomy') || item.metric.includes('eligible') || item.metric.includes('aligned'))\r\n        );\r\n        \r\n        if (taxonomyMetrics.length === 0) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No EU Taxonomy data available</p>\r\n                <p className=\"text-sm\">Add taxonomy-eligible activity data</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        \r\n        const eligibleMetrics = taxonomyMetrics.filter(m => m.metric.includes('eligible') || m.metric.includes('Eligible'));\r\n        const alignedMetrics = taxonomyMetrics.filter(m => m.metric.includes('aligned') || m.metric.includes('Aligned'));\r\n        \r\n        const eligibleActivities = eligibleMetrics.length > 0 ? Math.round(eligibleMetrics.reduce((sum, m) => sum + m.value, 0) / eligibleMetrics.length) : 0;\r\n        const alignedActivities = alignedMetrics.length > 0 ? Math.round(alignedMetrics.reduce((sum, m) => sum + m.value, 0) / alignedMetrics.length) : 0;\r\n        const nonEligible = Math.max(0, 100 - eligibleActivities - alignedActivities);\r\n        \r\n        const taxonomyData = [\r\n          { name: 'Eligible Activities', value: eligibleActivities },\r\n          { name: 'Aligned Activities', value: alignedActivities },\r\n          { name: 'Non-Eligible', value: nonEligible }\r\n        ].filter(item => item.value > 0);\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <PieChart margin={{ top: 20, right: 30, left: 20, bottom: 20 }}>\r\n                <Pie\r\n                  data={taxonomyData}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  labelLine={false}\r\n                  label={({ name, percent }) => `${name} (${(percent * 100).toFixed(0)}%)`}\r\n                  outerRadius={80}\r\n                  dataKey=\"value\"\r\n                >\r\n                  {taxonomyData.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={['#10b981', '#3b82f6', '#ef4444'][index]} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip formatter={(value) => [`${value}%`, 'Revenue Share']} />\r\n                <Legend />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n      \r\n      default:\r\n        const defaultData = chartData();\r\n        if (defaultData.length === 0) {\r\n          return (\r\n            <div className=\"h-[250px] flex items-center justify-center text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-lg mb-2\"></p>\r\n                <p>No ESG data available</p>\r\n                <p className=\"text-sm\">Add data entries to generate visualizations</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n        const finalData = defaultData;\r\n        \r\n        return (\r\n          <div className=\"h-[250px]\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <PieChart margin={{ top: 20, right: 30, left: 20, bottom: 20 }}>\r\n                <Pie\r\n                  data={finalData}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  labelLine={false}\r\n                  label={({ name, percent }) => `${name} (${(percent * 100).toFixed(0)}%)`}\r\n                  outerRadius={80}\r\n                  dataKey=\"value\"\r\n                >\r\n                  {finalData.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip />\r\n                <Legend />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  const refreshData = async () => {\r\n    try {\r\n      console.log('Refreshing data...');\r\n      \r\n      // Check localStorage first - also try direct localStorage access as fallback\r\n      let localData = await getStoredData();\r\n      \r\n      // If getStoredData returns empty, try direct localStorage access\r\n      if (!localData || localData.length === 0) {\r\n        try {\r\n          const directData = localStorage.getItem('esgData');\r\n          if (directData) {\r\n            const parsed = JSON.parse(directData);\r\n            if (Array.isArray(parsed) && parsed.length > 0) {\r\n              console.log('Found data in direct localStorage access:', parsed);\r\n              localData = parsed;\r\n            }\r\n          }\r\n        } catch (err) {\r\n          console.warn('Failed to read direct localStorage:', err);\r\n        }\r\n      }\r\n      console.log('Retrieved data:', localData);\r\n      \r\n      if (localData && localData.length > 0) {\r\n        // Normalize and dedupe stored entries before using them\r\n        const convertedData = dedupeEntries(localData.map(item => ({\r\n          ...item,\r\n          status: item.status || 'Submitted',\r\n          timestamp: item.timestamp || item.submissionDate || new Date().toISOString()\r\n        })));\r\n\r\n        console.log('Converted data:', convertedData);\r\n        setData(convertedData);\r\n        const normalized = normalizeData(convertedData);\r\n        console.log('Normalized data:', normalized);\r\n        setYearlyData(aggregateByYear(normalized));\r\n        setOverallSummary(aggregateOverall(normalized));\r\n        \r\n        // Calculate framework compliance\r\n        if (normalized.length > 0) {\r\n          const griCompliance = validateFrameworkCompliance(normalized, 'GRI');\r\n          const sasbCompliance = validateFrameworkCompliance(normalized, 'SASB');\r\n          const tcfdCompliance = validateFrameworkCompliance(normalized, 'TCFD');\r\n          const brsrCompliance = validateFrameworkCompliance(normalized, 'BRSR');\r\n          setComplianceSummary({ GRI: griCompliance, SASB: sasbCompliance, TCFD: tcfdCompliance, BRSR: brsrCompliance });\r\n        }\r\n        \r\n        if (normalized.length > 0) {\r\n          const years = [...new Set(normalized.map(item => item.year))].filter(year => year && !isNaN(year)).sort((a, b) => b - a);\r\n          if (years.length > 0) {\r\n            setSelectedYear(years[0]);\r\n          }\r\n        }\r\n        return;\r\n      }\r\n      \r\n      console.log('No data found in storage');\r\n      // No sample data fallback: if no backend/local data, show empty reports\r\n      setData([]);\r\n      setYearlyData([]);\r\n      setOverallSummary({});\r\n      return;\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n      setData([]);\r\n      setYearlyData([]);\r\n      setOverallSummary({});\r\n    }\r\n  };\r\n\r\n  const updateStatus = async (index, newStatus) => {\r\n    const updatedData = [...data];\r\n    if (updatedData[index]) {\r\n      updatedData[index].status = newStatus;\r\n      updatedData[index].lastModified = new Date().toISOString();\r\n      setData(updatedData);\r\n      \r\n      // Update via backend API\r\n      try {\r\n        const currentUser = parseInt(localStorage.getItem('currentUser')) || 1;\r\n        const backendData = {\r\n          companyName: updatedData[index].companyName,\r\n          sector: updatedData[index].sector,\r\n          region: updatedData[index].region,\r\n          reportingYear: updatedData[index].reportingYear,\r\n          environmental: updatedData[index].category === 'environmental' ? { [updatedData[index].metric]: updatedData[index].value } : {},\r\n          social: updatedData[index].category === 'social' ? { [updatedData[index].metric]: updatedData[index].value } : {},\r\n          governance: updatedData[index].category === 'governance' ? { [updatedData[index].metric]: updatedData[index].value } : {},\r\n          userId: currentUser\r\n        };\r\n        \r\n        await APIService.saveESGData(backendData);\r\n      } catch (error) {\r\n        console.error('Failed to update status:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Remove duplicates from currently loaded data and persist cleaned data to localStorage\r\n  const handleRemoveDuplicates = () => {\r\n    const deduped = dedupeEntries(data);\r\n    if (deduped.length === data.length) {\r\n      showToast('No duplicate entries found', 'info');\r\n      return;\r\n    }\r\n    try {\r\n      localStorage.setItem('esgData', JSON.stringify(deduped));\r\n    } catch (err) {\r\n      console.warn('Failed to write deduped data to localStorage', err);\r\n    }\r\n    setData(deduped);\r\n    const normalized = normalizeData(deduped);\r\n    setYearlyData(aggregateByYear(normalized));\r\n    setOverallSummary(aggregateOverall(normalized));\r\n    showToast(`Removed ${data.length - deduped.length} duplicate entries`, 'success');\r\n  };\r\n\r\n  const getFilteredAndSortedData = () => {\r\n    let filtered = normalizeData(data).filter((item) => {\r\n      const matchesStatus = filterStatus === \"All\" || item.status === filterStatus;\r\n      const matchesSearch = searchTerm === \"\" || \r\n        (item.companyName && item.companyName.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n        (item.metric && item.metric.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n        (item.category && item.category.toLowerCase().includes(searchTerm.toLowerCase()));\r\n      return matchesStatus && matchesSearch;\r\n    });\r\n\r\n    return filtered.sort((a, b) => {\r\n      let aVal = a[sortField];\r\n      let bVal = b[sortField];\r\n      \r\n      if (sortField === 'timestamp') {\r\n        aVal = new Date(aVal || 0).getTime();\r\n        bVal = new Date(bVal || 0).getTime();\r\n      } else if (sortField === 'value') {\r\n        aVal = parseFloat(aVal) || 0;\r\n        bVal = parseFloat(bVal) || 0;\r\n      }\r\n      \r\n      if (sortOrder === 'asc') {\r\n        return aVal > bVal ? 1 : -1;\r\n      } else {\r\n        return aVal < bVal ? 1 : -1;\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortOrder('asc');\r\n    }\r\n  };\r\n\r\n  const toggleSelectAll = () => {\r\n    if (selectedItems.length === filteredData.length) {\r\n      setSelectedItems([]);\r\n    } else {\r\n      setSelectedItems(filteredData.map((_, idx) => idx));\r\n    }\r\n  };\r\n\r\n  const toggleSelectItem = (index) => {\r\n    if (selectedItems.includes(index)) {\r\n      setSelectedItems(selectedItems.filter(i => i !== index));\r\n    } else {\r\n      setSelectedItems([...selectedItems, index]);\r\n    }\r\n  };\r\n\r\n  const bulkApprove = async () => {\r\n    if (selectedItems.length === 0) {\r\n      showToast('Please select items to approve', 'warning');\r\n      return;\r\n    }\r\n    \r\n    const updatedData = [...data];\r\n    const currentUser = parseInt(localStorage.getItem('currentUser')) || 1;\r\n    \r\n    for (const index of selectedItems) {\r\n      if (updatedData[index]) {\r\n        updatedData[index].status = 'Submitted';\r\n        updatedData[index].lastModified = new Date().toISOString();\r\n        \r\n        try {\r\n          const backendData = {\r\n            companyName: updatedData[index].companyName,\r\n            sector: updatedData[index].sector,\r\n            region: updatedData[index].region,\r\n            reportingYear: updatedData[index].reportingYear,\r\n            environmental: updatedData[index].category === 'environmental' ? { [updatedData[index].metric]: updatedData[index].value } : {},\r\n            social: updatedData[index].category === 'social' ? { [updatedData[index].metric]: updatedData[index].value } : {},\r\n            governance: updatedData[index].category === 'governance' ? { [updatedData[index].metric]: updatedData[index].value } : {},\r\n            userId: currentUser\r\n          };\r\n          \r\n          await APIService.saveESGData(backendData);\r\n        } catch (error) {\r\n          console.error('Failed to approve item:', index, error);\r\n        }\r\n      }\r\n    }\r\n    \r\n    setData(updatedData);\r\n    setSelectedItems([]);\r\n    showToast(`${selectedItems.length} items approved successfully`, 'success');\r\n  };\r\n\r\n  const viewDetails = (item) => {\r\n    const details = `Details:\\nCompany: ${item.companyName || 'N/A'}\\nCategory: ${item.category || 'N/A'}\\nMetric: ${item.metric || 'N/A'}\\nValue: ${item.value || 'N/A'}\\nDate: ${item.timestamp ? new Date(item.timestamp).toLocaleString() : 'N/A'}`;\r\n    showToast(details, 'info');\r\n  };\r\n\r\n  const deleteItem = async (displayIndex) => {\r\n    if (window.confirm('Are you sure you want to delete this item?')) {\r\n      const filteredData = getFilteredAndSortedData();\r\n      const itemToDelete = filteredData[displayIndex];\r\n      \r\n      try {\r\n        // Attempt backend delete if id available\r\n        let backendDeleted = false;\r\n        if (itemToDelete && itemToDelete.id) {\r\n          try {\r\n            const resp = await APIService.request(`/esg/data/${itemToDelete.id}`, { method: 'DELETE' });\r\n            if (!resp || resp.error) throw new Error(resp?.error || 'Delete failed');\r\n            backendDeleted = true;\r\n          } catch (err) {\r\n            console.warn('Backend delete failed, will fallback to localStorage:', err);\r\n          }\r\n        }\r\n\r\n        // Remove from localStorage 'esgData' array\r\n        try {\r\n          const existing = JSON.parse(localStorage.getItem('esgData') || '[]');\r\n          const filtered = Array.isArray(existing) ? existing.filter(e => {\r\n            if (!itemToDelete) return true;\r\n            if (e.id && itemToDelete.id) return e.id !== itemToDelete.id;\r\n            // fallback compare by timestamp and company\r\n            return !(e.timestamp === itemToDelete.timestamp && e.companyName === itemToDelete.companyName && e.category === itemToDelete.category && e.metric === itemToDelete.metric);\r\n          }) : [];\r\n          localStorage.setItem('esgData', JSON.stringify(filtered));\r\n        } catch (err) {\r\n          console.warn('Failed to update localStorage during delete:', err);\r\n        }\r\n\r\n        // Skip esgDB removal as it's not defined\r\n\r\n        // Update UI state by removing the item from `data`\r\n        try {\r\n          setData(prev => prev.filter(d => {\r\n            if (!itemToDelete) return true;\r\n            if (d.id && itemToDelete.id) return d.id !== itemToDelete.id;\r\n            return !(d.timestamp === itemToDelete.timestamp && d.companyName === itemToDelete.companyName && d.category === itemToDelete.category && d.metric === itemToDelete.metric);\r\n          }));\r\n        } catch (err) {\r\n          console.warn('Failed to update state data after delete:', err);\r\n        }\r\n\r\n        setSelectedItems([]);\r\n        showToast('Item deleted successfully', 'success');\r\n      } catch (error) {\r\n        console.error('Failed to delete item:', error);\r\n        showToast('Failed to delete item', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshData();\r\n    \r\n\r\n    \r\n    // Reduce API calls - update every 30 seconds instead of 5\r\n    const interval = setInterval(refreshData, 30000);\r\n    \r\n    const cleanup = () => clearInterval(interval);\r\n    \r\n    // Add print styles\r\n    const printStyles = `\r\n      @media print {\r\n        .no-print { display: none !important; }\r\n        .print-break { page-break-before: always; }\r\n        body { font-size: 12pt; }\r\n        .bg-white { background: white !important; }\r\n        .shadow { box-shadow: none !important; }\r\n        .rounded-xl { border-radius: 0 !important; }\r\n      }\r\n    `;\r\n    \r\n    const styleSheet = document.createElement('style');\r\n    styleSheet.textContent = printStyles;\r\n    document.head.appendChild(styleSheet);\r\n    \r\n    return cleanup;\r\n  }, []);\r\n\r\n  const chartData = () => {\r\n    const normalized = normalizeData(data);\r\n    const categoryCount = {};\r\n    normalized.forEach((item) => {\r\n      const category = item.category.charAt(0).toUpperCase() + item.category.slice(1);\r\n      if (!categoryCount[category]) categoryCount[category] = 0;\r\n      categoryCount[category]++;\r\n    });\r\n    return Object.entries(categoryCount).map(([name, value]) => ({ name, value }));\r\n  };\r\n\r\n  const filteredData = normalizeData(data).filter((item) => {\r\n    return filterStatus === \"All\" || item.status === filterStatus;\r\n  });\r\n\r\n  const exportPDFSimple = () => {\r\n    (async () => {\r\n      const esgData = await getStoredData();\r\n      const companyName = (esgData && esgData.length > 0 && esgData[0].companyName) || 'Company';\r\n      const pdf = generateESGPDF(selectedReport, esgData, {\r\n        companyName,\r\n        reportPeriod: selectedYear,\r\n        includeCharts: true\r\n      });\r\n      \r\n      const filename = `ESG-Report-${selectedReport.replace(/\\s+/g, '-')}-${new Date().toISOString().split('T')[0]}.pdf`;\r\n      pdf.save(filename);\r\n      showToast(`${selectedReport} report generated successfully!`, 'success');\r\n    })();\r\n  };\r\n  \r\n  const exportPDF = async () => {\r\n    // Use professional PDF generator\r\n    const esgData = await getStoredData();\r\n    const normalizedData = normalizeData(esgData);\r\n\r\n    const companyName = (esgData && esgData.length > 0 && esgData[0].companyName) || 'Company';\r\n    const pdf = generateProfessionalESGReport(selectedReport, normalizedData, {\r\n      companyName,\r\n      reportPeriod: selectedYear || new Date().getFullYear()\r\n    });\r\n\r\n    const filename = `Professional-ESG-Report-${selectedReport.replace(/\\s+/g, '-')}-${new Date().toISOString().split('T')[0]}.pdf`;\r\n    pdf.save(filename);\r\n    showToast(`Professional ${selectedReport} report generated successfully!`, 'success');\r\n    return;\r\n    \r\n    // Fallback to original generator\r\n    const pdf2 = new jsPDF();\r\n    const normalized = normalizeData(data);\r\n    const envMetrics = getEnvironmentalMetrics();\r\n    const socialMetrics = getSocialMetrics();\r\n    const govMetrics = getGovernanceMetrics();\r\n    const calcMetrics = getCalculatedMetrics();\r\n    \r\n    // Company Header\r\n    pdf.setFontSize(24);\r\n    pdf.setTextColor(0, 102, 51);\r\n    pdf.text('ESG SUSTAINABILITY REPORT', 20, 25);\r\n    \r\n    pdf.setFontSize(16);\r\n    pdf.setTextColor(0, 0, 0);\r\n    pdf.text(`Framework: ${selectedReport}`, 20, 40);\r\n    pdf.setFontSize(12);\r\n    pdf.text(`Report Period: ${new Date().getFullYear()}`, 20, 50);\r\n    pdf.text(`Generated: ${new Date().toLocaleDateString()}`, 20, 60);\r\n    pdf.text(`Total Data Points: ${normalized.length}`, 20, 70);\r\n    \r\n    // Executive Summary\r\n    let yPos = 90;\r\n    pdf.setFontSize(16);\r\n    pdf.setTextColor(0, 102, 51);\r\n    pdf.text('EXECUTIVE SUMMARY', 20, yPos);\r\n    yPos += 15;\r\n    \r\n    pdf.setFontSize(12);\r\n    pdf.setTextColor(0, 0, 0);\r\n    if (overallSummary.overall !== '-') {\r\n      pdf.text(`Overall ESG Performance Score: ${overallSummary.overall}/100`, 20, yPos);\r\n      yPos += 10;\r\n    }\r\n    \r\n    // Performance by Pillar\r\n    pdf.text('Performance by ESG Pillar:', 20, yPos);\r\n    yPos += 10;\r\n    if (overallSummary.environmental !== '-') {\r\n      pdf.text(` Environmental: ${overallSummary.environmental}/100 - ${getPerformanceRating(overallSummary.environmental)}`, 25, yPos);\r\n      yPos += 8;\r\n    }\r\n    if (overallSummary.social !== '-') {\r\n      pdf.text(` Social: ${overallSummary.social}/100 - ${getPerformanceRating(overallSummary.social)}`, 25, yPos);\r\n      yPos += 8;\r\n    }\r\n    if (overallSummary.governance !== '-') {\r\n      pdf.text(` Governance: ${overallSummary.governance}/100 - ${getPerformanceRating(overallSummary.governance)}`, 25, yPos);\r\n      yPos += 8;\r\n    }\r\n    \r\n    yPos += 10;\r\n    pdf.text(`Key Highlights: ${normalized.length} metrics tracked across ${yearlyData.length} reporting periods`, 20, yPos);\r\n    \r\n    // Environmental Section\r\n    yPos += 20;\r\n    if (yPos > 250) { pdf.addPage(); yPos = 30; }\r\n    pdf.setFontSize(16);\r\n    pdf.setTextColor(0, 102, 51);\r\n    pdf.text('ENVIRONMENTAL PERFORMANCE', 20, yPos);\r\n    yPos += 15;\r\n    \r\n    pdf.setFontSize(12);\r\n    pdf.setTextColor(0, 0, 0);\r\n    envMetrics.forEach(metric => {\r\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\r\n      pdf.text(`${metric.name}: ${metric.value}`, 20, yPos);\r\n      yPos += 8;\r\n    });\r\n    \r\n    // Social Section\r\n    yPos += 15;\r\n    if (yPos > 250) { pdf.addPage(); yPos = 30; }\r\n    pdf.setFontSize(16);\r\n    pdf.setTextColor(0, 102, 51);\r\n    pdf.text('SOCIAL PERFORMANCE', 20, yPos);\r\n    yPos += 15;\r\n    \r\n    pdf.setFontSize(12);\r\n    pdf.setTextColor(0, 0, 0);\r\n    socialMetrics.forEach(metric => {\r\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\r\n      pdf.text(`${metric.name}: ${metric.value}`, 20, yPos);\r\n      yPos += 8;\r\n    });\r\n    \r\n    // Governance Section\r\n    yPos += 15;\r\n    if (yPos > 250) { pdf.addPage(); yPos = 30; }\r\n    pdf.setFontSize(16);\r\n    pdf.setTextColor(0, 102, 51);\r\n    pdf.text('GOVERNANCE PERFORMANCE', 20, yPos);\r\n    yPos += 15;\r\n    \r\n    pdf.setFontSize(12);\r\n    pdf.setTextColor(0, 0, 0);\r\n    govMetrics.forEach(metric => {\r\n      if (yPos > 270) { pdf.addPage(); yPos = 30; }\r\n      pdf.text(`${metric.name}: ${metric.value}`, 20, yPos);\r\n      yPos += 8;\r\n    });\r\n    \r\n    // Calculated Metrics\r\n    if (calcMetrics.length > 0) {\r\n      yPos += 15;\r\n      if (yPos > 250) { pdf.addPage(); yPos = 30; }\r\n      pdf.setFontSize(16);\r\n      pdf.setTextColor(0, 102, 51);\r\n      pdf.text('KEY PERFORMANCE INDICATORS', 20, yPos);\r\n      yPos += 15;\r\n      \r\n      pdf.setFontSize(12);\r\n      pdf.setTextColor(0, 0, 0);\r\n      calcMetrics.forEach(metric => {\r\n        if (yPos > 270) { pdf.addPage(); yPos = 30; }\r\n        pdf.text(`${metric.name}: ${metric.value}`, 20, yPos);\r\n        yPos += 8;\r\n      });\r\n    }\r\n    \r\n    // Year-over-Year Analysis\r\n    if (yearlyData.length > 0) {\r\n      pdf.addPage();\r\n      yPos = 30;\r\n      pdf.setFontSize(16);\r\n      pdf.setTextColor(0, 102, 51);\r\n      pdf.text('YEAR-OVER-YEAR PERFORMANCE ANALYSIS', 20, yPos);\r\n      yPos += 20;\r\n      \r\n      pdf.setFontSize(10);\r\n      pdf.setTextColor(0, 0, 0);\r\n      // Table headers\r\n      pdf.text('Year', 20, yPos);\r\n      pdf.text('Environmental', 60, yPos);\r\n      pdf.text('Social', 100, yPos);\r\n      pdf.text('Governance', 140, yPos);\r\n      pdf.text('Overall', 180, yPos);\r\n      yPos += 10;\r\n      \r\n      // Draw header line\r\n      pdf.line(20, yPos - 2, 200, yPos - 2);\r\n      \r\n      // Table data\r\n      yearlyData.forEach(row => {\r\n        if (yPos > 270) {\r\n          pdf.addPage();\r\n          yPos = 30;\r\n        }\r\n        pdf.text(row.year.toString(), 20, yPos);\r\n        pdf.text(row.environmental.toString(), 60, yPos);\r\n        pdf.text(row.social.toString(), 100, yPos);\r\n        pdf.text(row.governance.toString(), 140, yPos);\r\n        pdf.text(row.average.toString(), 180, yPos);\r\n        yPos += 8;\r\n      });\r\n    }\r\n    \r\n    // Compliance Status\r\n    pdf.addPage();\r\n    yPos = 30;\r\n    pdf.setFontSize(16);\r\n    pdf.setTextColor(0, 102, 51);\r\n    pdf.text('REGULATORY COMPLIANCE STATUS', 20, yPos);\r\n    yPos += 20;\r\n    \r\n    pdf.setFontSize(12);\r\n    pdf.setTextColor(0, 0, 0);\r\n    pdf.text('This report demonstrates compliance with:', 20, yPos);\r\n    yPos += 15;\r\n    \r\n    if (normalized.length > 0) {\r\n      const frameworks = ['GRI Standards', 'SEBI BRSR', 'TCFD Guidelines', 'SASB Standards'];\r\n      frameworks.forEach(framework => {\r\n        pdf.text(` ${framework}`, 25, yPos);\r\n        yPos += 8;\r\n      });\r\n    } else {\r\n      pdf.text(' No compliance data available', 25, yPos);\r\n      yPos += 8;\r\n    }\r\n    \r\n    yPos += 10;\r\n    pdf.text('Data Quality Assurance:', 20, yPos);\r\n    yPos += 10;\r\n    if (normalized.length > 0) {\r\n      pdf.text(` ${normalized.length} verified data points`, 25, yPos);\r\n      yPos += 8;\r\n      pdf.text(' Third-party verification where applicable', 25, yPos);\r\n      yPos += 8;\r\n      pdf.text(' Audit trail maintained for all entries', 25, yPos);\r\n    } else {\r\n      pdf.text(' No data points available for verification', 25, yPos);\r\n      yPos += 8;\r\n    }\r\n    \r\n    // Footer\r\n    yPos += 30;\r\n    pdf.setFontSize(10);\r\n    pdf.setTextColor(128, 128, 128);\r\n    pdf.text('This report was generated automatically from verified ESG data.', 20, yPos);\r\n    pdf.text(`Report ID: ESG-${Date.now()}`, 20, yPos + 10);\r\n    \r\n    // Save PDF with proper filename\r\n    const reportFilename = `ESG-Report-${selectedReport.replace(/\\s+/g, '-')}-${new Date().toISOString().split('T')[0]}.pdf`;\r\n    pdf.save(reportFilename);\r\n    \r\n    // Show success message\r\n    showToast(`${selectedReport} report generated successfully!`, 'success');\r\n  };\r\n  \r\n  const getPerformanceRating = (score) => {\r\n    const numScore = parseFloat(score);\r\n    if (isNaN(numScore)) return 'No Data';\r\n    if (numScore >= 80) return 'Excellent';\r\n    if (numScore >= 70) return 'Good';\r\n    if (numScore >= 60) return 'Satisfactory';\r\n    if (numScore >= 50) return 'Needs Improvement';\r\n    return 'Poor';\r\n  };\r\n\r\n  const exportCSV = () => {\r\n    const csvRows = [\r\n      [\"Category\", \"Metric\", \"Value\", \"Description\", \"Status\"],\r\n      ...filteredData.map((item) => [\r\n        item.category,\r\n        item.metric,\r\n        item.value,\r\n        item.description,\r\n        item.status || \"Pending\"\r\n      ]),\r\n    ];\r\n\r\n    const csvContent =\r\n      \"data:text/csv;charset=utf-8,\" +\r\n      csvRows.map((row) => row.map((x) => `\"${x}\"`).join(\",\")).join(\"\\n\");\r\n\r\n    const encodedUri = encodeURI(csvContent);\r\n    const link = document.createElement(\"a\");\r\n    link.setAttribute(\"href\", encodedUri);\r\n    link.setAttribute(\"download\", `${selectedReport}-report.csv`);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const showToast = (message, type = 'info') => {\r\n    setToast({ message, type });\r\n    setTimeout(() => setToast(null), 3000);\r\n  };\r\n\r\n  // Convert new ESG form data to old format for compatibility\r\n  const convertNewFormatToOld = (newData) => {\r\n    const converted = [];\r\n    const timestamp = newData.submissionDate || new Date().toISOString();\r\n    \r\n    // Environmental metrics\r\n    const envFields = {\r\n      scope1Emissions: 'Scope 1 Emissions',\r\n      scope2Emissions: 'Scope 2 Emissions', \r\n      scope3Emissions: 'Scope 3 Emissions',\r\n      energyConsumption: 'Energy Consumption',\r\n      renewableEnergyPercentage: 'Renewable Energy Percentage',\r\n      waterWithdrawal: 'Water Withdrawal',\r\n      wasteGenerated: 'Waste Generated',\r\n      wasteRecycled: 'Waste Recycled',\r\n      environmentalFines: 'Environmental Fines'\r\n    };\r\n    \r\n    Object.entries(envFields).forEach(([key, label]) => {\r\n      if (newData[key] && newData[key] !== '') {\r\n        converted.push({\r\n          companyName: newData.companyName,\r\n          category: 'environmental',\r\n          metric: key,\r\n          value: parseFloat(newData[key]),\r\n          description: label,\r\n          status: 'Submitted',\r\n          timestamp,\r\n          reportingYear: newData.reportingYear,\r\n          sector: newData.sector,\r\n          region: newData.region\r\n        });\r\n      }\r\n    });\r\n    \r\n    // Social metrics\r\n    const socialFields = {\r\n      totalEmployees: 'Total Employees',\r\n      femaleEmployeesPercentage: 'Female Employees Percentage',\r\n      minorityEmployeesPercentage: 'Minority Employees Percentage',\r\n      employeeTurnoverRate: 'Employee Turnover Rate',\r\n      lostTimeInjuryRate: 'Lost Time Injury Rate',\r\n      fatalityRate: 'Fatality Rate',\r\n      trainingHoursPerEmployee: 'Training Hours per Employee',\r\n      communityInvestment: 'Community Investment',\r\n      humanRightsViolations: 'Human Rights Violations',\r\n      supplierAssessments: 'Supplier Assessments'\r\n    };\r\n    \r\n    Object.entries(socialFields).forEach(([key, label]) => {\r\n      if (newData[key] && newData[key] !== '') {\r\n        converted.push({\r\n          companyName: newData.companyName,\r\n          category: 'social',\r\n          metric: key,\r\n          value: parseFloat(newData[key]),\r\n          description: label,\r\n          status: 'Submitted',\r\n          timestamp,\r\n          reportingYear: newData.reportingYear,\r\n          sector: newData.sector,\r\n          region: newData.region\r\n        });\r\n      }\r\n    });\r\n    \r\n    // Governance metrics\r\n    const govFields = {\r\n      boardSize: 'Board Size',\r\n      independentDirectorsPercentage: 'Independent Directors Percentage',\r\n      femaleDirectorsPercentage: 'Female Directors Percentage',\r\n      ethicsTrainingCompletion: 'Ethics Training Completion',\r\n      corruptionIncidents: 'Corruption Incidents',\r\n      dataBreaches: 'Data Breaches',\r\n      regulatoryFines: 'Regulatory Fines',\r\n      cybersecurityScore: 'Cybersecurity Score'\r\n    };\r\n    \r\n    Object.entries(govFields).forEach(([key, label]) => {\r\n      if (newData[key] && newData[key] !== '') {\r\n        converted.push({\r\n          companyName: newData.companyName,\r\n          category: 'governance',\r\n          metric: key,\r\n          value: parseFloat(newData[key]),\r\n          description: label,\r\n          status: 'Submitted',\r\n          timestamp,\r\n          reportingYear: newData.reportingYear,\r\n          sector: newData.sector,\r\n          region: newData.region\r\n        });\r\n      }\r\n    });\r\n    \r\n    return converted;\r\n  };\r\n\r\n  const canViewReports = RBACManager.hasPermission(currentUser.role, PERMISSIONS.VIEW_REPORTS);\r\n  const canExportReports = RBACManager.hasPermission(currentUser.role, PERMISSIONS.EXPORT_DATA);\r\n\r\n  return (\r\n    <div className={`min-h-screen transition-colors duration-300 ${theme.bg.gradient}`}>\r\n      <ProfessionalHeader \r\n        onLogout={() => {\r\n          window.location.href = \"/login\";\r\n        }}\r\n        currentUser=\"admin@esgenius.com\"\r\n        title=\"ESG Reports & Analytics\"\r\n        subtitle=\"Comprehensive ESG Performance Reporting\"\r\n        showBreadcrumb={true}\r\n        breadcrumbItems={[\r\n          { label: 'Dashboard', href: '/' },\r\n          { label: 'Reports', href: '/reports', active: true }\r\n        ]}\r\n        actions={[\r\n            {\r\n              label: 'Save JSON',\r\n              onClick: async () => { \r\n                await handleSaveFullReport();\r\n              },\r\n              variant: 'outline'\r\n            },\r\n            {\r\n              label: 'Save PDF',\r\n              onClick: async () => { \r\n                setShowPreview(false);\r\n                await exportPDF();\r\n              },\r\n              variant: 'outline'\r\n            },\r\n          {\r\n            label: 'Refresh Data',\r\n            onClick: () => {\r\n              refreshData();\r\n              showToast('Data refreshed successfully!', 'success');\r\n            },\r\n            variant: 'outline',\r\n            icon: ''\r\n          },\r\n          {\r\n            label: 'View Data Entry',\r\n            onClick: () => window.location.href = '/data-entry',\r\n            variant: 'primary',\r\n            icon: ''\r\n          }\r\n        ]}\r\n      />\r\n\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n\r\n\r\n        {/* Framework Compliance Summary */}\r\n        <FrameworkComplianceSummary complianceData={complianceSummary} />\r\n\r\n        {/* Data Status Indicator */}\r\n        <div className={`mb-6 p-4 rounded-lg ${theme.bg.subtle} border-l-4 border-blue-500`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <span className=\"text-2xl\"></span>\r\n              <div>\r\n                <h3 className={`font-semibold ${theme.text.primary}`}>Data Status</h3>\r\n                <p className={`text-sm ${theme.text.secondary}`}>\r\n                  {data.length > 0 \r\n                    ? `${data.length} ESG data points loaded from ${data[0]?.companyName || 'your submissions'}`\r\n                    : 'No ESG data found. Submit data via Data Entry to generate reports.'\r\n                  }\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n                {data.length === 0 ? (\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      onClick={() => window.location.href = '/data-entry'}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm\"\r\n                    >\r\n                       Add Data\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    <button\r\n                      onClick={() => window.location.href = '/data-entry'}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm\"\r\n                    >\r\n                       Add Data\r\n                    </button>\r\n                    <button\r\n                      onClick={analyzeFrameworkCompliance}\r\n                      className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm whitespace-nowrap\"\r\n                    >\r\n                       Framework Compliance\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setShowFrameworkReports(true)}\r\n                      className=\"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm whitespace-nowrap\"\r\n                    >\r\n                       Framework Reports\r\n                    </button>\r\n                    <button\r\n                      onClick={clearAllData}\r\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm\"\r\n                      title=\"Clear all ESG data\"\r\n                    >\r\n                       Clear Data\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              <span className={`px-2 py-1 rounded text-xs ${\r\n                data.length > 0 \r\n                  ? 'bg-green-100 text-green-800' \r\n                  : 'bg-yellow-100 text-yellow-800'\r\n              }`}>\r\n                {data.length > 0 ? 'Data Available' : 'No Data'}\r\n              </span>\r\n              {data.length > 0 && (\r\n                <span className=\"px-2 py-1 rounded text-xs bg-blue-100 text-blue-800\">\r\n                  GRI/SASB Ready\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {!canViewReports && (\r\n          <Alert \r\n            type=\"warning\"\r\n            title=\"Access Restricted\"\r\n            message=\"You do not have permission to view reports. Please contact your administrator.\"\r\n            className=\"mb-6\"\r\n          />\r\n        )}\r\n\r\n        {/* Enhanced Overall Summary Section */}\r\n        <div className={`p-6 rounded-xl shadow-lg mb-8 ${theme.bg.card}`}>\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <div>\r\n              <h2 className={`text-2xl font-bold ${theme.text.primary}`}>ESG Performance Overview</h2>\r\n              <p className={`text-sm ${theme.text.secondary}`}>Comprehensive sustainability metrics dashboard</p>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className={`text-xs px-2 py-1 rounded-full ${isDark ? 'bg-green-900 text-green-300' : 'bg-green-100 text-green-800'}`}>\r\n                Live Data\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          {overallSummary && overallSummary.environmental !== undefined ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              <MetricCard \r\n                icon=\"\"\r\n                value={overallSummary.environmental}\r\n                label=\"Environmental Score\"\r\n                trend=\" +2.3%\"\r\n                trendColor=\"success\"\r\n                progress={parseFloat(overallSummary.environmental) || 0}\r\n              />\r\n              <MetricCard \r\n                icon=\"\"\r\n                value={overallSummary.social}\r\n                label=\"Social Score\"\r\n                trend=\" +1.8%\"\r\n                trendColor=\"success\"\r\n                progress={parseFloat(overallSummary.social) || 0}\r\n              />\r\n              <MetricCard \r\n                icon=\"\"\r\n                value={overallSummary.governance}\r\n                label=\"Governance Score\"\r\n                trend=\" 0.0%\"\r\n                trendColor=\"neutral\"\r\n                progress={parseFloat(overallSummary.governance) || 0}\r\n              />\r\n              <MetricCard \r\n                icon=\"\"\r\n                value={overallSummary.overall}\r\n                label=\"Overall ESG Score\"\r\n                trend=\" +1.4%\"\r\n                trendColor=\"success\"\r\n                progress={parseFloat(overallSummary.overall) || 0}\r\n              />\r\n            </div>\r\n          ) : (\r\n            <Alert \r\n              type=\"info\"\r\n              title=\"No Data Available\"\r\n              message=\"Start by adding ESG data entries to generate comprehensive reports and analytics.\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Enhanced Per-Year Breakdown */}\r\n        <div className={`p-6 rounded-xl shadow-lg mb-8 ${theme.bg.card}`}>\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h2 className={`text-xl font-bold ${theme.text.primary}`}>Year-over-Year Performance</h2>\r\n            <div className=\"flex items-center gap-4\">\r\n              <label className={`text-sm font-medium ${theme.text.secondary}`}>Select Year:</label>\r\n              <select\r\n                value={selectedYear}\r\n                onChange={(e) => setSelectedYear(parseInt(e.target.value))}\r\n                className={`border rounded-lg px-3 py-2 text-sm ${theme.bg.input} ${theme.border.input} ${theme.text.primary}`}\r\n                disabled={yearlyData.length === 0}\r\n              >\r\n                {yearlyData.length > 0 ? (\r\n                  yearlyData\r\n                    .filter(entry => entry.year && !isNaN(entry.year))\r\n                    .sort((a, b) => b.year - a.year)\r\n                    .map(entry => (\r\n                      <option key={entry.year} value={entry.year}>\r\n                        {entry.year}\r\n                      </option>\r\n                    ))\r\n                ) : (\r\n                  <option value={new Date().getFullYear()}>\r\n                    {new Date().getFullYear()} (No Data)\r\n                  </option>\r\n                )}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"overflow-x-auto\">\r\n            <table className={`min-w-full text-sm ${theme.text.primary}`}>\r\n              <thead>\r\n                <tr className={`${theme.bg.subtle}`}>\r\n                  <th className=\"px-4 py-3 text-left font-semibold\">Year</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold\">Environmental</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold\">Social</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold\">Governance</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold\">Overall Avg</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200\">\r\n                {yearlyData.length > 0 ? yearlyData.map((row) => (\r\n                  <tr key={row.year} className={`hover:${theme.bg.subtle} transition-colors duration-200 ${\r\n                    row.year === selectedYear ? `${theme.bg.accent} font-semibold` : ''\r\n                  }`}>\r\n                    <td className=\"px-4 py-3\">{row.year}</td>\r\n                    <td className=\"px-4 py-3\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span>{row.environmental !== '-' ? row.environmental : 'N/A'}</span>\r\n                        {row.environmental !== '-' && (\r\n                          <div className={`w-2 h-2 rounded-full ${\r\n                            parseFloat(row.environmental) >= 70 ? 'bg-green-500' :\r\n                            parseFloat(row.environmental) >= 50 ? 'bg-yellow-500' : 'bg-red-500'\r\n                          }`}></div>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span>{row.social !== '-' ? row.social : 'N/A'}</span>\r\n                        {row.social !== '-' && (\r\n                          <div className={`w-2 h-2 rounded-full ${\r\n                            parseFloat(row.social) >= 70 ? 'bg-green-500' :\r\n                            parseFloat(row.social) >= 50 ? 'bg-yellow-500' : 'bg-red-500'\r\n                          }`}></div>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span>{row.governance !== '-' ? row.governance : 'N/A'}</span>\r\n                        {row.governance !== '-' && (\r\n                          <div className={`w-2 h-2 rounded-full ${\r\n                            parseFloat(row.governance) >= 70 ? 'bg-green-500' :\r\n                            parseFloat(row.governance) >= 50 ? 'bg-yellow-500' : 'bg-red-500'\r\n                          }`}></div>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 font-semibold\">{row.average !== '-' ? row.average : 'N/A'}</td>\r\n                    <td className=\"px-4 py-3\">\r\n                      {row.average !== '-' ? (\r\n                        <span className={`text-xs px-2 py-1 rounded-full ${\r\n                          parseFloat(row.average) >= 70 ? 'bg-green-100 text-green-800' :\r\n                          parseFloat(row.average) >= 50 ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'\r\n                        }`}>\r\n                          {parseFloat(row.average) >= 70 ? 'Excellent' :\r\n                           parseFloat(row.average) >= 50 ? 'Good' : 'Needs Improvement'}\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600\">\r\n                          No Data\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                )) : (\r\n                  <tr>\r\n                    <td colSpan=\"6\" className=\"px-4 py-8 text-center text-gray-500\">\r\n                      <div>\r\n                        <p className=\"text-lg mb-2\"></p>\r\n                        <p>No yearly data available</p>\r\n                        <p className=\"text-sm\">Add ESG data to see year-over-year trends</p>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n      {/* ESG Metrics Tables */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n        {/* Environmental Metrics */}\r\n        <div className=\"bg-white p-6 rounded-xl shadow\">\r\n          <h2 className=\"text-lg font-bold bg-emerald-600 text-white p-3 -m-6 mb-4 rounded-t-xl\">Environmental</h2>\r\n          <table className=\"w-full text-sm\">\r\n            <thead>\r\n              <tr className=\"bg-emerald-600 text-white\">\r\n                <th className=\"text-left p-2\">Metric</th>\r\n                <th className=\"text-left p-2\">Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {getEnvironmentalMetrics().map((metric, i) => (\r\n                <tr key={i} className={i % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>\r\n                  <td className=\"p-2 text-gray-700\">{metric.name}</td>\r\n                  <td className=\"p-2 font-medium\">{metric.value}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Social Metrics */}\r\n        <div className=\"bg-white p-6 rounded-xl shadow\">\r\n          <h2 className=\"text-lg font-bold bg-emerald-600 text-white p-3 -m-6 mb-4 rounded-t-xl\">Social</h2>\r\n          <table className=\"w-full text-sm\">\r\n            <thead>\r\n              <tr className=\"bg-emerald-600 text-white\">\r\n                <th className=\"text-left p-2\">Metric</th>\r\n                <th className=\"text-left p-2\">Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {getSocialMetrics().map((metric, i) => (\r\n                <tr key={i} className={i % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>\r\n                  <td className=\"p-2 text-gray-700\">{metric.name}</td>\r\n                  <td className=\"p-2 font-medium\">{metric.value}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Governance and Auto-Calculated Metrics */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n        {/* Governance Metrics */}\r\n        <div className=\"bg-white p-6 rounded-xl shadow\">\r\n          <h2 className=\"text-lg font-bold bg-emerald-600 text-white p-3 -m-6 mb-4 rounded-t-xl\">Governance</h2>\r\n          <table className=\"w-full text-sm\">\r\n            <thead>\r\n              <tr className=\"bg-emerald-600 text-white\">\r\n                <th className=\"text-left p-2\">Metric</th>\r\n                <th className=\"text-left p-2\">Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {getGovernanceMetrics().map((metric, i) => (\r\n                <tr key={i} className={i % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>\r\n                  <td className=\"p-2 text-gray-700\">{metric.name}</td>\r\n                  <td className=\"p-2 font-medium\">{metric.value}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Auto-Calculated Metrics */}\r\n        <div className=\"bg-white p-6 rounded-xl shadow\">\r\n          <h2 className=\"text-lg font-bold bg-emerald-600 text-white p-3 -m-6 mb-4 rounded-t-xl\">Auto-Calculated Metrics</h2>\r\n          <table className=\"w-full text-sm\">\r\n            <thead>\r\n              <tr className=\"bg-emerald-600 text-white\">\r\n                <th className=\"text-left p-2\">Metric</th>\r\n                <th className=\"text-left p-2\">Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {getCalculatedMetrics().map((metric, i) => (\r\n                <tr key={i} className={i % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>\r\n                  <td className=\"p-2 text-gray-700\">{metric.name}</td>\r\n                  <td className=\"p-2 font-medium\">{metric.value}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n        {/* Enhanced Analytics Charts */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8 no-print\">\r\n          <div className={`p-6 rounded-xl shadow-lg ${theme.bg.card}`}>\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div>\r\n                <h3 className={`text-lg font-bold ${theme.text.primary}`}>Score Distribution</h3>\r\n                <p className={`text-sm ${theme.text.secondary}`}>Current year performance breakdown</p>\r\n              </div>\r\n              <span className={`text-xs px-2 py-1 rounded-full ${\r\n                isDark ? 'bg-blue-900 text-blue-300' : 'bg-blue-100 text-blue-800'\r\n              }`}>\r\n                {selectedYear}\r\n              </span>\r\n            </div>\r\n            <div className=\"h-[250px]\">\r\n              {yearlyData.length > 0 && yearlyData.find(d => d.year === selectedYear) ? (\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                  <BarChart \r\n                    data={[{\r\n                      year: selectedYear,\r\n                      environmental: parseFloat(yearlyData.find(d => d.year === selectedYear)?.environmental) || 0,\r\n                      social: parseFloat(yearlyData.find(d => d.year === selectedYear)?.social) || 0,\r\n                      governance: parseFloat(yearlyData.find(d => d.year === selectedYear)?.governance) || 0\r\n                    }]}\r\n                    margin={{ top: 20, right: 30, left: 20, bottom: 5 }}\r\n                  >\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke={isDark ? '#374151' : '#e5e7eb'} />\r\n                    <XAxis dataKey=\"year\" stroke={isDark ? '#9ca3af' : '#6b7280'} />\r\n                    <YAxis domain={[0, 100]} stroke={isDark ? '#9ca3af' : '#6b7280'} />\r\n                    <Tooltip \r\n                      contentStyle={{\r\n                        backgroundColor: isDark ? '#1f2937' : '#ffffff',\r\n                        border: `1px solid ${isDark ? '#374151' : '#e5e7eb'}`,\r\n                        borderRadius: '8px'\r\n                      }}\r\n                      formatter={(value, name) => [`${value}`, name.charAt(0).toUpperCase() + name.slice(1)]}\r\n                    />\r\n                    <Bar dataKey=\"environmental\" fill=\"#059669\" name=\"Environmental\" radius={[4, 4, 0, 0]} />\r\n                    <Bar dataKey=\"social\" fill=\"#2563eb\" name=\"Social\" radius={[4, 4, 0, 0]} />\r\n                    <Bar dataKey=\"governance\" fill=\"#7c3aed\" name=\"Governance\" radius={[4, 4, 0, 0]} />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              ) : (\r\n                <div className=\"flex items-center justify-center h-full text-gray-500\">\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-lg mb-2\"></p>\r\n                    <p>No data for {selectedYear}</p>\r\n                    <p className=\"text-sm\">Select a different year or add data</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={`p-6 rounded-xl shadow-lg ${theme.bg.card}`}>\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div>\r\n                <h3 className={`text-lg font-bold ${theme.text.primary}`}>Performance Trends</h3>\r\n                <p className={`text-sm ${theme.text.secondary}`}>Multi-year ESG score evolution</p>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"flex items-center gap-1\">\r\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                  <span className=\"text-xs\">E</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-1\">\r\n                  <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\r\n                  <span className=\"text-xs\">S</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-1\">\r\n                  <div className=\"w-2 h-2 bg-purple-500 rounded-full\"></div>\r\n                  <span className=\"text-xs\">G</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"h-[250px]\">\r\n              {yearlyData.length > 0 ? (\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                  <LineChart \r\n                    data={yearlyData.map(year => ({\r\n                      year: year.year,\r\n                      environmental: parseFloat(year.environmental) || 0,\r\n                      social: parseFloat(year.social) || 0,\r\n                      governance: parseFloat(year.governance) || 0\r\n                    }))}\r\n                    margin={{ top: 20, right: 30, left: 20, bottom: 5 }}\r\n                  >\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke={isDark ? '#374151' : '#e5e7eb'} />\r\n                    <XAxis dataKey=\"year\" stroke={isDark ? '#9ca3af' : '#6b7280'} />\r\n                    <YAxis domain={[0, 100]} stroke={isDark ? '#9ca3af' : '#6b7280'} />\r\n                    <Tooltip \r\n                      contentStyle={{\r\n                        backgroundColor: isDark ? '#1f2937' : '#ffffff',\r\n                        border: `1px solid ${isDark ? '#374151' : '#e5e7eb'}`,\r\n                        borderRadius: '8px'\r\n                      }}\r\n                      formatter={(value, name) => [`${value}`, name.charAt(0).toUpperCase() + name.slice(1)]}\r\n                    />\r\n                    <Line type=\"monotone\" dataKey=\"environmental\" stroke=\"#059669\" strokeWidth={3} dot={{ fill: '#059669', strokeWidth: 2, r: 4 }} />\r\n                    <Line type=\"monotone\" dataKey=\"social\" stroke=\"#2563eb\" strokeWidth={3} dot={{ fill: '#2563eb', strokeWidth: 2, r: 4 }} />\r\n                    <Line type=\"monotone\" dataKey=\"governance\" stroke=\"#7c3aed\" strokeWidth={3} dot={{ fill: '#7c3aed', strokeWidth: 2, r: 4 }} />\r\n                  </LineChart>\r\n                </ResponsiveContainer>\r\n              ) : (\r\n                <div className=\"flex items-center justify-center h-full text-gray-500\">\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-lg mb-2\"></p>\r\n                    <p>No trend data available</p>\r\n                    <p className=\"text-sm\">Add multi-year data to see trends</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n        {/* AI Insights Section */}\r\n        {data.length > 0 && (\r\n          <div className={`border rounded-lg p-4 mb-6 ${isDark ? 'bg-purple-900/30 border-purple-700' : 'bg-purple-50 border-purple-200'}`}>\r\n            <h3 className={`font-medium mb-3 ${isDark ? 'text-purple-300' : 'text-purple-800'}`}> AI-Powered Insights</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n              {data.length > 0 ? [\r\n                { type: 'data', message: `${data.length} ESG data points analyzed across ${new Set(data.map(d => d.category)).size} categories`, priority: 'info' },\r\n                { type: 'completeness', message: `Data coverage: ${Math.round((data.length / 50) * 100)}% of recommended ESG metrics`, priority: data.length > 25 ? 'high' : 'medium' },\r\n                { type: 'trend', message: yearlyData.length > 1 ? 'Multi-year trend analysis available' : 'Add historical data for trend analysis', priority: yearlyData.length > 1 ? 'high' : 'low' },\r\n                { type: 'framework', message: `Ready for ${Object.keys(complianceSummary).length} framework reports`, priority: 'medium' }\r\n              ].map((insight, idx) => (\r\n                <div key={idx} className={`p-3 rounded-lg ${theme.bg.subtle}`}>\r\n                  <div className={`text-sm font-medium ${theme.text.primary}`}>{insight.message}</div>\r\n                  <div className={`text-xs ${\r\n                    insight.priority === 'high' ? 'text-green-600' : \r\n                    insight.priority === 'medium' ? 'text-yellow-600' : \r\n                    insight.priority === 'info' ? 'text-blue-600' : 'text-gray-600'\r\n                  }`}>\r\n                    {insight.priority.toUpperCase()} IMPACT\r\n                  </div>\r\n                </div>\r\n              )) : (\r\n                <div className={`p-3 rounded-lg ${theme.bg.subtle} col-span-2 text-center`}>\r\n                  <div className={`text-sm ${theme.text.secondary}`}>Add ESG data to generate AI-powered insights</div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Enhanced Template Selection and Visualization */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n          {/* Professional Template List */}\r\n          <div className={`p-6 rounded-xl shadow-lg no-print ${theme.bg.card}`}>\r\n            <div className=\"flex items-center gap-2 mb-6\">\r\n              <span className=\"text-2xl\"></span>\r\n              <div>\r\n                <h2 className={`text-xl font-bold ${theme.text.primary}`}>Report Templates</h2>\r\n                <p className={`text-sm ${theme.text.secondary}`}>Choose from industry-standard ESG frameworks</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-3\">\r\n              {[\r\n                { type: \"SEBI BRSR\", description: \"Mandatory ESG report for listed Indian companies\" },\r\n                { type: \"GRI Standards\", description: \"Global Reporting Initiative based template\" },\r\n                { type: \"Carbon Report\", description: \"Tracks CO2 emissions and carbon footprint\" },\r\n                { type: \"Water Usage\", description: \"Analyzes total water consumption\" },\r\n                { type: \"Waste Management\", description: \"Details waste segregation and disposal\" },\r\n                { type: \"TCFD\", description: \"Climate-related financial disclosures framework\" },\r\n                { type: \"SASB\", description: \"Industry-specific sustainability standards\" },\r\n                { type: \"EU Taxonomy\", description: \"EU sustainable finance classification\" }\r\n              ].map((report, i) => (\r\n                <div\r\n                  key={i}\r\n                  className={`border-2 p-4 rounded-xl cursor-pointer transition-all duration-200 hover:scale-102 ${\r\n                    selectedReport === report.type \r\n                      ? `${theme.border.accent} ${theme.bg.accent} shadow-lg` \r\n                      : `${theme.border.primary} ${theme.hover.card}`\r\n                  }`}\r\n                  onClick={() => setSelectedReport(report.type)}\r\n                >\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <h3 className={`font-semibold ${theme.text.primary}`}>{report.type}</h3>\r\n                      <p className={`text-sm mt-1 ${theme.text.secondary}`}>{report.description}</p>\r\n                    </div>\r\n                    {selectedReport === report.type && (\r\n                      <div className=\"ml-2\">\r\n                        <span className=\"text-green-500 text-lg\"></span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"mt-3 flex items-center gap-2\">\r\n                    <span className={`text-xs px-2 py-1 rounded-full ${\r\n                      isDark ? 'bg-blue-900 text-blue-300' : 'bg-blue-100 text-blue-800'\r\n                    }`}>\r\n                      {report.type.includes('SEBI') ? 'Regulatory' : \r\n                       report.type.includes('GRI') ? 'International' :\r\n                       report.type.includes('TCFD') ? 'Climate' :\r\n                       report.type.includes('SASB') ? 'Industry' :\r\n                       report.type.includes('EU') ? 'EU Regulatory' : 'Operational'}\r\n                    </span>\r\n                    <span className={`text-xs ${theme.text.muted}`}> Updated 2024</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Enhanced Summary & Chart */}\r\n          <div className={`p-6 rounded-xl shadow-lg print-break ${theme.bg.card}`} id=\"report-summary\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <div>\r\n                <h2 className={`text-xl font-bold ${theme.text.primary}`}>{selectedReport}</h2>\r\n                <p className={`text-sm ${theme.text.secondary}`}>Interactive data visualization</p>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className={`text-xs px-2 py-1 rounded-full ${\r\n                  isDark ? 'bg-green-900 text-green-300' : 'bg-green-100 text-green-800'\r\n                }`}>\r\n                  Live Data\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"relative\">\r\n              {getTemplateContent()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      {/* Print Header - Only visible when printing */}\r\n      <div className=\"hidden print:block mb-4\">\r\n        <h1 className=\"text-2xl font-bold text-center mb-2\">ESG Performance Report</h1>\r\n        <p className=\"text-center text-gray-600\">Generated on {new Date().toLocaleDateString()}</p>\r\n        <hr className=\"my-4\" />\r\n      </div>\r\n\r\n        {/* Enhanced History Section */}\r\n        <div className={`p-6 rounded-xl shadow-lg mt-8 ${theme.bg.card}`}>\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n            <div>\r\n              <h2 className={`text-xl font-bold ${theme.text.primary}`}>Data History & Management</h2>\r\n              <p className={`text-sm ${theme.text.secondary}`}>{filteredData.length} entries available for reporting</p>\r\n            </div>\r\n            \r\n            <div className=\"flex flex-col md:flex-row gap-3\">\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"Search by company or metric...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full md:w-64\"\r\n                icon=\"\"\r\n              />\r\n              \r\n              <select\r\n                value={filterStatus}\r\n                onChange={(e) => setFilterStatus(e.target.value)}\r\n                className={`border rounded-lg px-3 py-2 text-sm ${theme.bg.input} ${theme.border.input} ${theme.text.primary}`}\r\n              >\r\n                <option value=\"All\">All Status</option>\r\n                <option value=\"Pending\">Pending</option>\r\n                <option value=\"Submitted\">Submitted</option>\r\n                <option value=\"Failed\">Failed</option>\r\n              </select>\r\n              \r\n              <Button\r\n                variant=\"success\"\r\n                onClick={() => {\r\n                  if (selectedItems.length === 0) {\r\n                    showToast('Please select items to approve', 'warning');\r\n                    return;\r\n                  }\r\n                  bulkApprove();\r\n                  showToast(`${selectedItems.length} items approved successfully`, 'success');\r\n                }}\r\n                disabled={selectedItems.length === 0}\r\n                icon=\"\"\r\n              >\r\n                Bulk Approve\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        \r\n          <div className=\"mb-6 flex flex-wrap gap-4 text-sm\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-3 h-3 bg-yellow-400 rounded-full\"></div>\r\n              <span className={theme.text.secondary}>Pending: {filteredData.filter(item => (item.status || 'Pending') === 'Pending').length}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\r\n              <span className={theme.text.secondary}>Submitted: {filteredData.filter(item => item.status === 'Submitted').length}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-3 h-3 bg-red-400 rounded-full\"></div>\r\n              <span className={theme.text.secondary}>Failed: {filteredData.filter(item => item.status === 'Failed').length}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 ml-auto\">\r\n              <span className={`text-xs px-2 py-1 rounded-full ${\r\n                isDark ? 'bg-blue-900 text-blue-300' : 'bg-blue-100 text-blue-800'\r\n              }`}>\r\n                Total: {filteredData.length}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          {filteredData.length > 0 ? (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className={`min-w-full text-sm ${theme.text.primary}`}>\r\n                <thead className={`${theme.bg.subtle}`}>\r\n                  <tr>\r\n                    <th className=\"px-4 py-3 text-left\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedItems.length === filteredData.length && filteredData.length > 0}\r\n                          onChange={toggleSelectAll}\r\n                          className=\"rounded\"\r\n                        />\r\n                        <span className=\"font-semibold\">Company</span>\r\n                      </div>\r\n                    </th>\r\n                    <th className=\"px-4 py-3 text-left\">\r\n                      <button \r\n                        onClick={() => handleSort('category')}\r\n                        className=\"flex items-center gap-1 font-semibold hover:text-blue-600 transition-colors duration-200\"\r\n                      >\r\n                        Category \r\n                        {sortField === 'category' && (\r\n                          <span className=\"text-blue-600\">{sortOrder === 'asc' ? '' : ''}</span>\r\n                        )}\r\n                      </button>\r\n                    </th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Metric</th>\r\n                    <th className=\"px-4 py-3 text-left\">\r\n                      <button \r\n                        onClick={() => handleSort('value')}\r\n                        className=\"flex items-center gap-1 font-semibold hover:text-blue-600 transition-colors duration-200\"\r\n                      >\r\n                        Value \r\n                        {sortField === 'value' && (\r\n                          <span className=\"text-blue-600\">{sortOrder === 'asc' ? '' : ''}</span>\r\n                        )}\r\n                      </button>\r\n                    </th>\r\n                    <th className=\"px-4 py-3 text-left\">\r\n                      <button \r\n                        onClick={() => handleSort('timestamp')}\r\n                        className=\"flex items-center gap-1 font-semibold hover:text-blue-600 transition-colors duration-200\"\r\n                      >\r\n                        Date \r\n                        {sortField === 'timestamp' && (\r\n                          <span className=\"text-blue-600\">{sortOrder === 'asc' ? '' : ''}</span>\r\n                        )}\r\n                      </button>\r\n                    </th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Status</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-200\">\r\n                  {getFilteredAndSortedData().map((item, idx) => (\r\n                    <tr key={idx} className={`transition-colors duration-200 ${\r\n                      selectedItems.includes(idx) \r\n                        ? `${theme.bg.accent} border-l-4 border-blue-500` \r\n                        : `hover:${theme.bg.subtle}`\r\n                    }`}>\r\n                      <td className=\"px-4 py-3\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={selectedItems.includes(idx)}\r\n                            onChange={() => toggleSelectItem(idx)}\r\n                            className=\"rounded\"\r\n                          />\r\n                          <span className=\"font-medium\">{item.companyName || 'N/A'}</span>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <div className={`w-3 h-3 rounded-full ${\r\n                            item.category === 'environmental' ? 'bg-green-500' :\r\n                            item.category === 'social' ? 'bg-blue-500' : 'bg-purple-500'\r\n                          }`}></div>\r\n                          <span className=\"capitalize font-medium\">{item.category}</span>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <span className=\"font-medium\">{item.metric || 'General'}</span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <span className=\"font-bold text-lg\">{item.value}</span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3\">\r\n                        {item.timestamp ? (\r\n                          <div>\r\n                            <div className=\"font-medium\">{new Date(item.timestamp).toLocaleDateString()}</div>\r\n                            <div className={`text-xs ${theme.text.muted}`}>{new Date(item.timestamp).toLocaleTimeString()}</div>\r\n                          </div>\r\n                        ) : (\r\n                          <span className={theme.text.muted}>N/A</span>\r\n                        )}\r\n                      </td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <select\r\n                          value={item.status || \"Pending\"}\r\n                          onChange={(e) => {\r\n                            updateStatus(idx, e.target.value);\r\n                            showToast(`Status updated to ${e.target.value}`, 'success');\r\n                          }}\r\n                          className={`text-xs font-semibold px-3 py-1 rounded-full border-0 cursor-pointer ${\r\n                            item.status === \"Submitted\"\r\n                              ? \"bg-green-100 text-green-800\"\r\n                              : item.status === \"Pending\"\r\n                              ? \"bg-yellow-100 text-yellow-800\"\r\n                              : \"bg-red-100 text-red-800\"\r\n                          }`}\r\n                        >\r\n                          <option value=\"Pending\">Pending</option>\r\n                          <option value=\"Submitted\">Submitted</option>\r\n                          <option value=\"Failed\">Failed</option>\r\n                        </select>\r\n                      </td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <div className=\"flex gap-2\">\r\n                          <button\r\n                            onClick={() => {\r\n                              viewDetails(item);\r\n                              showToast('Viewing item details', 'info');\r\n                            }}\r\n                            className={`p-2 rounded-lg transition-colors duration-200 ${theme.hover.subtle}`}\r\n                            title=\"View Details\"\r\n                          >\r\n                            <span className=\"text-blue-600\"></span>\r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              deleteItem(idx);\r\n                              showToast('Item deleted successfully', 'success');\r\n                            }}\r\n                            className={`p-2 rounded-lg transition-colors duration-200 ${theme.hover.subtle}`}\r\n                            title=\"Delete\"\r\n                          >\r\n                            <span className=\"text-red-600\"></span>\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            <Alert \r\n              type=\"info\"\r\n              title=\"No Data Available\"\r\n              message=\"No report history found. Start by adding ESG data entries to generate reports.\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Professional Report Template Modal */}\r\n        {showProfessionalTemplate && (\r\n          <ProfessionalReportTemplate\r\n            data={data}\r\n            onClose={() => setShowProfessionalTemplate(false)}\r\n          />\r\n        )}\r\n\r\n        {/* Custom Report Builder Modal */}\r\n        {showCustomReportBuilder && (\r\n          <CustomReportBuilder\r\n            data={data}\r\n            onClose={() => setShowCustomReportBuilder(false)}\r\n          />\r\n        )}\r\n\r\n        {/* Framework Compliance Modal */}\r\n        {showFrameworkCompliance && (\r\n          <Modal\r\n            isOpen={showFrameworkCompliance}\r\n            onClose={() => setShowFrameworkCompliance(false)}\r\n            title=\" Framework Compliance Analysis\"\r\n            size=\"xl\"\r\n            isDark={isDark}\r\n          >\r\n            <FrameworkCompliance />\r\n          </Modal>\r\n        )}\r\n\r\n        {/* Framework Reports Modal */}\r\n        {showFrameworkReports && (\r\n          <FrameworkReportSelector\r\n            data={{\r\n              companyName: data[0]?.companyName || 'Company',\r\n              reportingYear: new Date().getFullYear(),\r\n              environmental: data.filter(d => d.category === 'environmental').reduce((acc, item) => {\r\n                acc[item.metric] = item.value;\r\n                return acc;\r\n              }, {}),\r\n              social: data.filter(d => d.category === 'social').reduce((acc, item) => {\r\n                acc[item.metric] = item.value;\r\n                return acc;\r\n              }, {}),\r\n              governance: data.filter(d => d.category === 'governance').reduce((acc, item) => {\r\n                acc[item.metric] = item.value;\r\n                return acc;\r\n              }, {})\r\n            }}\r\n            onClose={() => setShowFrameworkReports(false)}\r\n          />\r\n        )}\r\n\r\n        {/* Predictive Analytics Modal */}\r\n        {showPredictiveAnalytics && (\r\n          <Modal\r\n            isOpen={showPredictiveAnalytics}\r\n            onClose={() => setShowPredictiveAnalytics(false)}\r\n            title=\" Predictive ESG Analytics\"\r\n            isDark={isDark}\r\n          >\r\n            <div className=\"space-y-4\">\r\n              <Alert type=\"info\" title=\"AI-Powered Insights\" message=\"Advanced predictive modeling for ESG performance forecasting\" />\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n                  <h4 className={`font-semibold ${theme.text.primary} mb-2`}> Trend Forecasting</h4>\r\n                  <p className={`text-sm ${theme.text.secondary} mb-3`}>Predict ESG scores for next 12 months</p>\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex justify-between text-sm\">\r\n                      <span>Environmental</span>\r\n                      <span className=\"text-green-600\"> +5.2% projected</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-sm\">\r\n                      <span>Social</span>\r\n                      <span className=\"text-blue-600\"> +3.1% projected</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between text-sm\">\r\n                      <span>Governance</span>\r\n                      <span className=\"text-purple-600\"> +1.8% projected</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n                  <h4 className={`font-semibold ${theme.text.primary} mb-2`}> Risk Assessment</h4>\r\n                  <p className={`text-sm ${theme.text.secondary} mb-3`}>Identify potential ESG risks</p>\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center gap-2 text-sm\">\r\n                      <span className=\"w-2 h-2 bg-yellow-500 rounded-full\"></span>\r\n                      <span>Carbon target at risk</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-sm\">\r\n                      <span className=\"w-2 h-2 bg-green-500 rounded-full\"></span>\r\n                      <span>Social metrics on track</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-sm\">\r\n                      <span className=\"w-2 h-2 bg-blue-500 rounded-full\"></span>\r\n                      <span>Governance improving</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className={`p-4 rounded-lg border-l-4 border-blue-500 ${theme.bg.subtle}`}>\r\n                <h4 className={`font-semibold ${theme.text.primary} mb-2`}> Recommendations</h4>\r\n                <ul className={`text-sm ${theme.text.secondary} space-y-1`}>\r\n                  <li> Increase renewable energy adoption by 15% to meet 2025 targets</li>\r\n                  <li> Implement diversity training programs to improve social scores</li>\r\n                  <li> Enhance board independence for better governance ratings</li>\r\n                </ul>\r\n              </div>\r\n              \r\n              <div className=\"flex gap-3 pt-4\">\r\n                <Button variant=\"primary\" onClick={() => showToast('Predictive model updated', 'success')}>Generate Forecast</Button>\r\n                <Button variant=\"outline\" onClick={() => setShowPredictiveAnalytics(false)}>Close</Button>\r\n              </div>\r\n            </div>\r\n          </Modal>\r\n        )}\r\n\r\n        {/* Integrations Modal */}\r\n        {showIntegrations && (\r\n          <Modal\r\n            isOpen={showIntegrations}\r\n            onClose={() => setShowIntegrations(false)}\r\n            title=\" ESG Data Integrations\"\r\n            isDark={isDark}\r\n          >\r\n            <div className=\"space-y-4\">\r\n              <Alert type=\"info\" title=\"Connect Your Systems\" message=\"Integrate with external ESG data sources and reporting platforms\" />\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className={`p-4 rounded-lg border ${theme.border.primary}`}>\r\n                  <div className=\"flex items-center gap-3 mb-3\">\r\n                    <span className=\"text-2xl\"></span>\r\n                    <div>\r\n                      <h4 className={`font-semibold ${theme.text.primary}`}>Bloomberg ESG</h4>\r\n                      <p className={`text-xs ${theme.text.secondary}`}>Market data integration</p>\r\n                    </div>\r\n                    <span className=\"ml-auto px-2 py-1 text-xs bg-green-100 text-green-800 rounded\">Connected</span>\r\n                  </div>\r\n                  <Button size=\"sm\" variant=\"outline\" onClick={() => showToast('Bloomberg sync initiated', 'success')}>Sync Data</Button>\r\n                </div>\r\n                \r\n                <div className={`p-4 rounded-lg border ${theme.border.primary}`}>\r\n                  <div className=\"flex items-center gap-3 mb-3\">\r\n                    <span className=\"text-2xl\"></span>\r\n                    <div>\r\n                      <h4 className={`font-semibold ${theme.text.primary}`}>CDP Platform</h4>\r\n                      <p className={`text-xs ${theme.text.secondary}`}>Carbon disclosure</p>\r\n                    </div>\r\n                    <span className=\"ml-auto px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded\">Setup</span>\r\n                  </div>\r\n                  <Button size=\"sm\" variant=\"primary\" onClick={() => showToast('CDP integration configured', 'success')}>Connect</Button>\r\n                </div>\r\n                \r\n                <div className={`p-4 rounded-lg border ${theme.border.primary}`}>\r\n                  <div className=\"flex items-center gap-3 mb-3\">\r\n                    <span className=\"text-2xl\"></span>\r\n                    <div>\r\n                      <h4 className={`font-semibold ${theme.text.primary}`}>MSCI ESG</h4>\r\n                      <p className={`text-xs ${theme.text.secondary}`}>Rating benchmarks</p>\r\n                    </div>\r\n                    <span className=\"ml-auto px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded\">Available</span>\r\n                  </div>\r\n                  <Button size=\"sm\" variant=\"outline\" onClick={() => showToast('MSCI integration available', 'info')}>Learn More</Button>\r\n                </div>\r\n                \r\n                <div className={`p-4 rounded-lg border ${theme.border.primary}`}>\r\n                  <div className=\"flex items-center gap-3 mb-3\">\r\n                    <span className=\"text-2xl\"></span>\r\n                    <div>\r\n                      <h4 className={`font-semibold ${theme.text.primary}`}>SAP Sustainability</h4>\r\n                      <p className={`text-xs ${theme.text.secondary}`}>ERP integration</p>\r\n                    </div>\r\n                    <span className=\"ml-auto px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded\">Beta</span>\r\n                  </div>\r\n                  <Button size=\"sm\" variant=\"outline\" onClick={() => showToast('SAP integration in beta', 'info')}>Join Beta</Button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className={`p-4 rounded-lg ${theme.bg.subtle}`}>\r\n                <h4 className={`font-semibold ${theme.text.primary} mb-2`}> API Endpoints</h4>\r\n                <div className=\"space-y-2 text-sm font-mono\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span>GET /api/esg/data</span>\r\n                    <span className=\"text-green-600\">Active</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span>POST /api/esg/import</span>\r\n                    <span className=\"text-green-600\">Active</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span>GET /api/esg/reports</span>\r\n                    <span className=\"text-green-600\">Active</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex gap-3 pt-4\">\r\n                <Button variant=\"primary\" onClick={() => showToast('Integration settings saved', 'success')}>Save Settings</Button>\r\n                <Button variant=\"outline\" onClick={() => setShowIntegrations(false)}>Close</Button>\r\n              </div>\r\n            </div>\r\n          </Modal>\r\n        )}\r\n\r\n        {/* Toast Notifications */}\r\n        {toast && (\r\n          <Toast\r\n            message={toast.message}\r\n            type={toast.type}\r\n            onClose={() => setToast(null)}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Enhanced Print Preview Modal */}\r\n      {showPreview && (\r\n        <Modal\r\n          isOpen={showPreview}\r\n          onClose={() => setShowPreview(false)}\r\n          title={`Print Preview - ${selectedReport}`}\r\n          size=\"xl\"\r\n          actions={[\r\n            {\r\n              label: 'Print Now',\r\n              onClick: () => { \r\n                setShowPreview(false); \r\n                setTimeout(() => {\r\n                  window.print();\r\n                  showToast('Report sent to printer', 'success');\r\n                }, 100); \r\n              },\r\n              variant: 'primary',\r\n              icon: ''\r\n            },\r\n            {\r\n              label: 'Close',\r\n              onClick: () => setShowPreview(false),\r\n              variant: 'outline'\r\n            }\r\n          ]}\r\n        >\r\n          <div className=\"max-h-[70vh] overflow-y-auto\">\r\n            \r\n            <div className=\"print-preview\">\r\n              {/* Print Header */}\r\n              <div className=\"text-center mb-6\">\r\n                <h1 className=\"text-2xl font-bold mb-2\">ESG Performance Report</h1>\r\n                <p className=\"text-gray-600\">Report Type: {selectedReport}</p>\r\n                <p className=\"text-gray-600\">Generated on: {new Date().toLocaleDateString()}</p>\r\n                <hr className=\"my-4\" />\r\n              </div>\r\n\r\n              {/* Overall Summary */}\r\n              <div className=\"mb-6\">\r\n                <h2 className=\"text-lg font-bold mb-4\">Overall ESG Performance Summary</h2>\r\n                <div className=\"grid grid-cols-4 gap-4\">\r\n                  <div className=\"border p-3 text-center\">\r\n                    <h3 className=\"font-semibold text-emerald-800\">Environmental</h3>\r\n                    <p className=\"text-xl font-bold\">{overallSummary.environmental || 'N/A'}</p>\r\n                  </div>\r\n                  <div className=\"border p-3 text-center\">\r\n                    <h3 className=\"font-semibold text-blue-800\">Social</h3>\r\n                    <p className=\"text-xl font-bold\">{overallSummary.social || 'N/A'}</p>\r\n                  </div>\r\n                  <div className=\"border p-3 text-center\">\r\n                    <h3 className=\"font-semibold text-purple-800\">Governance</h3>\r\n                    <p className=\"text-xl font-bold\">{overallSummary.governance || 'N/A'}</p>\r\n                  </div>\r\n                  <div className=\"border p-3 text-center\">\r\n                    <h3 className=\"font-semibold text-gray-800\">Overall Score</h3>\r\n                    <p className=\"text-xl font-bold\">{overallSummary.overall || 'N/A'}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Metrics Tables */}\r\n              <div className=\"grid grid-cols-2 gap-6\">\r\n                <div>\r\n                  <h3 className=\"font-bold bg-emerald-600 text-white p-2 text-center\">Environmental</h3>\r\n                  <table className=\"w-full border border-collapse text-sm\">\r\n                    <thead>\r\n                      <tr className=\"bg-emerald-600 text-white\">\r\n                        <th className=\"border p-2 text-left\">Metric</th>\r\n                        <th className=\"border p-2 text-left\">Value</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {getEnvironmentalMetrics().map((metric, i) => (\r\n                        <tr key={i}>\r\n                          <td className=\"border p-2\">{metric.name}</td>\r\n                          <td className=\"border p-2\">{metric.value}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-bold bg-emerald-600 text-white p-2 text-center\">Social</h3>\r\n                  <table className=\"w-full border border-collapse text-sm\">\r\n                    <thead>\r\n                      <tr className=\"bg-emerald-600 text-white\">\r\n                        <th className=\"border p-2 text-left\">Metric</th>\r\n                        <th className=\"border p-2 text-left\">Value</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {getSocialMetrics().map((metric, i) => (\r\n                        <tr key={i}>\r\n                          <td className=\"border p-2\">{metric.name}</td>\r\n                          <td className=\"border p-2\">{metric.value}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-bold bg-emerald-600 text-white p-2 text-center\">Governance</h3>\r\n                  <table className=\"w-full border border-collapse text-sm\">\r\n                    <thead>\r\n                      <tr className=\"bg-emerald-600 text-white\">\r\n                        <th className=\"border p-2 text-left\">Metric</th>\r\n                        <th className=\"border p-2 text-left\">Value</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {getGovernanceMetrics().map((metric, i) => (\r\n                        <tr key={i}>\r\n                          <td className=\"border p-2\">{metric.name}</td>\r\n                          <td className=\"border p-2\">{metric.value}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-bold bg-emerald-600 text-white p-2 text-center\">Auto-Calculated Metrics</h3>\r\n                  <table className=\"w-full border border-collapse text-sm\">\r\n                    <thead>\r\n                      <tr className=\"bg-emerald-600 text-white\">\r\n                        <th className=\"border p-2 text-left\">Metric</th>\r\n                        <th className=\"border p-2 text-left\">Value</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {getCalculatedMetrics().map((metric, i) => (\r\n                        <tr key={i}>\r\n                          <td className=\"border p-2\">{metric.name}</td>\r\n                          <td className=\"border p-2\">{metric.value}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Year-over-Year Data */}\r\n              {yearlyData.length > 0 && (\r\n                <div className=\"mt-6\">\r\n                  <h3 className=\"font-bold mb-2\">Year-over-Year Performance</h3>\r\n                  <table className=\"w-full border border-collapse text-sm\">\r\n                    <thead>\r\n                      <tr className=\"bg-gray-100\">\r\n                        <th className=\"border p-2\">Year</th>\r\n                        <th className=\"border p-2\">Environmental</th>\r\n                        <th className=\"border p-2\">Social</th>\r\n                        <th className=\"border p-2\">Governance</th>\r\n                        <th className=\"border p-2\">Overall Avg</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {yearlyData.map((row) => (\r\n                        <tr key={row.year}>\r\n                          <td className=\"border p-2\">{row.year}</td>\r\n                          <td className=\"border p-2\">{row.environmental}</td>\r\n                          <td className=\"border p-2\">{row.social}</td>\r\n                          <td className=\"border p-2\">{row.governance}</td>\r\n                          <td className=\"border p-2\">{row.average}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n\r\n      {/* Save / Print footer */}\r\n      <div className=\"fixed bottom-4 right-6 left-6 md:left-auto md:right-6 z-50\">\r\n        <div className=\"max-w-7xl mx-auto flex justify-end gap-3\">\r\n          <button\r\n            onClick={() => handleSaveFullReport()}\r\n            className={`px-4 py-2 rounded-lg bg-blue-600 text-white text-sm hover:bg-blue-700 shadow-lg`}\r\n            disabled={isGenerating}\r\n            title=\"Save Full Report (JSON)\"\r\n          >\r\n            {isGenerating ? 'Saving...' : ' Save JSON'}\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => exportPDF()}\r\n            className={`px-4 py-2 rounded-lg bg-gray-50 text-gray-800 text-sm border hover:bg-gray-100 shadow-lg`}\r\n            disabled={isGenerating}\r\n            title=\"Save Full Report (PDF)\"\r\n          >\r\n             Save PDF\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => handlePrintReport()}\r\n            className={`px-4 py-2 rounded-lg bg-white text-gray-800 text-sm border hover:bg-gray-100 shadow-lg`}\r\n            title=\"Print Report\"\r\n          >\r\n             Print\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reports;\r\n","// Reporting & Visualization Module\r\nexport class ReportGenerator {\r\n  static generateESGReport(data, framework = 'GRI') {\r\n    return {\r\n      executiveSummary: this.generateExecutiveSummary(data),\r\n      environmentalSection: this.generateEnvironmentalSection(data.environmental),\r\n      socialSection: this.generateSocialSection(data.social),\r\n      governanceSection: this.generateGovernanceSection(data.governance),\r\n      kpiDashboard: this.generateKPIDashboard(data),\r\n      frameworkMapping: this.mapToFramework(data, framework),\r\n      generatedAt: new Date().toISOString()\r\n    };\r\n  }\r\n\r\n  static generateExecutiveSummary(data) {\r\n    const highlights = this.identifyKeyHighlights(data);\r\n    return {\r\n      overview: `ESG performance summary for ${data.companyName}`,\r\n      keyAchievements: highlights.achievements,\r\n      challenges: highlights.challenges,\r\n      targets: highlights.targets,\r\n      materialTopics: highlights.materialTopics\r\n    };\r\n  }\r\n\r\n  static generateEnvironmentalSection(envData) {\r\n    return {\r\n      climateChange: {\r\n        ghgEmissions: envData.ghgEmissions,\r\n        energyConsumption: envData.energyConsumption,\r\n        renewableEnergyShare: envData.renewableEnergyShare\r\n      },\r\n      resourceManagement: {\r\n        waterUsage: envData.waterUsage,\r\n        wasteGeneration: envData.wasteGeneration,\r\n        recyclingRate: envData.recyclingRate\r\n      },\r\n      biodiversity: envData.biodiversityImpacts || [],\r\n      targets: envData.environmentalTargets || []\r\n    };\r\n  }\r\n\r\n  static generateSocialSection(socialData) {\r\n    return {\r\n      workforce: {\r\n        diversity: socialData.diversity,\r\n        turnover: socialData.turnover,\r\n        training: socialData.training\r\n      },\r\n      healthSafety: {\r\n        incidentRate: socialData.incidentRate,\r\n        safetyTraining: socialData.safetyTraining\r\n      },\r\n      community: {\r\n        investments: socialData.communityInvestments,\r\n        programs: socialData.communityPrograms\r\n      },\r\n      humanRights: socialData.humanRights || {}\r\n    };\r\n  }\r\n\r\n  static generateGovernanceSection(govData) {\r\n    return {\r\n      boardStructure: {\r\n        independence: govData.boardIndependence,\r\n        diversity: govData.boardDiversity,\r\n        size: govData.boardSize\r\n      },\r\n      ethics: {\r\n        codeOfConduct: govData.codeOfConduct,\r\n        trainingCompletion: govData.ethicsTraining,\r\n        violations: govData.ethicsViolations\r\n      },\r\n      riskManagement: govData.riskManagement || {},\r\n      transparency: govData.transparency || {}\r\n    };\r\n  }\r\n\r\n  static generateKPIDashboard(data) {\r\n    return {\r\n      environmental: [\r\n        { metric: 'GHG Emissions', value: data.environmental?.ghgEmissions, unit: 'tCO2e', trend: 'decreasing' },\r\n        { metric: 'Energy Intensity', value: data.environmental?.energyIntensity, unit: 'kWh/revenue', trend: 'stable' }\r\n      ],\r\n      social: [\r\n        { metric: 'Employee Turnover', value: data.social?.turnover, unit: '%', trend: 'improving' },\r\n        { metric: 'Safety Incidents', value: data.social?.incidentRate, unit: 'per 100k hours', trend: 'decreasing' }\r\n      ],\r\n      governance: [\r\n        { metric: 'Board Independence', value: data.governance?.boardIndependence, unit: '%', trend: 'stable' },\r\n        { metric: 'Ethics Training', value: data.governance?.ethicsTraining, unit: '%', trend: 'increasing' }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static mapToFramework(data, framework) {\r\n    const mappings = {\r\n      GRI: {\r\n        'GRI 305-1': data.environmental?.scope1Emissions,\r\n        'GRI 305-2': data.environmental?.scope2Emissions,\r\n        'GRI 401-1': data.social?.newHires,\r\n        'GRI 405-1': data.social?.diversity\r\n      },\r\n      SASB: {\r\n        'EM-GHG-110a.1': data.environmental?.totalEmissions,\r\n        'EM-GHG-110a.2': data.environmental?.emissionIntensity\r\n      },\r\n      TCFD: {\r\n        governance: data.governance?.climateGovernance,\r\n        strategy: data.environmental?.climateStrategy,\r\n        riskManagement: data.governance?.climateRiskManagement,\r\n        metrics: data.environmental?.climateMetrics\r\n      }\r\n    };\r\n    \r\n    return mappings[framework] || {};\r\n  }\r\n\r\n  static identifyKeyHighlights(data) {\r\n    return {\r\n      achievements: [\r\n        'Reduced GHG emissions by 15%',\r\n        'Achieved 40% board diversity',\r\n        'Zero safety incidents this quarter'\r\n      ],\r\n      challenges: [\r\n        'Scope 3 emissions tracking',\r\n        'Supply chain transparency',\r\n        'Data quality improvements needed'\r\n      ],\r\n      targets: [\r\n        'Net zero by 2050',\r\n        '50% renewable energy by 2025',\r\n        '100% supplier ESG assessment by 2024'\r\n      ],\r\n      materialTopics: [\r\n        'Climate Change',\r\n        'Employee Wellbeing',\r\n        'Data Privacy',\r\n        'Supply Chain Ethics'\r\n      ]\r\n    };\r\n  }\r\n\r\n  static exportToPDF(report) {\r\n    // Simulate PDF generation\r\n    return {\r\n      format: 'PDF',\r\n      size: '2.5MB',\r\n      pages: 45,\r\n      downloadUrl: '/reports/esg-report.pdf',\r\n      generatedAt: new Date().toISOString()\r\n    };\r\n  }\r\n\r\n  static exportToXBRL(report, taxonomy) {\r\n    // Simulate XBRL generation\r\n    return {\r\n      format: 'XBRL',\r\n      taxonomy,\r\n      size: '1.2MB',\r\n      downloadUrl: '/reports/esg-report.xbrl',\r\n      generatedAt: new Date().toISOString()\r\n    };\r\n  }\r\n}"],"names":["validateFrameworkCompliance","data","framework","arguments","length","undefined","results","totalRequirements","metRequirements","missingRequirements","complianceScore","categoryScores","normalizedData","Array","isArray","griRequirements","environmental","social","governance","Object","entries","forEach","_ref","category","requirements","categoryData","filter","item","_item$category","toLowerCase","availableMetrics","Set","map","metric","req","has","some","_item$metric","includes","replace","substring","total","met","percentage","Math","round","missing","push","sasbRequirements","_ref2","_item$category2","_item$metric2","tcfdRequirements","strategy","risk_management","metrics_targets","_ref3","pillar","_item$metric3","brsrRequirements","_ref4","_item$category3","_item$metric4","FrameworkCompliance","_ESG_FRAMEWORKS$selec","_ESG_FRAMEWORKS$selec2","isDark","useTheme","theme","getThemeClasses","selectedFramework","setSelectedFramework","useState","complianceData","setComplianceData","esgData","setEsgData","setComplianceScore","useEffect","loadESGData","calculateCompliance","async","getStoredData","error","console","ESG_FRAMEWORKS","categoryCompliance","categories","standards","standardsCount","keys","metStandards","standard","split","topics","topicsCount","metTopics","topic","_item$description","description","getComplianceColor","_jsx","className","background","children","_jsxs","text","textSecondary","onClick","cardBg","border","name","renderGRICompliance","GRI","compliance","style","width","code","isImplemented","renderSASBCompliance","SASB","_ref5","index","_item$description2","renderMaterialityAssessment","implementedTopics","MATERIALITY_TOPICS","_item$metric5","_item$description3","id","impl","score","bg","subtle","BRSRReportGenerator","generateReport","options","pdf","jsPDF","companyName","reportingYear","Date","getFullYear","setFontSize","setTextColor","toLocaleDateString","yPos","sectionA","this","extractSectionA","key","value","addPage","extractPrincipleData","principle","title","performance","extractPerformanceMetrics","indicator","unit","metrics","isNaN","parseFloat","getBRSRIndicator","toFixed","getBRSRUnit","scope1_emissions","scope2_emissions","scope3_emissions","energy_consumption","renewable_energy","water_withdrawal","waste_generated","total_employees","female_employees","training_hours","board_size","independent_directors","l","toUpperCase","GRIReportGenerator","extractGeneralDisclosures","disclosure","response","extractMaterialTopics","approach","extractEnvironmentalMetrics","extractSocialMetrics","_data$social","_data$governance","env","parseInt","lost_time_injury_rate","SASBReportGenerator","industry","getSASBStandard","classification","getIndustryClassification","sics","getSASBTopics","extractMetricValue","getActivityMetrics","technology","financial","healthcare","manufacturing","energy","retail","classifications","_data$environmental","_data$environmental2","_data$environmental3","_data$governance2","_data$social2","data_breaches","community_investment","TCFDReportGenerator","summary","generateExecutiveSummary","maxWidth","extractGovernance","extractStrategy","extractRiskManagement","extractMetricsAndTargets","current","target","timeline","extractScenarioAnalysis","scenario","temperature","impact","mitigation","calculateTotalEmissions","_frameworks$find","_frameworks$find2","onClose","isGenerating","setIsGenerating","setIndustry","frameworks","icon","generator","card","primary","secondary","hover","onChange","e","input","find","f","_data$companyInfo","_data$companyInfo2","frameworkId","companyInfo","filename","toISOString","save","alert","disabled","generateProfessionalESGReport","reportPeriod","logo","colors","accent","lightGray","darkGray","createCoverPage","createTableOfContents","createExecutiveSummary","createPerformanceSections","createDataTables","createComplianceSection","addPageNumbers","currentPage","setFillColor","rect","setFont","roundedRect","year","month","day","page","toString","setLineDashPattern","line","getTextWidth","envData","socialData","govData","label","color","xPos","summaryText","startsWith","slice","subcategory","valueText","tableData","charAt","source","colPositions","header","i","row","cell","point","totalPages","setPage","generateExecutiveProfessionalReport","executiveSummary","includeCharts","includeCompliance","mediumGray","success","warning","danger","pageCount","createExecutiveCoverPage","createKPIDashboard","createPerformanceAnalysis","createRiskOpportunityAnalysis","createComplianceGovernance","createStrategicRecommendations","addProfessionalFooters","envScore","calculateCategoryScore","socialScore","govScore","overallScore","x","box","insights","getPerformanceRating","insight","achievement","createKPISection","d","sectionData","yStart","kpis","kpi","_kpi$value","metricName","rec","level","risk","levelColor","opp","status","statusColor","actions","priority","actionY","action","setDrawColor","reduce","sum","min","calculateMetrics","count","avgScore","rating","muted","getKeyInsights","getStrategicRecommendations","recommendations","area","reportConfig","setReportConfig","reportType","previewMode","setPreviewMode","handleGenerateReport","Promise","resolve","setTimeout","handleConfigChange","field","prev","Modal","isOpen","size","variant","loading","ProfessionalReportPreview","features","template","feature","Input","type","placeholder","max","checked","Alert","message","sections","environmentalMetrics","socialMetrics","governanceMetrics","performanceTrends","complianceStatus","customSections","newSectionTitle","setNewSectionTitle","cat","sector","region","flat","handleSectionChange","section","Button","addCustomSection","trim","content","_","removeCustomSection","k","values","Boolean","COLORS","normalizeData","timestamp","aggregateByYear","result","yearObj","average","every","sort","a","b","aggregateOverall","agg","envAvg","socAvg","govAvg","overall","dedupeEntries","Map","String","existing","get","existingTime","createdAt","getTime","set","from","_data$","_yearlyData$find","_yearlyData$find2","_yearlyData$find3","_data$2","toggleTheme","currentUser","role","localStorage","getItem","setData","selectedReport","setSelectedReport","filterStatus","setFilterStatus","selectedYear","setSelectedYear","yearlyData","setYearlyData","overallSummary","setOverallSummary","showPreview","setShowPreview","searchTerm","setSearchTerm","selectedItems","setSelectedItems","sortField","setSortField","sortOrder","setSortOrder","toast","setToast","showProfessionalTemplate","setShowProfessionalTemplate","showCustomReportBuilder","setShowCustomReportBuilder","showPredictiveAnalytics","setShowPredictiveAnalytics","showIntegrations","setShowIntegrations","showFrameworkCompliance","setShowFrameworkCompliance","frameworkComplianceData","setFrameworkComplianceData","complianceSummary","setComplianceSummary","showFrameworkReports","setShowFrameworkReports","handleSaveFullReport","reportInput","analytics","fullReport","ReportGenerator","generateESGReport","blob","Blob","JSON","stringify","url","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","remove","revokeObjectURL","showToast","err","getEnvironmentalMetrics","getMetricValue","m","getSocialMetrics","getGovernanceMetrics","getCalculatedMetrics","normalized","totalRevenue","carbonEmissions","communityInvestment","renewableRatio","diversityRatio","dataArray","alternatives","alt","refreshData","log","localData","directData","parsed","parse","warn","convertedData","submissionDate","griCompliance","sasbCompliance","tcfdCompliance","brsrCompliance","TCFD","BRSR","years","getFilteredAndSortedData","matchesStatus","matchesSearch","aVal","bVal","handleSort","interval","setInterval","styleSheet","textContent","head","cleanup","clearInterval","chartData","categoryCount","_ref7","filteredData","exportPDF","canViewReports","RBACManager","hasPermission","PERMISSIONS","VIEW_REPORTS","EXPORT_DATA","gradient","ProfessionalHeader","onLogout","window","location","subtitle","showBreadcrumb","breadcrumbItems","active","FrameworkComplianceSummary","analyzeFrameworkCompliance","clearAllData","confirm","keysToRemove","removeItem","MetricCard","trend","trendColor","progress","entry","colSpan","ResponsiveContainer","height","BarChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","YAxis","domain","Tooltip","contentStyle","backgroundColor","borderRadius","formatter","Bar","fill","radius","LineChart","Line","strokeWidth","dot","r","idx","report","getTemplateContent","griData","displayData","PieChart","Pie","cx","cy","labelLine","percent","outerRadius","Cell","Legend","carbonData","emissions","waterUsageMetrics","waterByMonth","usage","waterData","wasteMetrics","wasteData","tcfdMetrics","climateMetrics","scenarioMetrics","targetMetrics","tcfdData","angle","textAnchor","sasbEnvData","sasbSocialData","sasbEnergyMetrics","sasbWaterMetrics","sasbWasteMetrics","sasbSafetyMetrics","sasbData","taxonomyMetrics","eligibleMetrics","alignedMetrics","eligibleActivities","alignedActivities","taxonomyData","defaultData","finalData","_ref6","updatedData","lastModified","backendData","userId","APIService","saveESGData","bulkApprove","toggleSelectAll","toggleSelectItem","toLocaleTimeString","newStatus","updateStatus","details","toLocaleString","viewDetails","itemToDelete","displayIndex","backendDeleted","resp","request","method","Error","filtered","setItem","deleteItem","ProfessionalReportTemplate","CustomReportBuilder","FrameworkReportSelector","acc","Toast","print","handlePrintReport","el","getElementById","printWindow","open","headHtml","querySelectorAll","node","outerHTML","join","write","innerHTML","close","focus","environmentalSection","generateEnvironmentalSection","socialSection","generateSocialSection","governanceSection","generateGovernanceSection","kpiDashboard","generateKPIDashboard","frameworkMapping","mapToFramework","generatedAt","highlights","identifyKeyHighlights","overview","keyAchievements","achievements","challenges","targets","materialTopics","climateChange","ghgEmissions","energyConsumption","renewableEnergyShare","resourceManagement","waterUsage","wasteGeneration","recyclingRate","biodiversity","biodiversityImpacts","environmentalTargets","workforce","diversity","turnover","training","healthSafety","incidentRate","safetyTraining","community","investments","communityInvestments","programs","communityPrograms","humanRights","boardStructure","independence","boardIndependence","boardDiversity","boardSize","ethics","codeOfConduct","trainingCompletion","ethicsTraining","violations","ethicsViolations","riskManagement","transparency","energyIntensity","_data$environmental4","_data$social3","_data$social4","_data$environmental5","_data$environmental6","_data$governance3","_data$environmental7","_data$governance4","_data$environmental8","scope1Emissions","scope2Emissions","newHires","totalEmissions","emissionIntensity","climateGovernance","climateStrategy","climateRiskManagement","exportToPDF","format","pages","downloadUrl","exportToXBRL","taxonomy"],"sourceRoot":""}