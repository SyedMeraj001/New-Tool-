"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[487],{1677:(e,t,a)=>{a.d(t,{A:()=>i,ESGROICalculator:()=>r});class r{static calculateESGROI(e){try{const t=this.calculateInvestments(e.investments||{}),a=this.calculateBenefits(e.benefits||{}),r=this.calculateRiskMitigation(e.risks||{}),i=e.timeframe||5,s=this.calculateROI(t,a,r,i);return{totalROI:s.totalROI,annualizedROI:s.annualizedROI,paybackPeriod:s.paybackPeriod,netPresentValue:s.netPresentValue,investments:t,benefits:a,risks:r,breakdown:this.generateBreakdown(t,a,r),recommendations:this.generateRecommendations(s,t,a),calculatedAt:(new Date).toISOString()}}catch(t){return console.error("ESG ROI calculation failed:",t),this.getDefaultROI()}}static calculateInvestments(e){const t={renewableEnergy:e.renewableEnergy||0,energyEfficiency:e.energyEfficiency||0,wasteReduction:e.wasteReduction||0,waterConservation:e.waterConservation||0,carbonOffset:e.carbonOffset||0},a={employeeTraining:e.employeeTraining||0,healthSafety:e.healthSafety||0,communityPrograms:e.communityPrograms||0,diversityInitiatives:e.diversityInitiatives||0,workplaceWellness:e.workplaceWellness||0},r={complianceSystem:e.complianceSystem||0,riskManagement:e.riskManagement||0,boardTraining:e.boardTraining||0,auditingSystems:e.auditingSystems||0,transparencyTools:e.transparencyTools||0},i=Object.values(t).reduce((e,t)=>e+t,0),s=Object.values(a).reduce((e,t)=>e+t,0),n=Object.values(r).reduce((e,t)=>e+t,0);return{environmental:{...t,total:i},social:{...a,total:s},governance:{...r,total:n},totalInvestment:i+s+n}}static calculateBenefits(e){const t=this.calculateCostSavings(e.costSavings||{}),a=this.calculateRevenueGains(e.revenueGains||{}),r=this.calculateRiskReductionValue(e.riskReduction||{}),i=this.calculateBrandValue(e.brandValue||{});return{costSavings:t,revenueGains:a,riskReduction:r,brandValue:i,totalBenefits:t.total+a.total+r.total+i.total}}static calculateCostSavings(e){const t=(e.energyReduction||0)*(e.energyCostPerUnit||.12),a=(e.waterReduction||0)*(e.waterCostPerUnit||.003),r=(e.wasteReduction||0)*(e.wasteCostPerUnit||.1),i=e.operationalEfficiency||0,s=(e.turnoverReduction||0)*(e.avgRecruitmentCost||15e3);return{energySavings:t,waterSavings:a,wasteSavings:r,operationalEfficiency:i,reducedTurnover:s,total:t+a+r+i+s}}static calculateRevenueGains(e){const t=e.greenProductRevenue||0,a=e.sustainabilityPremium||0,r=e.newMarketAccess||0,i=(e.customerRetentionImprovement||0)*(e.avgCustomerValue||1e3),s=e.investorAttraction||0;return{greenProducts:t,sustainabilityPremium:a,newMarkets:r,customerRetention:i,investorAttraction:s,total:t+a+r+i+s}}static calculateRiskReductionValue(e){const t=e.regulatoryFineReduction||0,a=e.reputationProtection||0,r=e.operationalRiskReduction||0,i=e.supplyChainStability||0,s=e.climateRiskMitigation||0;return{regulatoryRisk:t,reputationalRisk:a,operationalRisk:r,supplyChainRisk:i,climateRisk:s,total:t+a+r+i+s}}static calculateBrandValue(e){const t=e.brandPremium||0,a=e.marketShareGain||0,r=(e.engagementImprovement||0)*(e.productivityGain||5e3),i=e.positiveMediaValue||0;return{brandPremium:t,marketShare:a,employeeEngagement:r,mediaValue:i,total:t+a+r+i}}static calculateRiskMitigation(e){const t=e.environmentalRisks||0,a=e.socialRisks||0,r=e.governanceRisks||0,i=t+a+r;return{environmentalRisks:t,socialRisks:a,governanceRisks:r,totalRiskMitigation:i,riskAdjustedReturn:this.calculateRiskAdjustedReturn(i)}}static calculateRiskAdjustedReturn(e){return.15*e}static calculateROI(e,t,a,r){const i=e.totalInvestment,s=t.totalBenefits+a.riskAdjustedReturn,n=this.calculateCumulativeBenefits(s,r),o=i>0?(n-i)/i*100:0,c=o/r,l=s>0?i/s:1/0,u=this.calculateNPV(i,s,r,.08);return{totalROI:Math.round(100*o)/100,annualizedROI:Math.round(100*c)/100,paybackPeriod:Math.round(100*l)/100,netPresentValue:Math.round(u),benefitCostRatio:i>0?n/i:0}}static calculateCumulativeBenefits(e,t){let a=0;for(let r=1;r<=t;r++)a+=e*Math.pow(1.03,r-1);return a}static calculateNPV(e,t,a,r){let i=-e;for(let s=1;s<=a;s++){i+=t*Math.pow(1.03,s-1)/Math.pow(1+r,s)}return i}static generateBreakdown(e,t,a){const r=e.totalInvestment,i=t.totalBenefits;return{investmentBreakdown:{environmental:r>0?Math.round(e.environmental.total/r*100):0,social:r>0?Math.round(e.social.total/r*100):0,governance:r>0?Math.round(e.governance.total/r*100):0},benefitBreakdown:{costSavings:i>0?Math.round(t.costSavings.total/i*100):0,revenueGains:i>0?Math.round(t.revenueGains.total/i*100):0,riskReduction:i>0?Math.round(t.riskReduction.total/i*100):0,brandValue:i>0?Math.round(t.brandValue.total/i*100):0},topBenefitSources:this.identifyTopBenefitSources(t),topInvestmentAreas:this.identifyTopInvestmentAreas(e)}}static identifyTopBenefitSources(e){return[{name:"Cost Savings",value:e.costSavings.total},{name:"Revenue Gains",value:e.revenueGains.total},{name:"Risk Reduction",value:e.riskReduction.total},{name:"Brand Value",value:e.brandValue.total}].sort((e,t)=>t.value-e.value).slice(0,3)}static identifyTopInvestmentAreas(e){return[{name:"Environmental",value:e.environmental.total},{name:"Social",value:e.social.total},{name:"Governance",value:e.governance.total}].sort((e,t)=>t.value-e.value)}static generateRecommendations(e,t,a){const r=[];return e.totalROI<15&&r.push({priority:"High",category:"Investment Optimization",action:"Focus on high-impact, low-cost ESG initiatives",rationale:"Current ROI is below industry average of 15-25%"}),e.paybackPeriod>5&&r.push({priority:"Medium",category:"Payback Acceleration",action:"Prioritize quick-win initiatives with shorter payback periods",rationale:"Current payback period exceeds typical 3-5 year target"}),a.costSavings.total<.3*t.totalInvestment&&r.push({priority:"Medium",category:"Cost Efficiency",action:"Increase focus on operational efficiency and cost reduction",rationale:"Cost savings should represent at least 30% of total investment"}),e.netPresentValue<0&&r.push({priority:"High",category:"Investment Strategy",action:"Reassess investment priorities and timeline",rationale:"Negative NPV indicates investment may not create value"}),r}static benchmarkROI(e){const t={manufacturing:{roi:18,payback:4.2},technology:{roi:25,payback:3.5},energy:{roi:22,payback:4},finance:{roi:20,payback:3.8},retail:{roi:16,payback:4.5},general:{roi:20,payback:4}},a=t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general"]||t.general;return{industryROI:a.roi,industryPayback:a.payback,roiComparison:e.totalROI>a.roi?"Above Average":"Below Average",paybackComparison:e.paybackPeriod<a.payback?"Better than Average":"Slower than Average"}}static getDefaultROI(){return{totalROI:0,annualizedROI:0,paybackPeriod:0,netPresentValue:0,investments:{totalInvestment:0},benefits:{totalBenefits:0},risks:{totalRiskMitigation:0},breakdown:{},recommendations:[],calculatedAt:(new Date).toISOString()}}}const i=r},5487:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(5043),i=a(3005),s=a(6110),n=a(5571),o=a(9842),c=a(5553),l=a(1677),u=a(7206);class d{static async calculate(e,t){try{switch(e){case"carbon":const{CarbonFootprintCalculator:r}=await Promise.resolve().then(a.bind(a,9842));return r.calculateTotalFootprint(t);case"water":const{WaterStressCalculator:i}=await Promise.resolve().then(a.bind(a,5553));return i.calculateWaterStress(t);case"roi":const{ESGROICalculator:s}=await Promise.resolve().then(a.bind(a,1677));return s.calculateESGROI(t);case"intensity":const{EmissionIntensityCalculator:n}=await Promise.resolve().then(a.bind(a,7206));return n.calculateEmissionIntensity(t);default:throw new Error(`Unknown calculator type: ${e}`)}}catch(r){return console.error(`Calculator ${e} failed:`,r),{error:r.message,type:e}}}static getAvailableCalculators(){return Object.keys(this.calculators)}static getCalculatorInfo(e){return{carbon:{name:"Carbon Footprint Calculator",description:"Calculate Scope 1, 2, 3 emissions with recommendations",inputs:["scope1","scope2","scope3"],outputs:["totalEmissions","breakdown","recommendations"]},water:{name:"Water Stress Calculator",description:"Assess water stress levels and efficiency metrics",inputs:["consumption","location","quality","efficiency"],outputs:["stressScore","riskAssessment","recommendations"]},roi:{name:"ESG ROI Calculator",description:"Calculate return on investment for ESG initiatives",inputs:["investments","benefits","risks","timeframe"],outputs:["totalROI","paybackPeriod","netPresentValue"]},intensity:{name:"Emission Intensity Calculator",description:"Calculate emission intensity metrics and benchmarks",inputs:["emissions","businessMetrics","industry"],outputs:["intensityMetrics","benchmarks","trends"]}}[e]||null}}d.calculators={carbon:"CarbonFootprintCalculator",water:"WaterStressCalculator",roi:"ESGROICalculator",intensity:"EmissionIntensityCalculator"};const m=class{static getESGData(){try{return JSON.parse(localStorage.getItem("esgData")||"[]")}catch(e){return console.error("Failed to fetch ESG data:",e),[]}}static transformForCarbonCalculator(e){const t=e;return{scope1:{naturalGas:this.findMetricValue(t,"naturalgas")||this.findMetricValue(t,"gas")||0,diesel:this.findMetricValue(t,"diesel")||this.findMetricValue(t,"fuel")||0,gasoline:this.findMetricValue(t,"gasoline")||this.findMetricValue(t,"petrol")||0,coal:this.findMetricValue(t,"coal")||0},scope2:{gridElectricity:this.findMetricValue(t,"energy")||this.findMetricValue(t,"electricity")||0,renewableElectricity:this.findMetricValue(t,"renewable")||0},scope3:{transport:{car:this.findMetricValue(t,"transport")||this.findMetricValue(t,"vehicle")||0,plane:this.findMetricValue(t,"travel")||this.findMetricValue(t,"flight")||0},supplyChainEmissions:this.findMetricValue(t,"supply")||this.findMetricValue(t,"chain")||0,wasteDisposal:this.findMetricValue(t,"waste")||0}}}static transformForWaterCalculator(e){const t=e.filter(e=>"environmental"===e.category),a=e.find(e=>e.companyName)||{};return{consumption:{totalAnnual:this.findMetricValue(t,"waterUsage")||0,recycled:this.findMetricValue(t,"waterRecycled")||0,rainwater:this.findMetricValue(t,"rainwaterHarvested")||0,revenue:this.findMetricValue(e,"totalRevenue")||1e7},location:{region:a.region||"North America",country:a.country||"United States",climate:"temperate"},quality:{ph:7.2,tds:250,turbidity:.8,chlorine:.6,hardness:120},efficiency:{recyclingRate:this.calculateRecyclingRate(t),leakageRate:10,conservationMeasures:60,technologyScore:70,industry:a.sector||"general"}}}static transformForROICalculator(e){const t=e;e.find(e=>e.companyName);return{investments:{renewableEnergy:this.findMetricValue(t,"renewableEnergyInvestment")||0,energyEfficiency:this.findMetricValue(t,"energyEfficiencyInvestment")||0,employeeTraining:this.findMetricValue(t,"trainingInvestment")||0,healthSafety:this.findMetricValue(t,"healthSafetyInvestment")||0,complianceSystem:this.findMetricValue(t,"complianceInvestment")||0},benefits:{costSavings:{energyReduction:this.calculateEnergySavings(t),waterReduction:this.calculateWaterSavings(t),operationalEfficiency:this.findMetricValue(t,"operationalSavings")||0,turnoverReduction:this.calculateTurnoverReduction(t),avgRecruitmentCost:15e3},revenueGains:{greenProductRevenue:this.findMetricValue(t,"greenRevenue")||0,sustainabilityPremium:this.findMetricValue(t,"sustainabilityPremium")||0,customerRetentionImprovement:5,avgCustomerValue:2e3}},timeframe:5}}static transformForIntensityCalculator(e){const t=e.filter(e=>"environmental"===e.category),a=e.filter(e=>"social"===e.category),r=e.find(e=>e.companyName)||{};return{emissions:{scope1:this.calculateScope1FromData(t),scope2:this.calculateScope2FromData(t),scope3:this.calculateScope3FromData(t)},businessMetrics:{revenue:this.findMetricValue(e,"totalRevenue")||1e7,employees:this.findMetricValue(a,"totalEmployees")||250,production:this.findMetricValue(t,"productionVolume")||5e4,floorArea:this.findMetricValue(t,"facilityArea")||1e4,energyConsumption:this.findMetricValue(t,"energyConsumption")||1e5},industry:r.sector||"manufacturing",targets:{revenue:{value:.2,timeline:5},employee:{value:6e3,timeline:3}}}}static findMetricValue(e,t){for(const a of e){const e=t.toLowerCase().replace(/[_\s]/g,"");if(a.metric&&a.metric.toLowerCase().replace(/[_\s]/g,"").includes(e)&&void 0!==a.value)return parseFloat(a.value)||0;for(const[t,r]of Object.entries(a))if(t.toLowerCase().replace(/[_\s]/g,"").includes(e)&&void 0!==r&&!isNaN(r))return parseFloat(r)||0;["environmental","social","governance"].forEach(t=>{if(a[t]&&"object"===typeof a[t])for(const[r,i]of Object.entries(a[t]))if(r.toLowerCase().replace(/[_\s]/g,"").includes(e)&&void 0!==i&&!isNaN(i))return parseFloat(i)||0})}return 0}static calculateScope1FromData(e){return 2*(this.findMetricValue(e,"naturalGas")||0)+2.68*(this.findMetricValue(e,"diesel")||0)}static calculateScope2FromData(e){return.4*(this.findMetricValue(e,"energyConsumption")||0)}static calculateScope3FromData(e){return(this.findMetricValue(e,"transportEmissions")||0)+.5*(this.findMetricValue(e,"wasteGenerated")||0)}static calculateRecyclingRate(e){const t=this.findMetricValue(e,"waterUsage")||0,a=this.findMetricValue(e,"waterRecycled")||0;return t>0?a/t*100:0}static calculateEnergySavings(e){return.12*(this.findMetricValue(e,"energyEfficiencyGain")||0)}static calculateWaterSavings(e){return.003*(this.findMetricValue(e,"waterSavings")||0)}static calculateTurnoverReduction(e){const t=this.findMetricValue(e,"employeeTurnover")||15;return Math.max(0,t-10)}static getCalculatorData(e){const t=this.getESGData();if(0===t.length)return null;const a=this.autoTransformData(t,e);switch(e){case"carbon":return{...this.transformForCarbonCalculator(t),...a};case"water":return{...this.transformForWaterCalculator(t),...a};case"roi":return{...this.transformForROICalculator(t),...a};case"intensity":return{...this.transformForIntensityCalculator(t),...a};default:return a}}static getDataSummary(){const e=this.getESGData();return{totalEntries:e.length,categories:{environmental:e.filter(e=>"environmental"===e.category).length,social:e.filter(e=>"social"===e.category).length,governance:e.filter(e=>"governance"===e.category).length},companies:[...new Set(e.map(e=>e.companyName).filter(Boolean))],lastUpdated:e.length>0?Math.max(...e.map(e=>new Date(e.timestamp||0).getTime())):null}}static validateDataForCalculator(e){const t=this.getCalculatorData(e);if(!t)return{isValid:!1,message:"No ESG data available. Please add data through Data Entry first.",missingFields:["All data fields"]};const a=[];return({carbon:["scope1","scope2"],water:["consumption.totalAnnual"],roi:["investments","benefits"],intensity:["emissions","businessMetrics.revenue"]}[e]||[]).forEach(e=>{const r=this.getNestedValue(t,e);(!r||"object"===typeof r&&Object.values(r).every(e=>0===e))&&a.push(e)}),{isValid:0===a.length,message:0===a.length?"Data is valid for calculation":"Some required data is missing",missingFields:a}}static getNestedValue(e,t){return t.split(".").reduce((e,t)=>null===e||void 0===e?void 0:e[t],e)}static autoTransformData(e,t){const a={};return e.forEach(e=>{Object.entries(e).forEach(e=>{let[t,r]=e;isNaN(r)||null===r||""===r||(a[t]=parseFloat(r)),"object"===typeof r&&null!==r&&Object.entries(r).forEach(e=>{let[r,i]=e;isNaN(i)||null===i||""===i||(a[`${t}_${r}`]=parseFloat(i),a[r]=parseFloat(i))})})}),a}};var g=a(579);const p=()=>{const{isDark:e}=(0,i.D)(),t=(0,s.Y)(e),[a,p]=(0,r.useState)("carbon"),[y,h]=(0,r.useState)({}),[v,f]=(0,r.useState)(null),[b,x]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[S,R]=(0,r.useState)(null),M=[{id:"carbon",name:"Carbon Footprint",icon:"\ud83c\udf0d"},{id:"water",name:"Water Stress",icon:"\ud83d\udca7"},{id:"roi",name:"ESG ROI",icon:"\ud83d\udcb0"},{id:"intensity",name:"Emission Intensity",icon:"\ud83d\udcc8"}],C=async e=>{x(!0);try{let t,a;if(w){if(a=m.getCalculatorData(e),!a)return j("No ESG data available. Please add data through Data Entry first.","warning"),void x(!1)}else a=E(e);switch(e){case"carbon":t=o.A.calculateTotalFootprint(a);break;case"water":t=c.A.calculateWaterStress(a);break;case"roi":t=l.A.calculateESGROI(a);break;case"intensity":t=u.A.calculateEmissionIntensity(a);break;default:t=await d.calculate(e,a)}h(a=>({...a,[e]:t})),j(`${e} calculator ${w?"(real data)":"(test data)"} successful`,"success")}catch(t){console.error(`${e} calculator failed:`,t),j(`${e} calculator failed: ${t.message}`,"error")}x(!1)},E=e=>({carbon:{scope1:{naturalGas:1e3,diesel:500,gasoline:300},scope2:{gridElectricity:5e4,renewableElectricity:1e4},scope3:{transport:{car:1e4,plane:5e3,truck:2e3},businessTravel:{flights:8e3,carTravel:3e3},supplyChainEmissions:15e3,wasteDisposal:500}},water:{consumption:{totalAnnual:1e5,recycled:2e4,rainwater:5e3,revenue:1e7},location:{region:"North America",country:"United States",climate:"temperate",localSupply:85},quality:{ph:7.2,tds:250,turbidity:.8,chlorine:.6,hardness:120},efficiency:{recyclingRate:25,leakageRate:8,conservationMeasures:70,technologyScore:75,industry:"manufacturing"}},roi:{investments:{renewableEnergy:5e5,energyEfficiency:2e5,employeeTraining:1e5,healthSafety:15e4,complianceSystem:8e4},benefits:{costSavings:{energyReduction:5e4,waterReduction:1e4,operationalEfficiency:75e3,turnoverReduction:5,avgRecruitmentCost:15e3},revenueGains:{greenProductRevenue:2e5,sustainabilityPremium:5e4,customerRetentionImprovement:10,avgCustomerValue:2e3},riskReduction:{regulatoryFineReduction:1e5,reputationProtection:15e4},brandValue:{brandPremium:8e4,engagementImprovement:15,productivityGain:3e3}},timeframe:5},intensity:{emissions:{scope1:5e3,scope2:8e3,scope3:12e3},businessMetrics:{revenue:1e7,employees:250,production:5e4,floorArea:1e4,energyConsumption:1e5},industry:"manufacturing",historicalData:[{year:2020,revenue:.3,employee:9e3,totalIntensity:.28},{year:2021,revenue:.28,employee:8500,totalIntensity:.26},{year:2022,revenue:.25,employee:8e3,totalIntensity:.25}],targets:{revenue:{value:.2,timeline:5},employee:{value:6e3,timeline:3}}}}[e]||{}),j=function(e){f({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"}),setTimeout(()=>f(null),3e3)},I=()=>{try{const e=m.getDataSummary();R(e),j("Data summary refreshed","success")}catch(e){console.error("Failed to refresh data summary:",e),j("Failed to refresh data summary","error")}};r.useEffect(()=>{I()},[]);const O=e=>{var a,r,i,s,n,o,c,l,u,d,m,p,h,v,f,b,x,w,k,S;const R=y[e];return R?(0,g.jsxs)("div",{className:`mt-4 p-4 rounded-lg ${t.bg.subtle}`,children:[(0,g.jsx)("h4",{className:`font-semibold mb-2 ${t.text.primary}`,children:"Results:"}),(0,g.jsxs)("div",{className:"space-y-2 text-sm",children:["carbon"===e&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{children:["Total Emissions: ",null===(a=R.totalEmissions)||void 0===a?void 0:a.toFixed(2)," kg CO2e"]}),(0,g.jsxs)("div",{children:["Scope 1: ",null===(r=R.scope1)||void 0===r||null===(i=r.total)||void 0===i?void 0:i.toFixed(2)," kg CO2e"]}),(0,g.jsxs)("div",{children:["Scope 2: ",null===(s=R.scope2)||void 0===s||null===(n=s.total)||void 0===n?void 0:n.toFixed(2)," kg CO2e"]}),(0,g.jsxs)("div",{children:["Scope 3: ",null===(o=R.scope3)||void 0===o||null===(c=o.total)||void 0===c?void 0:c.toFixed(2)," kg CO2e"]})]}),"water"===e&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{children:["Stress Score: ",R.overallStressScore,"/100"]}),(0,g.jsxs)("div",{children:["Stress Level: ",null===(l=R.stressLevel)||void 0===l?void 0:l.description]}),(0,g.jsxs)("div",{children:["Availability Score: ",null===(u=R.availability)||void 0===u?void 0:u.score,"/100"]}),(0,g.jsxs)("div",{children:["Quality Score: ",null===(d=R.quality)||void 0===d?void 0:d.overallScore,"/100"]})]}),"roi"===e&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{children:["Total ROI: ",R.totalROI,"%"]}),(0,g.jsxs)("div",{children:["Payback Period: ",R.paybackPeriod," years"]}),(0,g.jsxs)("div",{children:["NPV: $",null===(m=R.netPresentValue)||void 0===m?void 0:m.toLocaleString()]}),(0,g.jsxs)("div",{children:["Total Investment: $",null===(p=R.investments)||void 0===p||null===(h=p.totalInvestment)||void 0===h?void 0:h.toLocaleString()]})]}),"intensity"===e&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{children:["Total Emissions: ",R.totalEmissions," kg CO2e"]}),(0,g.jsxs)("div",{children:["Revenue Intensity: ",null===(v=R.intensityMetrics)||void 0===v||null===(f=v.revenue)||void 0===f||null===(b=f.value)||void 0===b?void 0:b.toFixed(4)," kg CO2e/$"]}),(0,g.jsxs)("div",{children:["Employee Intensity: ",null===(x=R.intensityMetrics)||void 0===x||null===(w=x.employee)||void 0===w||null===(k=w.value)||void 0===k?void 0:k.toFixed(0)," kg CO2e/employee"]}),(0,g.jsxs)("div",{children:["Overall Performance: ",null===(S=R.benchmarks)||void 0===S?void 0:S.overallPerformance]})]})]})]}):null};return(0,g.jsx)("div",{className:`min-h-screen p-6 ${t.bg.gradient}`,children:(0,g.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h1",{className:`text-3xl font-bold ${t.text.primary}`,children:"ESG Calculator Dashboard"}),(0,g.jsx)("p",{className:`text-lg ${t.text.secondary}`,children:"Test and validate specialized ESG calculators"}),(0,g.jsx)("div",{className:`mt-4 p-4 rounded-lg ${t.bg.card}`,children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:`flex items-center cursor-pointer ${t.text.primary}`,children:[(0,g.jsx)("input",{type:"checkbox",checked:w,onChange:e=>{k(e.target.checked),I()},className:"mr-2"}),"Use Real Data from Data Entry"]}),(0,g.jsx)("p",{className:`text-sm ${t.text.secondary} mt-1`,children:w?"Using actual ESG data from Data Entry module":"Using sample test data"})]}),S&&(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("p",{className:`text-sm ${t.text.primary}`,children:["Available Data: ",S.totalEntries," entries"]}),(0,g.jsxs)("p",{className:`text-xs ${t.text.secondary}`,children:["E: ",S.categories.environmental," | S: ",S.categories.social," | G: ",S.categories.governance]})]})]})})]}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:M.map(e=>(0,g.jsx)("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all ${a===e.id?"ring-2 ring-blue-500 bg-blue-50":t.bg.card}`,onClick:()=>p(e.id),children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,g.jsx)("h3",{className:`font-bold ${t.text.primary}`,children:e.name}),(0,g.jsx)(n.$n,{variant:"primary",size:"sm",onClick:t=>{t.stopPropagation(),C(e.id)},disabled:b,className:"mt-3 w-full",children:"Test Calculator"}),O(e.id)]})},e.id))}),(0,g.jsxs)("div",{className:`p-6 rounded-xl shadow-lg ${t.bg.card}`,children:[(0,g.jsx)("h2",{className:`text-2xl font-bold mb-4 ${t.text.primary}`,children:"Calculator Status"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:`font-semibold mb-3 ${t.text.primary}`,children:"Available Calculators"}),(0,g.jsx)("ul",{className:"space-y-2",children:d.getAvailableCalculators().map(e=>(0,g.jsxs)("li",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),(0,g.jsx)("span",{className:t.text.secondary,children:e})]},e))})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:`font-semibold mb-3 ${t.text.primary}`,children:"Test All Calculators"}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(n.$n,{variant:"primary",onClick:async()=>{for(const e of M)await C(e.id)},disabled:b,className:"w-full",children:"Run All Tests"}),(0,g.jsx)(n.$n,{variant:"outline",onClick:I,className:"w-full",children:"Refresh Data Summary"}),w&&0===(null===S||void 0===S?void 0:S.totalEntries)&&(0,g.jsx)("div",{className:"p-3 rounded bg-yellow-100 text-yellow-800 text-sm",children:"No ESG data found. Add data through Data Entry first."})]})]})]})]}),v&&(0,g.jsx)(n.y8,{message:v.message,type:v.type,onClose:()=>f(null)})]})})}},5553:(e,t,a)=>{a.d(t,{A:()=>i,WaterStressCalculator:()=>r});class r{static calculateWaterStress(e){try{const t=this.calculateWaterConsumption(e.consumption||{}),a=this.assessWaterAvailability(e.location||{}),r=this.assessWaterQuality(e.quality||{}),i=this.calculateWaterEfficiency(e.efficiency||{}),s=this.calculateStressScore(t,a,r,i);return{overallStressScore:s,stressLevel:this.getStressLevel(s),consumption:t,availability:a,quality:r,efficiency:i,riskAssessment:this.assessRisks(s,e.location),recommendations:this.generateRecommendations(s,t,i),calculatedAt:(new Date).toISOString()}}catch(t){return console.error("Water stress calculation failed:",t),this.getDefaultAssessment()}}static calculateWaterConsumption(e){const t=e.totalAnnual||0,a=e.peakMonthly||0,r=e.recycled||0,i=e.rainwater||0;return{totalAnnual:t,netConsumption:t-r-i,peakMonthly:a,recycledPercentage:t>0?r/t*100:0,rainwaterPercentage:t>0?i/t*100:0,consumptionIntensity:t/(e.revenue||1e6),seasonalVariation:this.calculateSeasonalVariation(e.monthly||[])}}static calculateSeasonalVariation(e){if(e.length<12)return 0;const t=e.reduce((e,t)=>e+t,0)/e.length,a=e.reduce((e,a)=>e+Math.pow(a-t,2),0)/e.length;return Math.sqrt(a)/t*100}static assessWaterAvailability(e){const t=e.region||"Global",a=e.country||"Unknown",r=e.localSupply||50,i=this.regionalFactors[t]||{availability:.7,quality:.8,infrastructure:.8},s={"United States":.9,Canada:.95,Germany:.9,India:.6,China:.65,Brazil:.75,Australia:.8}[a]||.7,n=100*(.4*i.availability+.4*s+r/100*.2);return{score:Math.round(n),regionalFactor:i.availability,countryFactor:s,localSupplyReliability:r,infrastructure:100*i.infrastructure,seasonalAvailability:this.assessSeasonalAvailability(e.climate)}}static assessSeasonalAvailability(){return 100*({arid:.3,semiarid:.5,temperate:.8,tropical:.7,continental:.75,mediterranean:.6}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"temperate"]||.7)}static assessWaterQuality(e){const t=e.ph||7,a=e.tds||300,r=e.turbidity||1,i=e.chlorine||.5,s=e.hardness||150,n=this.scoreParameter(t,6.5,8.5,"optimal"),o=this.scoreParameter(a,0,500,"lower"),c=this.scoreParameter(r,0,1,"lower"),l=this.scoreParameter(i,.2,1,"optimal"),u=this.scoreParameter(s,60,120,"optimal"),d=(n+o+c+l+u)/5;return{overallScore:Math.round(d),parameters:{ph:{value:t,score:n},tds:{value:a,score:o},turbidity:{value:r,score:c},chlorine:{value:i,score:l},hardness:{value:s,score:u}},treatmentRequired:d<70,potabilityRating:this.getPotabilityRating(d)}}static scoreParameter(e,t,a,r){switch(r){case"optimal":if(e>=t&&e<=a)return 100;const r=Math.min(Math.abs(e-t),Math.abs(e-a));return Math.max(0,100-r/Math.max(t,a-t)*100);case"lower":return e<=a?100:Math.max(0,100-(e-a)/a*100);default:return 50}}static getPotabilityRating(e){return e>=90?"Excellent":e>=80?"Good":e>=70?"Acceptable":e>=60?"Poor":"Unacceptable"}static calculateWaterEfficiency(e){const t=e.recyclingRate||0,a=e.leakageRate||10,r=e.conservationMeasures||0,i=e.technologyScore||50,s=.3*t+.3*(100-a)+.2*r+.2*i;return{overallScore:Math.round(s),recyclingRate:t,leakageRate:a,conservationMeasures:r,technologyScore:i,waterProductivity:this.calculateWaterProductivity(e),benchmarkComparison:this.benchmarkEfficiency(s,e.industry)}}static calculateWaterProductivity(e){return(e.revenue||1e6)/(e.totalConsumption||1e4)}static benchmarkEfficiency(e){const t={manufacturing:65,technology:80,agriculture:45,energy:60,textiles:50,food:55,general:60},a=t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general"]||t.general;return{industryBenchmark:a,performance:e>a?"Above Average":e>a-10?"Average":"Below Average",gap:e-a}}static calculateStressScore(e,t,a,r){const i=.3*Math.min(100,1e3*e.consumptionIntensity)+.35*(100-t.score)+.2*(100-a.overallScore)+.15*(100-r.overallScore);return Math.round(Math.min(100,Math.max(0,i)))}static getStressLevel(e){for(const[t,a]of Object.entries(this.waterStressLevels))if(e>=a.min&&e<a.max)return{level:t,...a};return{level:"extremelyHigh",...this.waterStressLevels.extremelyHigh}}static assessRisks(e,t){const a=[];return e>60&&a.push({type:"Supply Risk",severity:"High",description:"Potential water supply disruptions",mitigation:"Diversify water sources, implement conservation measures"}),e>40&&a.push({type:"Regulatory Risk",severity:"Medium",description:"Increased water usage regulations likely",mitigation:"Monitor regulatory changes, prepare compliance strategies"}),e>70&&a.push({type:"Operational Risk",severity:"High",description:"Business operations may be impacted",mitigation:"Develop water contingency plans, invest in efficiency"}),a}static generateRecommendations(e,t,a){const r=[];return e>50&&r.push({priority:"High",category:"Conservation",action:"Implement water recycling and reuse systems",impact:"Could reduce consumption by 30-50%",cost:"Medium"}),a.recyclingRate<20&&r.push({priority:"Medium",category:"Efficiency",action:"Install water recycling infrastructure",impact:"Increase water efficiency by 25%",cost:"High"}),a.leakageRate>15&&r.push({priority:"High",category:"Infrastructure",action:"Repair and upgrade water distribution systems",impact:"Reduce water loss by 10-20%",cost:"Medium"}),r}static getDefaultAssessment(){return{overallStressScore:0,stressLevel:{level:"low",description:"Low water stress"},consumption:{totalAnnual:0,netConsumption:0},availability:{score:0},quality:{overallScore:0},efficiency:{overallScore:0},riskAssessment:[],recommendations:[],calculatedAt:(new Date).toISOString()}}}r.waterStressLevels={low:{min:0,max:10,description:"Low water stress"},lowMedium:{min:10,max:20,description:"Low-medium water stress"},mediumHigh:{min:20,max:40,description:"Medium-high water stress"},high:{min:40,max:80,description:"High water stress"},extremelyHigh:{min:80,max:100,description:"Extremely high water stress"}},r.regionalFactors={"North America":{availability:.8,quality:.9,infrastructure:.95},Europe:{availability:.85,quality:.95,infrastructure:.98},Asia:{availability:.6,quality:.7,infrastructure:.75},Africa:{availability:.4,quality:.5,infrastructure:.6},"South America":{availability:.7,quality:.75,infrastructure:.8},Oceania:{availability:.75,quality:.9,infrastructure:.9}};const i=r},5571:(e,t,a)=>{a.d(t,{$n:()=>c,Fc:()=>u,aF:()=>o,kt:()=>s,pd:()=>l,y8:()=>n});var r=a(5043),i=a(579);const s=e=>{let{size:t="md",color:a="blue",isDark:r=!1}=e;return(0,i.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t]} border-2 ${{blue:"border-blue-500",green:"border-green-500",red:"border-red-500",white:"border-white"}[a]} border-t-transparent rounded-full animate-spin`})},n=e=>{let{message:t,type:a="success",onClose:s}=e;(0,r.useEffect)(()=>{const e=setTimeout(s,3e3);return()=>clearTimeout(e)},[s]);return(0,i.jsx)("div",{className:`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 animate-slide-up ${{success:"bg-green-500 text-white",error:"bg-red-500 text-white",warning:"bg-yellow-500 text-black",info:"bg-blue-500 text-white"}[a]}`,children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{children:t}),(0,i.jsx)("button",{onClick:s,className:"ml-2 text-lg",children:"\xd7"})]})})},o=e=>{let{isOpen:t,onClose:a,title:r,children:s,isDark:n=!1}=e;return t?(0,i.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:a}),(0,i.jsxs)("div",{className:"relative rounded-2xl p-6 max-w-md w-full mx-4 animate-fade-in "+(n?"bg-gray-800 text-white":"bg-white text-gray-900"),children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:r}),(0,i.jsx)("button",{onClick:a,className:"text-2xl "+(n?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"),children:"\xd7"})]}),s]})]}):null},c=e=>{let{children:t,variant:a="primary",size:r="md",loading:n=!1,disabled:o=!1,onClick:c,icon:l,type:u="button",...d}=e;return(0,i.jsxs)("button",{type:u,className:`\n        inline-flex items-center justify-center font-medium rounded-lg\n        transition-all duration-200 hover:scale-105 active:scale-95\n        ${{primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-900",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700"}[a]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]}\n        ${o||n?"opacity-50 cursor-not-allowed":""}\n      `,disabled:o||n,onClick:c,...d,children:[n&&(0,i.jsx)(s,{size:"sm"}),l&&(0,i.jsx)("span",{className:"mr-2",children:l}),(0,i.jsx)("span",{className:n?"ml-2":"",children:t})]})},l=e=>{let{label:t,error:a,icon:r,className:s="",isDark:n=!1,...o}=e;return(0,i.jsxs)("div",{className:"w-full",children:[t&&(0,i.jsx)("label",{className:"block text-sm font-medium mb-1 "+(n?"text-gray-300":"text-gray-700"),children:t}),(0,i.jsxs)("div",{className:"relative",children:[r&&(0,i.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 "+(n?"text-gray-500":"text-gray-400"),children:r}),(0,i.jsx)("input",{className:`\n          w-full px-3 py-2 border rounded-lg transition-all duration-200\n          focus:ring-2 focus:ring-blue-500 focus:border-blue-500\n          ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}\n          ${r?"pl-10":""}\n          ${a?"border-red-500 focus:ring-red-500":""}\n          ${s}\n        `,...o})]}),a&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a})]})},u=e=>{let{type:t="info",title:a,message:r,children:s,onClose:n,isDark:o=!1,className:c=""}=e;const l={info:o?"bg-blue-900/30 border-blue-700 text-blue-300":"bg-blue-50 border-blue-200 text-blue-800",success:o?"bg-green-900/30 border-green-700 text-green-300":"bg-green-50 border-green-200 text-green-800",warning:o?"bg-yellow-900/30 border-yellow-700 text-yellow-300":"bg-yellow-50 border-yellow-200 text-yellow-800",error:o?"bg-red-900/30 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-800"};return(0,i.jsx)("div",{className:`border rounded-lg p-4 transition-colors duration-300 ${l[t]}`,children:(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("span",{className:"text-lg mr-3",children:{info:"\u2139\ufe0f",success:"\u2705",warning:"\u26a0\ufe0f",error:"\u274c"}[t]}),(0,i.jsxs)("div",{className:"flex-1",children:[a&&(0,i.jsx)("h4",{className:"font-medium mb-1",children:a}),(0,i.jsx)("div",{children:r||s})]}),n&&(0,i.jsx)("button",{onClick:n,className:"ml-3 text-lg hover:opacity-70",children:"\xd7"})]})})}},6110:(e,t,a)=>{a.d(t,{Y:()=>r});const r=e=>({bg:{primary:e?"bg-gray-900":"bg-white",secondary:e?"bg-gray-800":"bg-gray-50",tertiary:e?"bg-gray-700":"bg-gray-100",gradient:e?"bg-gradient-to-br from-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100",card:e?"bg-gray-800":"bg-white",input:e?"bg-gray-700":"bg-white",subtle:e?"bg-gray-700":"bg-gray-50",accent:e?"bg-blue-900/30":"bg-blue-50"},text:{primary:e?"text-white":"text-gray-900",secondary:e?"text-gray-300":"text-gray-700",tertiary:e?"text-gray-400":"text-gray-600",muted:"text-gray-500",accent:"text-blue-500"},border:{primary:e?"border-gray-700":"border-gray-200",secondary:e?"border-gray-600":"border-gray-300",input:e?"border-gray-600":"border-gray-300"},hover:{bg:e?"hover:bg-gray-700":"hover:bg-gray-100",text:e?"hover:text-white":"hover:text-gray-900",border:e?"hover:border-gray-500":"hover:border-gray-400",subtle:e?"hover:bg-gray-600":"hover:bg-gray-200",card:e?"hover:bg-gray-700":"hover:bg-gray-50"},focus:{ring:"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}})},7206:(e,t,a)=>{a.d(t,{A:()=>i,EmissionIntensityCalculator:()=>r});class r{static calculateEmissionIntensity(e){try{const t=this.processEmissionData(e.emissions||{}),a=this.processBusinessMetrics(e.businessMetrics||{}),r=this.calculateIntensities(t,a),i=this.calculateTrends(e.historicalData||[]),s=this.compareToBenchmarks(r,e.industry);return{totalEmissions:t.total,intensityMetrics:r,trends:i,benchmarks:s,targetAnalysis:this.analyzeTargets(r,e.targets||{}),recommendations:this.generateRecommendations(r,s,i),calculatedAt:(new Date).toISOString()}}catch(t){return console.error("Emission intensity calculation failed:",t),this.getDefaultIntensity()}}static processEmissionData(e){const t=e.scope1||0,a=e.scope2||0,r=e.scope3||0,i=t+a+r;return{scope1:t,scope2:a,scope3:r,total:i,breakdown:{scope1Percentage:i>0?Math.round(t/i*100):0,scope2Percentage:i>0?Math.round(a/i*100):0,scope3Percentage:i>0?Math.round(r/i*100):0}}}static processBusinessMetrics(e){return{revenue:e.revenue||0,employees:e.employees||0,production:e.production||0,floorArea:e.floorArea||0,energyConsumption:e.energyConsumption||0,operatingHours:e.operatingHours||8760,facilities:e.facilities||1}}static calculateIntensities(e,t){const a={};return t.revenue>0&&(a.revenue={value:e.total/t.revenue,unit:this.intensityMetrics.revenue,scope1:e.scope1/t.revenue,scope2:e.scope2/t.revenue,scope3:e.scope3/t.revenue}),t.employees>0&&(a.employee={value:e.total/t.employees,unit:this.intensityMetrics.employee,scope1:e.scope1/t.employees,scope2:e.scope2/t.employees,scope3:e.scope3/t.employees}),t.production>0&&(a.production={value:e.total/t.production,unit:this.intensityMetrics.production,scope1:e.scope1/t.production,scope2:e.scope2/t.production,scope3:e.scope3/t.production}),t.floorArea>0&&(a.area={value:e.total/t.floorArea,unit:this.intensityMetrics.area,scope1:e.scope1/t.floorArea,scope2:e.scope2/t.floorArea,scope3:e.scope3/t.floorArea}),t.energyConsumption>0&&(a.energy={value:e.total/t.energyConsumption,unit:this.intensityMetrics.energy,scope1:e.scope1/t.energyConsumption,scope2:e.scope2/t.energyConsumption,scope3:e.scope3/t.energyConsumption}),a}static calculateTrends(e){if(e.length<2)return{trend:"insufficient_data",change:0,analysis:"Need at least 2 years of data"};const t=e.sort((e,t)=>new Date(e.year)-new Date(t.year)),a=t[t.length-1],r=t[t.length-2],i={};["revenue","employee","production","area","energy"].forEach(e=>{if(a[e]&&r[e]){const t=(a[e]-r[e])/r[e]*100;i[e]={change:Math.round(100*t)/100,direction:t>5?"increasing":t<-5?"decreasing":"stable",yearOverYear:t}}});const s=this.calculateOverallTrend(t);return{...i,overall:s,dataPoints:t.length,timespan:`${t[0].year} - ${a.year}`}}static calculateOverallTrend(e){if(e.length<3)return{trend:"insufficient_data"};const t=e.length,a=e.map((e,t)=>t),r=e.map(e=>e.totalIntensity||0),i=a.reduce((e,t)=>e+t,0),s=r.reduce((e,t)=>e+t,0),n=(t*a.reduce((e,t,a)=>e+t*r[a],0)-i*s)/(t*a.reduce((e,t)=>e+t*t,0)-i*i),o=n/(s/t)*100;return{slope:n,intercept:(s-n*i)/t,trendPercentage:Math.round(100*o)/100,direction:n>.05?"increasing":n<-.05?"decreasing":"stable",strength:Math.abs(o)>10?"strong":Math.abs(o)>5?"moderate":"weak"}}static compareToBenchmarks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";const a=this.industryBenchmarks[t]||this.industryBenchmarks.manufacturing,r={};return Object.entries(e).forEach(e=>{let[t,i]=e;if(a[t]){const e=a[t],s=i.value/e;r[t]={benchmark:e,current:i.value,ratio:Math.round(100*s)/100,performance:s<.8?"excellent":s<1?"good":s<1.2?"average":"poor",gap:i.value-e,gapPercentage:Math.round((i.value-e)/e*100)}}}),{industry:t,comparisons:r,overallPerformance:this.calculateOverallPerformance(r),ranking:this.estimateIndustryRanking(r)}}static calculateOverallPerformance(e){const t=Object.values(e).map(e=>e.ratio);if(0===t.length)return"unknown";const a=t.reduce((e,t)=>e+t,0)/t.length;return a<.8?"excellent":a<1?"good":a<1.2?"average":"poor"}static estimateIndustryRanking(e){const t=Object.values(e).reduce((e,t)=>e+t.ratio,0)/Object.keys(e).length;return t<.7?"Top 10%":t<.9?"Top 25%":t<1.1?"Top 50%":t<1.3?"Bottom 50%":"Bottom 25%"}static analyzeTargets(e,t){const a={};return Object.entries(t).forEach(t=>{let[r,i]=t;if(e[r]){const t=e[r].value,s=t-i.value,n=s/i.value*100;a[r]={target:i.value,current:t,gap:s,gapPercentage:Math.round(100*n)/100,status:s<=0?"achieved":s<=.1*i.value?"close":"needs_improvement",timeToTarget:this.estimateTimeToTarget(t,i.value,i.timeline||5),requiredReduction:s>0?Math.round(s/t*100):0}}}),a}static estimateTimeToTarget(e,t,a){if(e<=t)return 0;const r=(e-t)/e/a,i=.03;return i>=r?Math.ceil(Math.log(t/e)/Math.log(.97)):a*(r/i)}static generateRecommendations(e,t,a){const r=[];if(Object.entries(t.comparisons).forEach(e=>{let[t,a]=e;"poor"===a.performance&&r.push({priority:"High",category:"Performance Improvement",metric:t,action:`Reduce ${t} intensity by ${Math.abs(a.gapPercentage)}%`,rationale:`Currently ${a.gapPercentage}% above industry benchmark`})}),Object.entries(a).forEach(e=>{let[t,a]=e;"increasing"===a.direction&&Math.abs(a.change)>10&&r.push({priority:"Medium",category:"Trend Reversal",metric:t,action:`Implement measures to reverse increasing ${t} intensity trend`,rationale:`${t} intensity has increased by ${a.change}% year-over-year`})}),e.revenue){const{scope1:t,scope2:a,scope3:i}=e.revenue,s=Math.max(t,a,i);s===a?r.push({priority:"High",category:"Energy Transition",metric:"scope2",action:"Transition to renewable energy sources",rationale:"Scope 2 emissions represent the largest intensity component"}):s===t&&r.push({priority:"High",category:"Direct Emissions",metric:"scope1",action:"Improve operational efficiency and fuel switching",rationale:"Scope 1 emissions represent the largest intensity component"})}return r.slice(0,5)}static projectFutureIntensity(e,t,a){const r=[];let i=e;for(let s=1;s<=a;s++)i*=1-t,r.push({year:s,intensity:Math.round(1e3*i)/1e3,cumulativeReduction:Math.round((e-i)/e*100)});return r}static getDefaultIntensity(){return{totalEmissions:0,intensityMetrics:{},trends:{trend:"no_data"},benchmarks:{industry:"unknown",comparisons:{}},targetAnalysis:{},recommendations:[],calculatedAt:(new Date).toISOString()}}}r.intensityMetrics={revenue:"kg CO2e per $ revenue",employee:"kg CO2e per employee",production:"kg CO2e per unit produced",area:"kg CO2e per m\xb2 floor area",energy:"kg CO2e per kWh consumed"},r.industryBenchmarks={manufacturing:{revenue:.25,employee:8500,production:12.5},technology:{revenue:.08,employee:3200,production:2.1},energy:{revenue:.45,employee:15600,production:28.3},finance:{revenue:.05,employee:2100,production:1.2},retail:{revenue:.12,employee:4800,production:3.8},healthcare:{revenue:.18,employee:6200,production:7.4},transportation:{revenue:.35,employee:12400,production:18.7}};const i=r},9842:(e,t,a)=>{a.d(t,{A:()=>i,CarbonFootprintCalculator:()=>r});class r{static calculateTotalFootprint(e){try{const t=this.calculateScope1Emissions(e.scope1||{}),a=this.calculateScope2Emissions(e.scope2||{}),r=this.calculateScope3Emissions(e.scope3||{});return{totalEmissions:t.total+a.total+r.total,scope1:t,scope2:a,scope3:r,breakdown:this.generateBreakdown(t,a,r),recommendations:this.generateRecommendations(t,a,r),calculatedAt:(new Date).toISOString()}}catch(t){return console.error("Carbon footprint calculation failed:",t),this.getDefaultFootprint()}}static calculateScope1Emissions(e){const t={naturalGas:(e.naturalGas||0)*this.emissionFactors.naturalGas,diesel:(e.diesel||0)*this.emissionFactors.diesel,gasoline:(e.gasoline||0)*this.emissionFactors.gasoline,coal:(e.coal||0)*this.emissionFactors.coal,propane:(e.propane||0)*this.emissionFactors.propane,heatingOil:(e.heatingOil||0)*this.emissionFactors.heating_oil};return{total:Object.values(t).reduce((e,t)=>e+t,0),breakdown:t,category:"Direct Emissions"}}static calculateScope2Emissions(e){const t=(e.gridElectricity||0)*this.emissionFactors.electricity.grid,a=(e.renewableElectricity||0)*this.emissionFactors.electricity.renewable;return{total:t+a,breakdown:{gridElectricity:t,renewableElectricity:a},category:"Indirect Emissions (Energy)"}}static calculateScope3Emissions(e){const t=this.calculateTransportEmissions(e.transport||{}),a=this.calculateBusinessTravelEmissions(e.businessTravel||{}),r=e.supplyChainEmissions||0,i=.5*(e.wasteDisposal||0);return{total:t+a+r+i,breakdown:{transport:t,businessTravel:a,supplyChain:r,wasteDisposal:i},category:"Other Indirect Emissions"}}static calculateTransportEmissions(e){return Object.entries(e).reduce((e,t)=>{let[a,r]=t;return e+r*(this.emissionFactors.transport[a]||0)},0)}static calculateBusinessTravelEmissions(e){return(e.flights||0)*this.emissionFactors.transport.plane+(e.carTravel||0)*this.emissionFactors.transport.car+(e.trainTravel||0)*this.emissionFactors.transport.train}static generateBreakdown(e,t,a){const r=e.total+t.total+a.total;return{scope1Percentage:r>0?Math.round(e.total/r*100):0,scope2Percentage:r>0?Math.round(t.total/r*100):0,scope3Percentage:r>0?Math.round(a.total/r*100):0,largestSource:this.identifyLargestSource(e,t,a),emissionIntensity:this.calculateEmissionIntensity(r)}}static identifyLargestSource(e,t,a){return[{name:"Scope 1",value:e.total},{name:"Scope 2",value:t.total},{name:"Scope 3",value:a.total}].reduce((e,t)=>t.value>e.value?t:e)}static calculateEmissionIntensity(e){return e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6)}static generateRecommendations(e,t,a){const r=[];return t.total>e.total&&r.push({priority:"high",category:"Energy",action:"Switch to renewable energy sources",impact:"Could reduce emissions by up to 90%",cost:"Medium"}),e.breakdown.naturalGas>1e3&&r.push({priority:"medium",category:"Heating",action:"Improve building insulation and heating efficiency",impact:"Could reduce natural gas consumption by 20-30%",cost:"High"}),a.breakdown.transport>500&&r.push({priority:"medium",category:"Transport",action:"Implement electric vehicle fleet or remote work policies",impact:"Could reduce transport emissions by 40-60%",cost:"Medium"}),r}static calculateCarbonOffset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return{offsetRequired:Math.ceil(e/1e3),estimatedCost:Math.ceil(e/1e3)*t,offsetProjects:this.suggestOffsetProjects(e)}}static suggestOffsetProjects(e){const t=[];return e>1e4?t.push("Reforestation projects","Renewable energy development"):e>5e3?t.push("Solar panel installations","Energy efficiency programs"):t.push("Tree planting","Methane capture projects"),t}static calculateYearOverYear(e,t){if(!t||0===t.totalEmissions)return{change:0,trend:"baseline"};const a=(e.totalEmissions-t.totalEmissions)/t.totalEmissions*100;return{change:Math.round(100*a)/100,trend:a>5?"increasing":a<-5?"decreasing":"stable",absoluteChange:e.totalEmissions-t.totalEmissions}}static getDefaultFootprint(){return{totalEmissions:0,scope1:{total:0,breakdown:{},category:"Direct Emissions"},scope2:{total:0,breakdown:{},category:"Indirect Emissions (Energy)"},scope3:{total:0,breakdown:{},category:"Other Indirect Emissions"},breakdown:{scope1Percentage:0,scope2Percentage:0,scope3Percentage:0},recommendations:[],calculatedAt:(new Date).toISOString()}}}r.emissionFactors={electricity:{grid:.4,renewable:.02},naturalGas:2,diesel:2.68,gasoline:2.31,coal:2.42,propane:1.51,heating_oil:2.52,transport:{car:.21,truck:.62,plane:.255,train:.041,ship:.011}};const i=r}}]);
//# sourceMappingURL=487.5980fc2a.chunk.js.map