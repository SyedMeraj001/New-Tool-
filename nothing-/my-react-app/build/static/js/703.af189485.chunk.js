"use strict";(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[703],{1350:(e,t,a)=>{a.d(t,{A:()=>r,IoTDataIngestion:()=>s});class s{static async connectToIoTPlatform(e,t){try{const t={aws:{endpoint:"https://iot.amazonaws.com",protocol:"mqtt"},azure:{endpoint:"https://azure-iot.com",protocol:"amqp"},gcp:{endpoint:"https://cloud.google.com/iot",protocol:"mqtt"}}[e.toLowerCase()];if(!t)throw new Error(`Unsupported IoT platform: ${e}`);return{success:!0,connected:!0,platform:t}}catch(a){return console.error("IoT platform connection failed:",a),{success:!1,error:a.message}}}static async ingestSensorData(e,t){try{const a=await this.fetchSensorData(e,t);return this.processSensorData(a,t)}catch(a){return console.error("Sensor data ingestion failed:",a),this.getMockSensorData(t)}}static async fetchSensorData(e,t){const a=await fetch(`/api/iot/sensors/${e}/data`,{method:"GET",headers:{"Content-Type":"application/json"}});return await a.json()}static processSensorData(e,t){return({energy:this.processEnergyData,water:this.processWaterData,air:this.processAirQualityData,waste:this.processWasteData}[t]||this.processGenericData)(e)}static processEnergyData(e){return{totalConsumption:e.reduce((e,t)=>e+t.value,0),peakDemand:Math.max(...e.map(e=>e.value)),averageConsumption:e.reduce((e,t)=>e+t.value,0)/e.length,carbonFootprint:e.reduce((e,t)=>e+.4*t.value,0),readings:e.map(e=>({timestamp:e.timestamp,value:e.value,unit:e.unit||"kWh"})),lastUpdated:(new Date).toISOString()}}static processWaterData(e){return{totalConsumption:e.reduce((e,t)=>e+t.value,0),peakUsage:Math.max(...e.map(e=>e.value)),averageConsumption:e.reduce((e,t)=>e+t.value,0)/e.length,qualityIndex:e.filter(e=>e.quality).reduce((e,t)=>e+t.quality,0)/e.filter(e=>e.quality).length||0,readings:e.map(e=>({timestamp:e.timestamp,value:e.value,quality:e.quality,unit:e.unit||"m\xb3"})),lastUpdated:(new Date).toISOString()}}static processAirQualityData(e){return{averageCO2:e.filter(e=>"co2"===e.type).reduce((e,t)=>e+t.value,0)/e.filter(e=>"co2"===e.type).length||0,averageParticulatesMatter:e.filter(e=>"pm2.5"===e.type).reduce((e,t)=>e+t.value,0)/e.filter(e=>"pm2.5"===e.type).length||0,airQualityIndex:this.calculateAQI(e),readings:e.map(e=>({timestamp:e.timestamp,type:e.type,value:e.value,unit:e.unit||"ppm"})),lastUpdated:(new Date).toISOString()}}static processWasteData(e){return{totalGenerated:e.filter(e=>"generated"===e.type).reduce((e,t)=>e+t.value,0),totalRecycled:e.filter(e=>"recycled"===e.type).reduce((e,t)=>e+t.value,0),recyclingRate:this.calculateRecyclingRate(e),wasteStreams:this.categorizeWasteStreams(e),readings:e.map(e=>({timestamp:e.timestamp,type:e.type,value:e.value,unit:e.unit||"kg"})),lastUpdated:(new Date).toISOString()}}static calculateAQI(e){const t=e.filter(e=>"co2"===e.type),a=e.filter(e=>"pm2.5"===e.type);if(0===t.length&&0===a.length)return 0;const s=t.reduce((e,t)=>e+t.value,0)/t.length||0,r=a.reduce((e,t)=>e+t.value,0)/a.length||0;return Math.min(100,Math.max(0,100-s/10-2*r))}static calculateRecyclingRate(e){const t=e.filter(e=>"generated"===e.type).reduce((e,t)=>e+t.value,0),a=e.filter(e=>"recycled"===e.type).reduce((e,t)=>e+t.value,0);return t>0?a/t*100:0}static categorizeWasteStreams(e){const t={};return e.forEach(e=>{const a=e.category||"general";t[a]||(t[a]=0),t[a]+=e.value}),t}static getMockSensorData(e){const t={energy:{totalConsumption:15420,peakDemand:850,averageConsumption:642,carbonFootprint:6168,readings:Array.from({length:24},(e,t)=>({timestamp:new Date(Date.now()-36e5*(23-t)).toISOString(),value:500+400*Math.random(),unit:"kWh"})),lastUpdated:(new Date).toISOString()},water:{totalConsumption:2840,peakUsage:180,averageConsumption:118,qualityIndex:92,readings:Array.from({length:24},(e,t)=>({timestamp:new Date(Date.now()-36e5*(23-t)).toISOString(),value:80+120*Math.random(),quality:85+15*Math.random(),unit:"m\xb3"})),lastUpdated:(new Date).toISOString()},air:{averageCO2:420,averageParticulatesMatter:12,airQualityIndex:78,readings:Array.from({length:24},(e,t)=>({timestamp:new Date(Date.now()-36e5*(23-t)).toISOString(),type:t%2===0?"co2":"pm2.5",value:t%2===0?400+50*Math.random():8+10*Math.random(),unit:t%2===0?"ppm":"\xb5g/m\xb3"})),lastUpdated:(new Date).toISOString()},waste:{totalGenerated:1250,totalRecycled:875,recyclingRate:70,wasteStreams:{paper:450,plastic:280,organic:320,metal:200},readings:Array.from({length:10},(e,t)=>({timestamp:new Date(Date.now()-864e5*t).toISOString(),type:t%2===0?"generated":"recycled",value:t%2===0?120+30*Math.random():80+25*Math.random(),category:["paper","plastic","organic","metal"][t%4],unit:"kg"})),lastUpdated:(new Date).toISOString()}};return t[e]||t.energy}static async setupRealTimeStream(e,t){try{return{success:!0,streamId:setInterval(()=>{e.forEach(e=>{const a={sensorId:e,timestamp:(new Date).toISOString(),value:100*Math.random(),type:"energy"};t(a)})},5e3)}}catch(a){return console.error("Real-time stream setup failed:",a),{success:!1,error:a.message}}}static stopRealTimeStream(e){return clearInterval(e),{success:!0}}}s.sensorTypes={energy:["electricity","gas","steam"],water:["consumption","quality","waste"],air:["co2","particulates","voc"],waste:["generation","recycling","disposal"]};const r=s},1541:(e,t,a)=>{a.d(t,{A:()=>r,HRMSSync:()=>s});class s{static async connectToHRMS(e,t){try{const a=this.supportedSystems[e.toLowerCase()];if(!a)throw new Error(`Unsupported HRMS: ${e}`);const s=await fetch(a.endpoint+"/connect",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_HRMS_API_KEY}`},body:JSON.stringify({credentials:t,system:e})});return await s.json()}catch(a){return console.error("HRMS connection failed:",a),{success:!1,error:a.message}}}static async syncEmployeeData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const a=await this.fetchHRMSData(e,"employees",t);return this.processEmployeeData(a,e)}catch(a){return console.error("Employee data sync failed:",a),this.getMockEmployeeData()}}static async syncDiversityData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const a=await this.fetchHRMSData(e,"diversity",t);return this.processDiversityData(a,e)}catch(a){return console.error("Diversity data sync failed:",a),this.getMockDiversityData()}}static async syncTrainingData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const a=await this.fetchHRMSData(e,"training",t);return this.processTrainingData(a,e)}catch(a){return console.error("Training data sync failed:",a),this.getMockTrainingData()}}static async fetchHRMSData(e,t,a){const s=this.supportedSystems[e.toLowerCase()],r=await fetch(`${s.endpoint}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filters:a,dataType:t})});return await r.json()}static processEmployeeData(e,t){const a={workday:{totalEmployees:"total_count",fullTime:"full_time_count",partTime:"part_time_count",contractors:"contractor_count"},successfactors:{totalEmployees:"headcount",fullTime:"fte_count",partTime:"pte_count",contractors:"contingent_count"},bamboohr:{totalEmployees:"employee_count",fullTime:"full_time",partTime:"part_time",contractors:"contractors"}},s=a[t.toLowerCase()]||a.workday;return{totalEmployees:e[s.totalEmployees]||0,employmentTypes:{fullTime:e[s.fullTime]||0,partTime:e[s.partTime]||0,contractors:e[s.contractors]||0},turnoverRate:this.calculateTurnoverRate(e),averageTenure:e.average_tenure||0,newHires:e.new_hires_count||0,departures:e.departures_count||0,locations:this.processLocationData(e.locations||[]),lastUpdated:(new Date).toISOString()}}static processDiversityData(e,t){return{genderDistribution:{male:e.male_count||0,female:e.female_count||0,nonBinary:e.non_binary_count||0,notSpecified:e.not_specified_count||0},ageDistribution:{under30:e.under_30_count||0,age30to50:e.age_30_50_count||0,over50:e.over_50_count||0},ethnicityDistribution:this.processEthnicityData(e.ethnicity||{}),leadershipDiversity:{femaleLeaders:e.female_leaders||0,minorityLeaders:e.minority_leaders||0,totalLeaders:e.total_leaders||0},payEquityMetrics:{genderPayGap:e.gender_pay_gap||0,ethnicityPayGap:e.ethnicity_pay_gap||0},lastUpdated:(new Date).toISOString()}}static processTrainingData(e,t){return{totalTrainingHours:e.total_training_hours||0,averageHoursPerEmployee:e.avg_hours_per_employee||0,trainingPrograms:{esgTraining:e.esg_training_hours||0,safetyTraining:e.safety_training_hours||0,complianceTraining:e.compliance_training_hours||0,skillDevelopment:e.skill_development_hours||0},completionRates:{mandatory:e.mandatory_completion_rate||0,optional:e.optional_completion_rate||0},certifications:this.processCertificationData(e.certifications||[]),trainingBudget:e.training_budget||0,lastUpdated:(new Date).toISOString()}}static calculateTurnoverRate(e){const t=e.departures_count||0,a=e.average_employees||e.total_count||1;return a>0?t/a*100:0}static processLocationData(e){return e.map(e=>({country:e.country,region:e.region,employeeCount:e.employee_count||0,isRemote:e.is_remote||!1}))}static processEthnicityData(e){return{white:e.white||0,black:e.black||0,hispanic:e.hispanic||0,asian:e.asian||0,nativeAmerican:e.native_american||0,pacificIslander:e.pacific_islander||0,multiracial:e.multiracial||0,other:e.other||0,notSpecified:e.not_specified||0}}static processCertificationData(e){return e.map(e=>({name:e.certification_name,count:e.employee_count||0,expirationDate:e.expiration_date,isRequired:e.is_required||!1}))}static async syncBenefitsData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const a=await this.fetchHRMSData(e,"benefits",t);return this.processBenefitsData(a,e)}catch(a){return console.error("Benefits data sync failed:",a),this.getMockBenefitsData()}}static processBenefitsData(e,t){return{healthcareParticipation:e.healthcare_participation||0,retirementParticipation:e.retirement_participation||0,wellnessProgramParticipation:e.wellness_participation||0,flexibleWorkArrangements:e.flexible_work_count||0,parentalLeaveUtilization:e.parental_leave_usage||0,employeeSatisfactionScore:e.satisfaction_score||0,benefitsCost:e.total_benefits_cost||0,lastUpdated:(new Date).toISOString()}}static getMockEmployeeData(){return{totalEmployees:1250,employmentTypes:{fullTime:1e3,partTime:150,contractors:100},turnoverRate:12.5,averageTenure:4.2,newHires:85,departures:45,locations:[{country:"USA",region:"North America",employeeCount:800,isRemote:!1},{country:"Canada",region:"North America",employeeCount:200,isRemote:!1},{country:"Remote",region:"Global",employeeCount:250,isRemote:!0}],lastUpdated:(new Date).toISOString()}}static getMockDiversityData(){return{genderDistribution:{male:625,female:575,nonBinary:35,notSpecified:15},ageDistribution:{under30:375,age30to50:625,over50:250},ethnicityDistribution:{white:625,black:150,hispanic:200,asian:175,nativeAmerican:25,pacificIslander:15,multiracial:45,other:10,notSpecified:5},leadershipDiversity:{femaleLeaders:18,minorityLeaders:12,totalLeaders:45},payEquityMetrics:{genderPayGap:2.3,ethnicityPayGap:1.8},lastUpdated:(new Date).toISOString()}}static getMockTrainingData(){return{totalTrainingHours:15750,averageHoursPerEmployee:12.6,trainingPrograms:{esgTraining:3150,safetyTraining:4200,complianceTraining:2800,skillDevelopment:5600},completionRates:{mandatory:95,optional:68},certifications:[{name:"Safety Certification",count:850,expirationDate:"2024-12-31",isRequired:!0},{name:"ESG Awareness",count:720,expirationDate:"2025-06-30",isRequired:!1}],trainingBudget:485e3,lastUpdated:(new Date).toISOString()}}static getMockBenefitsData(){return{healthcareParticipation:92,retirementParticipation:78,wellnessProgramParticipation:65,flexibleWorkArrangements:450,parentalLeaveUtilization:85,employeeSatisfactionScore:4.2,benefitsCost:875e4,lastUpdated:(new Date).toISOString()}}static async generateESGReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"comprehensive";try{const a=await this.syncEmployeeData(e),s=await this.syncDiversityData(e),r=await this.syncTrainingData(e),n=await this.syncBenefitsData(e);return{reportType:t,generatedAt:(new Date).toISOString(),summary:this.generateSummaryMetrics(a,s,r,n),employeeMetrics:a,diversityMetrics:s,trainingMetrics:r,benefitsMetrics:n,recommendations:this.generateRecommendations(s,r)}}catch(a){return console.error("ESG report generation failed:",a),{success:!1,error:a.message}}}static generateSummaryMetrics(e,t,a,s){return{totalEmployees:e.totalEmployees,diversityScore:this.calculateDiversityScore(t),trainingEffectiveness:this.calculateTrainingEffectiveness(a),employeeWellbeing:this.calculateWellbeingScore(s),turnoverRate:e.turnoverRate,genderPayEquity:100-t.payEquityMetrics.genderPayGap}}static calculateDiversityScore(e){const t=Math.min(e.genderDistribution.male,e.genderDistribution.female)/Math.max(e.genderDistribution.male,e.genderDistribution.female)*100,a=(e.leadershipDiversity.femaleLeaders+e.leadershipDiversity.minorityLeaders)/e.leadershipDiversity.totalLeaders*100;return Math.round((t+a)/2)}static calculateTrainingEffectiveness(e){return Math.round((e.completionRates.mandatory+e.completionRates.optional)/2)}static calculateWellbeingScore(e){return Math.round((e.healthcareParticipation+20*e.employeeSatisfactionScore)/2)}static generateRecommendations(e,t){const a=[];return e.payEquityMetrics.genderPayGap>5&&a.push({category:"Pay Equity",priority:"high",recommendation:"Conduct comprehensive pay equity analysis and address gender pay gaps"}),t.completionRates.mandatory<90&&a.push({category:"Training",priority:"medium",recommendation:"Improve mandatory training completion rates through better tracking and follow-up"}),a}}s.supportedSystems={workday:{endpoint:`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_HRMS_BASE_URL}/api/workday`,auth:"oauth2"},successfactors:{endpoint:`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_HRMS_BASE_URL}/api/successfactors`,auth:"saml"},bamboohr:{endpoint:`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_HRMS_BASE_URL}/api/bamboohr`,auth:"api_key"},adp:{endpoint:`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_HRMS_BASE_URL}/api/adp`,auth:"oauth2"}};const r=s},1924:(e,t,a)=>{a.r(t),a.d(t,{FlexibleConnector:()=>n,default:()=>i});var s=a(7786);class r{static async fetchData(e,t){const a={api:this.fetchFromAPI,mock:this.fetchFromMock,localStorage:this.fetchFromLocalStorage,file:this.fetchFromFile,database:this.fetchFromDatabase}[e];if(!a)throw new Error(`Unsupported data source: ${e}`);return await a(t)}static async fetchFromAPI(e){const{endpoint:t,method:a="GET",headers:s={},body:r,timeout:n=3e4}=e,i=new AbortController,o=setTimeout(()=>i.abort(),n);try{const e=await fetch(t,{method:a,headers:{"Content-Type":"application/json",...s},body:r?JSON.stringify(r):void 0,signal:i.signal});if(clearTimeout(o),!e.ok)throw new Error(`API Error: ${e.status} ${e.statusText}`);return await e.json()}catch(c){throw clearTimeout(o),c}}static async fetchFromMock(e){const{mockData:t,delay:a=500}=e;return await new Promise(e=>setTimeout(e,a)),"function"===typeof t?t():t}static async fetchFromLocalStorage(e){const{key:t,defaultValue:a=null}=e;try{const e=localStorage.getItem(t);return e?JSON.parse(e):a}catch(s){return console.warn("LocalStorage fetch failed:",s),a}}static async fetchFromFile(e){const{file:t,parser:a}=e;if(!t)throw new Error("File is required for file data source");const s=await t.text();if(a)return a(s);switch(t.name.split(".").pop().toLowerCase()){case"json":return JSON.parse(s);case"csv":return this.parseCSV(s);case"xml":return this.parseXML(s);default:return s}}static async fetchFromDatabase(e){const{query:t,connection:a}=e;throw new Error("Database integration not implemented")}static parseCSV(e){const t=e.split("\n"),a=t[0].split(",").map(e=>e.trim());return t.slice(1).map(e=>{const t=e.split(","),s={};return a.forEach((e,a)=>{var r;s[e]=null===(r=t[a])||void 0===r?void 0:r.trim()}),s}).filter(e=>Object.values(e).some(e=>e))}static parseXML(e){const t=(new DOMParser).parseFromString(e,"text/xml");return this.xmlToJson(t)}static xmlToJson(e){const t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(let a=0;a<e.attributes.length;a++){const s=e.attributes.item(a);t["@attributes"][s.nodeName]=s.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(let a=0;a<e.childNodes.length;a++){const s=e.childNodes.item(a),r=s.nodeName;if("undefined"===typeof t[r])t[r]=this.xmlToJson(s);else{if("undefined"===typeof t[r].push){const e=t[r];t[r]=[],t[r].push(e)}t[r].push(this.xmlToJson(s))}}return t}}class n{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type=e,this.config={...s.IntegrationConfig.getConfig(),...t},this.cache=new Map,this.retryCount=0}async fetchData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=`${this.type}_${e}_${JSON.stringify(t)}`;if(!1!==t.useCache&&this.cache.has(a)){const e=this.cache.get(a);if(Date.now()-e.timestamp<(t.cacheTimeout||3e5))return e.data}try{const s=await this.tryDataSource(this.config.dataSources.primary,e,t);return this.cache.set(a,{data:s,timestamp:Date.now()}),this.retryCount=0,s}catch(s){console.warn(`Primary source failed for ${this.type}:`,s.message);try{return await this.tryDataSource(this.config.dataSources.fallback,e,t)}catch(r){throw console.error(`All data sources failed for ${this.type}:`,r.message),new Error(`Data fetch failed: ${s.message}`)}}}async tryDataSource(e,t,a){const s=this.buildSourceConfig(e,t,a);return await r.fetchData(e,s)}buildSourceConfig(e,t,a){const s={api:()=>({endpoint:`${this.config.endpoints.base}/${this.type}/${t}`,method:a.method||"POST",body:a.filters||{},timeout:this.config.endpoints.timeout,headers:a.headers||{}}),mock:()=>({mockData:this.getMockData(t,a),delay:a.mockDelay||500}),localStorage:()=>({key:`${this.type}_${t}`,defaultValue:this.getMockData(t,a)}),file:()=>({file:a.file,parser:a.parser})}[e];if(!s)throw new Error(`No configuration builder for source: ${e}`);return s()}getMockData(e){return({financial:()=>({totalRevenue:this.randomValue(1e7,1e8),totalExpenses:this.randomValue(5e6,8e7),sustainabilityInvestments:this.randomValue(5e5,5e6),carbonTaxPaid:this.randomValue(5e4,5e5),lastUpdated:(new Date).toISOString()}),environmental:()=>({totalConsumption:this.randomValue(1e4,5e4),carbonFootprint:this.randomValue(3e3,15e3),waterUsage:this.randomValue(1e3,1e4),wasteGenerated:this.randomValue(500,5e3),lastUpdated:(new Date).toISOString()}),social:()=>({totalEmployees:this.randomValue(100,5e3),turnoverRate:this.randomValue(5,25),diversityScore:this.randomValue(40,95),trainingHours:this.randomValue(1e3,2e4),lastUpdated:(new Date).toISOString()}),governance:()=>({boardSize:this.randomValue(5,15),independentDirectors:this.randomValue(30,80),complianceScore:this.randomValue(70,100),auditScore:this.randomValue(80,100),lastUpdated:(new Date).toISOString()})}[e]||(()=>({})))()}randomValue(e,t){return Math.floor(Math.random()*(t-e+1))+e}transformData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.mappings)return e;const a={};return Object.entries(t.mappings).forEach(t=>{let[s,r]=t;"string"===typeof r?a[s]=this.getNestedValue(e,r):"function"===typeof r&&(a[s]=r(e))}),{...e,...a}}getNestedValue(e,t){return t.split(".").reduce((e,t)=>null===e||void 0===e?void 0:e[t],e)}validateData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[];return Object.entries(t).forEach(t=>{let[s,r]=t;const n=e[s];!r.required||void 0!==n&&null!==n||a.push(`${s} is required`),r.type&&void 0!==n&&typeof n!==r.type&&a.push(`${s} must be of type ${r.type}`),void 0!==r.min&&n<r.min&&a.push(`${s} must be at least ${r.min}`),void 0!==r.max&&n>r.max&&a.push(`${s} must be at most ${r.max}`)}),{isValid:0===a.length,errors:a}}clearCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)for(const t of this.cache.keys())t.includes(e)&&this.cache.delete(t);else this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}const i=n},4703:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(5043),r=a(3005),n=a(6110),i=a(5571),o=a(4808),c=a(1350);class l{static async importBill(e,t,a){try{const s=this.detectFileType(e),r=await this.parseFile(e,s);return this.processUtilityData(r,t,a)}catch(s){return console.error("Bill import failed:",s),this.getMockBillData(t)}}static detectFileType(e){const t=e.name.split(".").pop().toLowerCase();return this.supportedFormats.includes(t)?t:"unknown"}static async parseFile(e,t){const a={csv:this.parseCSV,json:this.parseJSON,xml:this.parseXML,pdf:this.parsePDF}[t];if(!a)throw new Error(`Unsupported file type: ${t}`);return await a(e)}static async parseCSV(e){const t=(await e.text()).split("\n"),a=t[0].split(",").map(e=>e.trim());return t.slice(1).map(e=>{const t=e.split(","),s={};return a.forEach((e,a)=>{var r;s[e]=null===(r=t[a])||void 0===r?void 0:r.trim()}),s}).filter(e=>Object.values(e).some(e=>e))}static async parseJSON(e){const t=await e.text();return JSON.parse(t)}static async parseXML(e){const t=await e.text(),a=(new DOMParser).parseFromString(t,"text/xml");return this.xmlToJson(a)}static async parsePDF(e){return{accountNumber:"PDF_ACCOUNT_123",billingPeriod:{start:"2024-01-01",end:"2024-01-31"},consumption:1250,cost:187.5,unit:"kWh"}}static xmlToJson(e){const t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(let a=0;a<e.attributes.length;a++){const s=e.attributes.item(a);t["@attributes"][s.nodeName]=s.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(let a=0;a<e.childNodes.length;a++){const s=e.childNodes.item(a),r=s.nodeName;if("undefined"===typeof t[r])t[r]=this.xmlToJson(s);else{if("undefined"===typeof t[r].push){const e=t[r];t[r]=[],t[r].push(e)}t[r].push(this.xmlToJson(s))}}return t}static processUtilityData(e,t,a){return({electricity:this.processElectricityBill,gas:this.processGasBill,water:this.processWaterBill,steam:this.processSteamBill,waste:this.processWasteBill}[t]||this.processGenericBill)(e,a)}static processElectricityBill(e,t){return{utilityType:"electricity",provider:t,accountNumber:e.accountNumber||e.account_id,billingPeriod:{start:e.billing_start||e.period_start,end:e.billing_end||e.period_end},consumption:{total:parseFloat(e.consumption||e.kwh_used||0),peak:parseFloat(e.peak_consumption||0),offPeak:parseFloat(e.off_peak_consumption||0),unit:"kWh"},cost:{total:parseFloat(e.total_cost||e.amount_due||0),energyCharges:parseFloat(e.energy_charges||0),deliveryCharges:parseFloat(e.delivery_charges||0),taxes:parseFloat(e.taxes||0),currency:e.currency||"USD"},carbonFootprint:this.calculateCarbonFootprint(parseFloat(e.consumption||0),"electricity"),renewablePercentage:parseFloat(e.renewable_percentage||0),lastUpdated:(new Date).toISOString()}}static processGasBill(e,t){return{utilityType:"gas",provider:t,accountNumber:e.accountNumber||e.account_id,billingPeriod:{start:e.billing_start||e.period_start,end:e.billing_end||e.period_end},consumption:{total:parseFloat(e.consumption||e.therms_used||0),unit:e.unit||"therms"},cost:{total:parseFloat(e.total_cost||e.amount_due||0),gasCharges:parseFloat(e.gas_charges||0),deliveryCharges:parseFloat(e.delivery_charges||0),taxes:parseFloat(e.taxes||0),currency:e.currency||"USD"},carbonFootprint:this.calculateCarbonFootprint(parseFloat(e.consumption||0),"gas"),lastUpdated:(new Date).toISOString()}}static processWaterBill(e,t){return{utilityType:"water",provider:t,accountNumber:e.accountNumber||e.account_id,billingPeriod:{start:e.billing_start||e.period_start,end:e.billing_end||e.period_end},consumption:{total:parseFloat(e.consumption||e.gallons_used||0),unit:e.unit||"gallons"},cost:{total:parseFloat(e.total_cost||e.amount_due||0),waterCharges:parseFloat(e.water_charges||0),sewerCharges:parseFloat(e.sewer_charges||0),taxes:parseFloat(e.taxes||0),currency:e.currency||"USD"},qualityMetrics:{ph:parseFloat(e.ph_level||7),hardness:parseFloat(e.hardness||0),chlorine:parseFloat(e.chlorine_level||0)},lastUpdated:(new Date).toISOString()}}static calculateCarbonFootprint(e,t){return e*({electricity:.4,gas:5.3,water:7e-4,steam:.2,waste:.5}[t]||0)}static async batchImport(e,t,a){const s=[];for(const n of e)try{const e=await this.importBill(n,t,a);s.push({success:!0,data:e,filename:n.name})}catch(r){s.push({success:!1,error:r.message,filename:n.name})}return{totalFiles:e.length,successful:s.filter(e=>e.success).length,failed:s.filter(e=>!e.success).length,results:s}}static validateBillData(e){var t,a,s,r,n;const i=[],o=[];return e.accountNumber||i.push("Account number is required"),null!==(t=e.consumption)&&void 0!==t&&t.total||i.push("Consumption data is required"),null!==(a=e.cost)&&void 0!==a&&a.total||i.push("Cost data is required"),(null===(s=e.consumption)||void 0===s?void 0:s.total)<0&&i.push("Consumption cannot be negative"),(null===(r=e.cost)||void 0===r?void 0:r.total)<0&&i.push("Cost cannot be negative"),(null===(n=e.consumption)||void 0===n?void 0:n.total)>1e4&&o.push("Unusually high consumption detected"),e.carbonFootprint>5e3&&o.push("High carbon footprint detected"),{isValid:0===i.length,errors:i,warnings:o}}static getMockBillData(e){const t={electricity:{utilityType:"electricity",provider:"Mock Electric Company",accountNumber:"ELEC123456789",billingPeriod:{start:"2024-01-01",end:"2024-01-31"},consumption:{total:1250,peak:800,offPeak:450,unit:"kWh"},cost:{total:187.5,energyCharges:125,deliveryCharges:45,taxes:17.5,currency:"USD"},carbonFootprint:500,renewablePercentage:25,lastUpdated:(new Date).toISOString()},gas:{utilityType:"gas",provider:"Mock Gas Company",accountNumber:"GAS987654321",billingPeriod:{start:"2024-01-01",end:"2024-01-31"},consumption:{total:85,unit:"therms"},cost:{total:95.75,gasCharges:68,deliveryCharges:20,taxes:7.75,currency:"USD"},carbonFootprint:450.5,lastUpdated:(new Date).toISOString()},water:{utilityType:"water",provider:"Mock Water Authority",accountNumber:"WATER555666777",billingPeriod:{start:"2024-01-01",end:"2024-01-31"},consumption:{total:3500,unit:"gallons"},cost:{total:65.25,waterCharges:45,sewerCharges:15,taxes:5.25,currency:"USD"},qualityMetrics:{ph:7.2,hardness:150,chlorine:.8},lastUpdated:(new Date).toISOString()}};return t[e]||t.electricity}static generateBillSummary(e){const t={totalBills:e.length,totalCost:0,totalCarbonFootprint:0,byUtilityType:{},byProvider:{},monthlyTrends:{}};return e.forEach(e=>{var a,s,r,n;t.totalCost+=(null===(a=e.cost)||void 0===a?void 0:a.total)||0,t.totalCarbonFootprint+=e.carbonFootprint||0,t.byUtilityType[e.utilityType]||(t.byUtilityType[e.utilityType]={count:0,cost:0,consumption:0}),t.byUtilityType[e.utilityType].count++,t.byUtilityType[e.utilityType].cost+=(null===(s=e.cost)||void 0===s?void 0:s.total)||0,t.byUtilityType[e.utilityType].consumption+=(null===(r=e.consumption)||void 0===r?void 0:r.total)||0,t.byProvider[e.provider]||(t.byProvider[e.provider]={count:0,cost:0}),t.byProvider[e.provider].count++,t.byProvider[e.provider].cost+=(null===(n=e.cost)||void 0===n?void 0:n.total)||0}),t}}l.supportedFormats=["pdf","csv","xml","json"],l.utilityTypes=["electricity","gas","water","steam","waste"];const d=l;var u=a(1541),p=a(7786),m=a(1924);class h{static registerConnectorType(e,t){this.connectorTypes.set(e,t)}static createConnector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=`${e}_${JSON.stringify(t)}`;if(this.instances.has(a))return this.instances.get(a);let s;if(this.connectorTypes.has(e)){s=new(this.connectorTypes.get(e))(t)}else s=new m.FlexibleConnector(e,t);return this.instances.set(a,s),s}static getConnector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=`${e}_${JSON.stringify(t)}`;return this.instances.get(a)}static removeConnector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=`${e}_${JSON.stringify(t)}`;return this.instances.delete(a)}static listConnectors(){return Array.from(this.instances.keys())}static clearAll(){this.instances.clear()}static createERPConnector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.createConnector("erp",{system:e,credentials:t,endpoints:{financial:`/erp/${e}/financial`,procurement:`/erp/${e}/procurement`},transformations:{financial:{mappings:{revenue:"total_revenue",expenses:"total_expenses",sustainability:"sustainability_spend"}}}})}static createIoTConnector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.createConnector("iot",{platform:e,sensorConfig:t,endpoints:{sensors:`/iot/${e}/sensors`,data:`/iot/${e}/data`},realTime:!0,bufferSize:1e3})}static createHRMSConnector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.createConnector("hrms",{system:e,credentials:t,endpoints:{employees:`/hrms/${e}/employees`,diversity:`/hrms/${e}/diversity`,training:`/hrms/${e}/training`},syncInterval:36e5})}static createUtilityConnector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.createConnector("utility",{provider:e,config:t,supportedFormats:["pdf","csv","xml","json"],autoProcess:!0})}}h.connectorTypes=new Map,h.instances=new Map,h.registerConnectorType("flexible",m.FlexibleConnector);const y=h;class g{static configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config={...this.config,...e};const{IntegrationConfig:t}=a(7786);e.dataSource&&t.setDataSource(e.dataSource,e.fallbackSource),e.apiBase&&t.setEndpoint(e.apiBase,e.timeout)}static registerConnector(e,t){this.connectors.set(e,t)}static createFlexibleConnector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{FlexibleConnector:s}=a(1924),r=new s(e,{...this.config,...t});return this.connectors.set(e,r),r}static getConnector(e){return this.connectors.get(e)}static async initializeIntegrations(e){const t={};if(e.settings&&this.configure(e.settings),e.erp)for(const[i,o]of Object.entries(e.erp))try{var s,r;let n;if(e.useFlexibleConnector)n=this.createFlexibleConnector("erp",{system:i,credentials:o});else{const{ERPConnector:e}=await Promise.resolve().then(a.bind(a,4808));n=e}const c=await(null===(s=(r=n).connectToERP)||void 0===s?void 0:s.call(r,i,o))||{success:!0};t[`erp_${i}`]=c,c.success&&this.connectedSystems.set(`erp_${i}`,{type:"erp",system:i,connector:n})}catch(n){t[`erp_${i}`]={success:!1,error:n.message}}if(e.iot)try{const{IoTDataIngestion:s}=await Promise.resolve().then(a.bind(a,1350)),r=await s.connectToIoTPlatform(e.iot.platform,e.iot.config);t.iot=r,r.success&&this.connectedSystems.set("iot",{type:"iot",connector:s})}catch(n){t.iot={success:!1,error:n.message}}if(e.hrms)for(const[i,o]of Object.entries(e.hrms))try{const{HRMSSync:e}=await Promise.resolve().then(a.bind(a,1541)),s=await e.connectToHRMS(i,o);t[`hrms_${i}`]=s,s.success&&this.connectedSystems.set(`hrms_${i}`,{type:"hrms",system:i,connector:e})}catch(n){t[`hrms_${i}`]={success:!1,error:n.message}}return t}static async syncAllData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};for(const[s,r]of this.connectedSystems.entries())try{let a;switch(r.type){case"erp":a=await this.syncERPData(r,e);break;case"iot":a=await this.syncIoTData(r);break;case"hrms":a=await this.syncHRMSData(r,e);break;default:a={success:!1,error:"Unknown connection type"}}t[s]=a}catch(a){t[s]={success:!1,error:a.message}}return t}static async syncERPData(e,t){return{success:!0,data:{financial:await e.connector.syncFinancialData(e.system,t),procurement:await e.connector.syncProcurementData(e.system,t)},lastSync:(new Date).toISOString()}}static async syncIoTData(e){const t=["energy","water","air","waste"],a={};for(const s of t)a[s]=await e.connector.ingestSensorData(`sensor_${s}_001`,s);return{success:!0,data:a,lastSync:(new Date).toISOString()}}static async syncHRMSData(e,t){return{success:!0,data:{employee:await e.connector.syncEmployeeData(e.system,t),diversity:await e.connector.syncDiversityData(e.system,t),training:await e.connector.syncTrainingData(e.system,t),benefits:await e.connector.syncBenefitsData(e.system,t)},lastSync:(new Date).toISOString()}}static scheduleSync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36e5;this.syncSchedules.has(e)&&clearInterval(this.syncSchedules.get(e));const a=setInterval(async()=>{const t=this.connectedSystems.get(e);if(t)try{await this.syncSingleSystem(e,t)}catch(a){console.error(`Scheduled sync failed for ${e}:`,a)}},t);return this.syncSchedules.set(e,a),a}static async syncSingleSystem(e,t){switch(t.type){case"erp":return await this.syncERPData(t,{});case"iot":return await this.syncIoTData(t);case"hrms":return await this.syncHRMSData(t,{});default:throw new Error("Unknown connection type")}}static getConnectionStatus(){const e={};for(const[t,a]of this.connectedSystems.entries())e[t]={type:a.type,system:a.system||"default",connected:!0,lastSync:a.lastSync||null,scheduled:this.syncSchedules.has(t)};return e}static disconnectSystem(e){return this.syncSchedules.has(e)&&(clearInterval(this.syncSchedules.get(e)),this.syncSchedules.delete(e)),this.connectedSystems.delete(e)}static async testAllConnections(){const e={};for(const[a,s]of this.connectedSystems.entries())try{let t;switch(s.type){case"erp":t=await s.connector.testConnection(s.system);break;case"iot":t=!0;break;case"hrms":t=await s.connector.connectToHRMS(s.system,{}),t=t.success;break;default:t=!1}e[a]={success:t}}catch(t){e[a]={success:!1,error:t.message}}return e}}g.connectedSystems=new Map,g.syncSchedules=new Map,g.connectors=new Map,g.config={dataSource:"mock",fallbackSource:"localStorage",cacheTimeout:3e5,retryAttempts:3};var f=a(579);const b=()=>{const{isDark:e}=(0,r.D)(),t=(0,n.Y)(e),[a,l]=(0,s.useState)("overview"),[m,h]=(0,s.useState)({}),[b,S]=(0,s.useState)({}),[v,x]=(0,s.useState)(null),[w,_]=(0,s.useState)(!1),[D,C]=(0,s.useState)("mock"),[T,E]=(0,s.useState)("original");(0,s.useEffect)(()=>{N(),p.default.setDataSource(D,"mock")},[D]);const N=()=>{const e=g.getConnectionStatus();h(e)},j=async e=>{_(!0);try{let t;if("flexible"===T){const a=y.createConnector(e,{dataSource:D}),s="erp"===e?"financial":"iot"===e?"environmental":"social";t=await a.fetchData(s,{useCache:!1})}else switch(e){case"erp":t=await o.A.syncFinancialData("sap",{});break;case"iot":t=await c.A.ingestSensorData("sensor_001","energy");break;case"hrms":t=await u.A.syncEmployeeData("workday",{});break;default:t={success:!0,data:{}}}S(a=>({...a,[e]:t})),P(`${e} data synced successfully`,"success")}catch(t){P(`Sync failed: ${t.message}`,"error")}_(!1)},P=function(e){x({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"}),setTimeout(()=>x(null),3e3)};return(0,f.jsx)("div",{className:`min-h-screen p-6 ${t.bg.gradient}`,children:(0,f.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,f.jsxs)("div",{className:"mb-8",children:[(0,f.jsx)("h1",{className:`text-3xl font-bold ${t.text.primary}`,children:"Integration Dashboard"}),(0,f.jsx)("p",{className:`text-lg ${t.text.secondary}`,children:"Connect and sync data from enterprise systems"})]}),(0,f.jsx)("div",{className:`mb-6 p-4 rounded-lg ${t.bg.card}`,children:(0,f.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:`block text-sm font-medium mb-1 ${t.text.primary}`,children:"Data Source:"}),(0,f.jsxs)("select",{value:D,onChange:e=>C(e.target.value),className:`px-3 py-1 rounded border ${t.bg.input} ${t.border.input}`,children:[(0,f.jsx)("option",{value:"mock",children:"Mock Data"}),(0,f.jsx)("option",{value:"api",children:"API"}),(0,f.jsx)("option",{value:"localStorage",children:"Local Storage"}),(0,f.jsx)("option",{value:"file",children:"File Upload"})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:`block text-sm font-medium mb-1 ${t.text.primary}`,children:"Connector Type:"}),(0,f.jsxs)("select",{value:T,onChange:e=>E(e.target.value),className:`px-3 py-1 rounded border ${t.bg.input} ${t.border.input}`,children:[(0,f.jsx)("option",{value:"original",children:"Original Connectors"}),(0,f.jsx)("option",{value:"flexible",children:"Flexible Connectors"})]})]}),(0,f.jsx)("div",{className:"flex items-end",children:(0,f.jsx)(i.$n,{variant:"outline",size:"sm",onClick:()=>{p.default.setDataSource(D,"mock"),P("Configuration updated","success")},children:"Apply Config"})})]})}),(0,f.jsx)("div",{className:"flex space-x-1 mb-8",children:["overview","connections","sync","testing","config"].map(e=>(0,f.jsx)("button",{onClick:()=>l(e),className:"px-4 py-2 rounded-lg font-medium capitalize "+(a===e?"bg-blue-500 text-white":`${t.bg.card} ${t.text.secondary} hover:${t.bg.subtle}`),children:e},e))}),"overview"===a&&(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:"erp",title:"ERP Systems",description:"SAP, Oracle, Dynamics integration",icon:"\ud83c\udfe2",systems:["SAP","Oracle","Dynamics"],features:["Financial Data","Procurement Data","Sustainability Investments"]},{id:"iot",title:"IoT Sensors",description:"Environmental monitoring",icon:"\ud83c\udf10",systems:["AWS IoT","Azure IoT","GCP IoT"],features:["Energy Monitoring","Water Usage","Air Quality","Waste Tracking"]},{id:"utility",title:"Utility Bills",description:"Energy & water bill processing",icon:"\ud83d\udcc4",systems:["PDF","CSV","XML","JSON"],features:["Bill Parsing","Carbon Calculation","Cost Analysis"]},{id:"hrms",title:"HRMS Systems",description:"Employee & social data",icon:"\ud83d\udc65",systems:["Workday","SuccessFactors","BambooHR"],features:["Employee Data","Diversity Metrics","Training Records"]}].map(e=>(0,f.jsxs)("div",{className:`p-6 rounded-xl shadow-lg ${t.bg.card}`,children:[(0,f.jsxs)("div",{className:"flex items-center mb-4",children:[(0,f.jsx)("span",{className:"text-3xl mr-3",children:e.icon}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:`text-xl font-bold ${t.text.primary}`,children:e.title}),(0,f.jsx)("p",{className:`${t.text.secondary}`,children:e.description})]})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("h4",{className:`font-semibold mb-2 ${t.text.primary}`,children:"Supported Systems:"}),(0,f.jsx)("div",{className:"flex flex-wrap gap-2",children:e.systems.map(e=>(0,f.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:e},e))})]}),(0,f.jsxs)("div",{className:"mb-4",children:[(0,f.jsx)("h4",{className:`font-semibold mb-2 ${t.text.primary}`,children:"Features:"}),(0,f.jsx)("ul",{className:`text-sm ${t.text.secondary}`,children:e.features.map(e=>(0,f.jsxs)("li",{className:"flex items-center",children:[(0,f.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),e]},e))})]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(i.$n,{variant:"outline",size:"sm",onClick:()=>(async e=>{_(!0);try{let t;switch(e){case"erp_sap":t=await o.A.testConnection("sap");break;case"iot":t=await c.A.connectToIoTPlatform("aws",{});break;case"hrms_workday":t=await u.A.connectToHRMS("workday",{});break;default:t={success:!0}}P(`${e} connection: ${t.success?"Success":"Failed"}`,t.success?"success":"error")}catch(t){P(`Connection failed: ${t.message}`,"error")}_(!1)})(e.id),disabled:w,children:"Test Connection"}),(0,f.jsx)(i.$n,{variant:"primary",size:"sm",onClick:()=>j(e.id),disabled:w,children:"Sync Data"})]})]},e.id))}),"connections"===a&&(0,f.jsxs)("div",{className:`p-6 rounded-xl shadow-lg ${t.bg.card}`,children:[(0,f.jsx)("h2",{className:`text-2xl font-bold mb-6 ${t.text.primary}`,children:"System Connections"}),(0,f.jsx)("div",{className:"space-y-4",children:[{name:"SAP ERP",status:"connected",lastSync:"2024-01-15 10:30"},{name:"AWS IoT Core",status:"connected",lastSync:"2024-01-15 10:25"},{name:"Workday HRMS",status:"disconnected",lastSync:"Never"},{name:"Oracle Financials",status:"error",lastSync:"2024-01-14 15:20"}].map(e=>(0,f.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-lg ${t.bg.subtle}`,children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 "+("connected"===e.status?"bg-green-500":"error"===e.status?"bg-red-500":"bg-gray-400")}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:`font-semibold ${t.text.primary}`,children:e.name}),(0,f.jsxs)("p",{className:`text-sm ${t.text.secondary}`,children:["Last sync: ",e.lastSync]})]})]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(i.$n,{variant:"outline",size:"sm",children:"Configure"}),(0,f.jsx)(i.$n,{variant:"connected"===e.status?"danger":"primary",size:"sm",children:"connected"===e.status?"Disconnect":"Connect"})]})]},e.name))})]}),"sync"===a&&(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,f.jsxs)("div",{className:`p-6 rounded-xl shadow-lg ${t.bg.card}`,children:[(0,f.jsx)("h2",{className:`text-2xl font-bold mb-6 ${t.text.primary}`,children:"Data Sync Status"}),Object.entries(b).map(e=>{let[a,s]=e;return(0,f.jsxs)("div",{className:`mb-4 p-4 rounded-lg ${t.bg.subtle}`,children:[(0,f.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,f.jsxs)("h3",{className:`font-semibold capitalize ${t.text.primary}`,children:[a," Data"]}),(0,f.jsx)("span",{className:"text-green-600 text-sm",children:s.lastUpdated?new Date(s.lastUpdated).toLocaleString():"Just now"})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:["erp"===a&&s.totalRevenue&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{children:["Revenue: $",s.totalRevenue.toLocaleString()]}),(0,f.jsxs)("div",{children:["Sustainability: $",s.sustainabilityInvestments.toLocaleString()]})]}),"iot"===a&&s.totalConsumption&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{children:["Energy: ",s.totalConsumption," kWh"]}),(0,f.jsxs)("div",{children:["Carbon: ",s.carbonFootprint," kg CO2"]})]}),"hrms"===a&&s.totalEmployees&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{children:["Employees: ",s.totalEmployees]}),(0,f.jsxs)("div",{children:["Turnover: ",s.turnoverRate,"%"]})]})]})]},a)})]}),(0,f.jsxs)("div",{className:`p-6 rounded-xl shadow-lg ${t.bg.card}`,children:[(0,f.jsx)("h2",{className:`text-2xl font-bold mb-6 ${t.text.primary}`,children:"Sync Controls"}),(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsx)(i.$n,{variant:"primary",onClick:()=>j("erp"),disabled:w,className:"w-full",children:"Sync ERP Data"}),(0,f.jsx)(i.$n,{variant:"primary",onClick:()=>j("iot"),disabled:w,className:"w-full",children:"Sync IoT Data"}),(0,f.jsx)(i.$n,{variant:"primary",onClick:()=>j("hrms"),disabled:w,className:"w-full",children:"Sync HRMS Data"}),(0,f.jsx)(i.$n,{variant:"outline",onClick:N,className:"w-full",children:"Refresh Status"})]})]})]}),"config"===a&&(0,f.jsxs)("div",{className:`p-6 rounded-xl shadow-lg ${t.bg.card}`,children:[(0,f.jsx)("h2",{className:`text-2xl font-bold mb-6 ${t.text.primary}`,children:"Advanced Configuration"}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:`text-lg font-semibold mb-4 ${t.text.primary}`,children:"Connector Management"}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsx)(i.$n,{variant:"outline",onClick:()=>{y.createERPConnector("sap",{});P("ERP connector created","success")},className:"w-full",children:"Create ERP Connector"}),(0,f.jsx)(i.$n,{variant:"outline",onClick:()=>{y.createIoTConnector("aws",{});P("IoT connector created","success")},className:"w-full",children:"Create IoT Connector"}),(0,f.jsx)(i.$n,{variant:"outline",onClick:()=>{const e=y.listConnectors();P(`Active connectors: ${e.length}`,"info")},className:"w-full",children:"List Active Connectors"})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:`text-lg font-semibold mb-4 ${t.text.primary}`,children:"Data Source Configuration"}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:`block text-sm font-medium mb-1 ${t.text.primary}`,children:"API Base URL:"}),(0,f.jsx)("input",{type:"text",placeholder:"http://localhost:8080/api",className:`w-full p-2 border rounded ${t.bg.input} ${t.border.input}`,onChange:e=>{p.default.setEndpoint(e.target.value)}})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:`block text-sm font-medium mb-1 ${t.text.primary}`,children:"Cache Timeout (ms):"}),(0,f.jsx)("input",{type:"number",placeholder:"300000",className:`w-full p-2 border rounded ${t.bg.input} ${t.border.input}`})]}),(0,f.jsx)(i.$n,{variant:"primary",onClick:()=>{P("Configuration saved","success")},className:"w-full",children:"Save Configuration"})]})]})]})]}),"testing"===a&&(0,f.jsxs)("div",{className:`p-6 rounded-xl shadow-lg ${t.bg.card}`,children:[(0,f.jsx)("h2",{className:`text-2xl font-bold mb-6 ${t.text.primary}`,children:"Integration Testing"}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:`text-lg font-semibold mb-4 ${t.text.primary}`,children:"Mock Data Generation"}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsx)(i.$n,{variant:"outline",onClick:()=>{const e=o.A.getMockFinancialData();S(t=>({...t,erp:e})),P("ERP mock data generated","success")},className:"w-full",children:"Generate ERP Mock Data"}),(0,f.jsx)(i.$n,{variant:"outline",onClick:()=>{const e=c.A.getMockSensorData("energy");S(t=>({...t,iot:e})),P("IoT mock data generated","success")},className:"w-full",children:"Generate IoT Mock Data"}),(0,f.jsx)(i.$n,{variant:"outline",onClick:()=>{const e=u.A.getMockEmployeeData();S(t=>({...t,hrms:e})),P("HRMS mock data generated","success")},className:"w-full",children:"Generate HRMS Mock Data"})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:`text-lg font-semibold mb-4 ${t.text.primary}`,children:"File Upload Testing"}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsx)("input",{type:"file",accept:".pdf,.csv,.xml,.json",onChange:async e=>{const t=e.target.files[0];if(t)try{const e=await d.importBill(t,"electricity","Test Provider");S(t=>({...t,utility:e})),P("Utility bill imported successfully","success")}catch(a){P("Import failed: "+a.message,"error")}},className:`w-full p-3 border rounded-lg ${t.bg.input} ${t.border.input}`}),(0,f.jsx)("p",{className:`text-sm ${t.text.secondary}`,children:"Upload utility bills (PDF, CSV, XML, JSON)"})]})]})]})]}),v&&(0,f.jsx)(i.y8,{message:v.message,type:v.type,onClose:()=>x(null)})]})})}},4808:(e,t,a)=>{a.d(t,{A:()=>r,ERPConnector:()=>s});class s{static async connectToERP(e,t){try{const a=this.config[e.toLowerCase()];if(!a)throw new Error(`Unsupported ERP system: ${e}`);const s=await fetch(a.endpoint+"/connect",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ERP_API_KEY}`},body:JSON.stringify({credentials:t,system:e})});return await s.json()}catch(a){return console.error("ERP connection failed:",a),{success:!1,error:a.message}}}static async syncFinancialData(e,t){try{const a=await this.fetchERPData(e,"financial",t);return this.transformFinancialData(a,e)}catch(a){return console.error("Financial data sync failed:",a),this.getMockFinancialData()}}static async syncProcurementData(e,t){try{const a=await this.fetchERPData(e,"procurement",t);return this.transformProcurementData(a,e)}catch(a){return console.error("Procurement data sync failed:",a),this.getMockProcurementData()}}static async fetchERPData(e,t,a){const s=this.config[e.toLowerCase()],r=await fetch(`${s.endpoint}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dateRange:a,module:t})});return await r.json()}static transformFinancialData(e,t){const a={sap:{revenue:"TOTAL_REVENUE",expenses:"TOTAL_EXPENSES"},oracle:{revenue:"REV_AMOUNT",expenses:"EXP_AMOUNT"},dynamics:{revenue:"Revenue",expenses:"Expenses"}},s=a[t.toLowerCase()]||a.sap;return{totalRevenue:e[s.revenue]||0,totalExpenses:e[s.expenses]||0,sustainabilityInvestments:e.sustainability_spend||0,carbonTaxPaid:e.carbon_tax||0,greenBondIssuance:e.green_bonds||0,lastUpdated:(new Date).toISOString()}}static transformProcurementData(e,t){return{supplierCount:e.supplier_count||0,localSuppliers:e.local_suppliers||0,sustainableProcurement:e.sustainable_procurement||0,supplierDiversityScore:e.diversity_score||0,ethicalSourcingCompliance:e.ethical_compliance||0,lastUpdated:(new Date).toISOString()}}static getMockFinancialData(){return{totalRevenue:5e7,totalExpenses:35e6,sustainabilityInvestments:25e5,carbonTaxPaid:15e4,greenBondIssuance:5e6,lastUpdated:(new Date).toISOString()}}static getMockProcurementData(){return{supplierCount:250,localSuppliers:180,sustainableProcurement:75,supplierDiversityScore:68,ethicalSourcingCompliance:92,lastUpdated:(new Date).toISOString()}}static async testConnection(e){try{const t=this.config[e.toLowerCase()];return(await fetch(t.endpoint+"/health")).ok}catch(t){return!1}}}s.config={sap:{endpoint:`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ERP_BASE_URL}/api/sap`,auth:"oauth2"},oracle:{endpoint:`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ERP_BASE_URL}/api/oracle`,auth:"basic"},dynamics:{endpoint:`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ERP_BASE_URL}/api/dynamics`,auth:"oauth2"}};const r=s},5571:(e,t,a)=>{a.d(t,{$n:()=>c,Fc:()=>d,aF:()=>o,kt:()=>n,pd:()=>l,y8:()=>i});var s=a(5043),r=a(579);const n=e=>{let{size:t="md",color:a="blue",isDark:s=!1}=e;return(0,r.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t]} border-2 ${{blue:"border-blue-500",green:"border-green-500",red:"border-red-500",white:"border-white"}[a]} border-t-transparent rounded-full animate-spin`})},i=e=>{let{message:t,type:a="success",onClose:n}=e;(0,s.useEffect)(()=>{const e=setTimeout(n,3e3);return()=>clearTimeout(e)},[n]);return(0,r.jsx)("div",{className:`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 animate-slide-up ${{success:"bg-green-500 text-white",error:"bg-red-500 text-white",warning:"bg-yellow-500 text-black",info:"bg-blue-500 text-white"}[a]}`,children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)("button",{onClick:n,className:"ml-2 text-lg",children:"\xd7"})]})})},o=e=>{let{isOpen:t,onClose:a,title:s,children:n,isDark:i=!1}=e;return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:a}),(0,r.jsxs)("div",{className:"relative rounded-2xl p-6 max-w-md w-full mx-4 animate-fade-in "+(i?"bg-gray-800 text-white":"bg-white text-gray-900"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:s}),(0,r.jsx)("button",{onClick:a,className:"text-2xl "+(i?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"),children:"\xd7"})]}),n]})]}):null},c=e=>{let{children:t,variant:a="primary",size:s="md",loading:i=!1,disabled:o=!1,onClick:c,icon:l,type:d="button",...u}=e;return(0,r.jsxs)("button",{type:d,className:`\n        inline-flex items-center justify-center font-medium rounded-lg\n        transition-all duration-200 hover:scale-105 active:scale-95\n        ${{primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-900",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700"}[a]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s]}\n        ${o||i?"opacity-50 cursor-not-allowed":""}\n      `,disabled:o||i,onClick:c,...u,children:[i&&(0,r.jsx)(n,{size:"sm"}),l&&(0,r.jsx)("span",{className:"mr-2",children:l}),(0,r.jsx)("span",{className:i?"ml-2":"",children:t})]})},l=e=>{let{label:t,error:a,icon:s,className:n="",isDark:i=!1,...o}=e;return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 "+(i?"text-gray-300":"text-gray-700"),children:t}),(0,r.jsxs)("div",{className:"relative",children:[s&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 "+(i?"text-gray-500":"text-gray-400"),children:s}),(0,r.jsx)("input",{className:`\n          w-full px-3 py-2 border rounded-lg transition-all duration-200\n          focus:ring-2 focus:ring-blue-500 focus:border-blue-500\n          ${i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}\n          ${s?"pl-10":""}\n          ${a?"border-red-500 focus:ring-red-500":""}\n          ${n}\n        `,...o})]}),a&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a})]})},d=e=>{let{type:t="info",title:a,message:s,children:n,onClose:i,isDark:o=!1,className:c=""}=e;const l={info:o?"bg-blue-900/30 border-blue-700 text-blue-300":"bg-blue-50 border-blue-200 text-blue-800",success:o?"bg-green-900/30 border-green-700 text-green-300":"bg-green-50 border-green-200 text-green-800",warning:o?"bg-yellow-900/30 border-yellow-700 text-yellow-300":"bg-yellow-50 border-yellow-200 text-yellow-800",error:o?"bg-red-900/30 border-red-700 text-red-300":"bg-red-50 border-red-200 text-red-800"};return(0,r.jsx)("div",{className:`border rounded-lg p-4 transition-colors duration-300 ${l[t]}`,children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-lg mr-3",children:{info:"\u2139\ufe0f",success:"\u2705",warning:"\u26a0\ufe0f",error:"\u274c"}[t]}),(0,r.jsxs)("div",{className:"flex-1",children:[a&&(0,r.jsx)("h4",{className:"font-medium mb-1",children:a}),(0,r.jsx)("div",{children:s||n})]}),i&&(0,r.jsx)("button",{onClick:i,className:"ml-3 text-lg hover:opacity-70",children:"\xd7"})]})})}},6110:(e,t,a)=>{a.d(t,{Y:()=>s});const s=e=>({bg:{primary:e?"bg-gray-900":"bg-white",secondary:e?"bg-gray-800":"bg-gray-50",tertiary:e?"bg-gray-700":"bg-gray-100",gradient:e?"bg-gradient-to-br from-gray-900 to-gray-800":"bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100",card:e?"bg-gray-800":"bg-white",input:e?"bg-gray-700":"bg-white",subtle:e?"bg-gray-700":"bg-gray-50",accent:e?"bg-blue-900/30":"bg-blue-50"},text:{primary:e?"text-white":"text-gray-900",secondary:e?"text-gray-300":"text-gray-700",tertiary:e?"text-gray-400":"text-gray-600",muted:"text-gray-500",accent:"text-blue-500"},border:{primary:e?"border-gray-700":"border-gray-200",secondary:e?"border-gray-600":"border-gray-300",input:e?"border-gray-600":"border-gray-300"},hover:{bg:e?"hover:bg-gray-700":"hover:bg-gray-100",text:e?"hover:text-white":"hover:text-gray-900",border:e?"hover:border-gray-500":"hover:border-gray-400",subtle:e?"hover:bg-gray-600":"hover:bg-gray-200",card:e?"hover:bg-gray-700":"hover:bg-gray-50"},focus:{ring:"focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}})},7786:(e,t,a)=>{a.r(t),a.d(t,{IntegrationConfig:()=>s,default:()=>r});class s{static setDataSource(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mock";this.config.dataSources.primary=e,this.config.dataSources.fallback=t}static setEndpoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;this.config.endpoints.base=e,this.config.endpoints.timeout=t}static registerConnector(e,t){this.config.connectors.set(e,t)}static registerAdapter(e,t){this.config.adapters.set(e,t)}static getConnector(e){return this.config.connectors.get(e)}static getAdapter(e){return this.config.adapters.get(e)}static getConfig(){return{...this.config}}}s.config={dataSources:{primary:"api",fallback:"mock"},endpoints:{base:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE||"http://localhost:8080/api",timeout:3e4,retries:3},connectors:new Map,adapters:new Map};const r=s}}]);
//# sourceMappingURL=703.af189485.chunk.js.map